<!DOCTYPE html>
<html>
<!--
„ÄÄ„ÄÄ„ÄÄ„ÄÄ„ÄÄ„ÄÄ„ÄÄ„ÄÄ  „ÄÄ„ÄÄ„ÄÄ/„ÉΩ„ÄÄ„ÄÄ„ÄÄ„ÄÄ„ÄÄ„ÄÄ/„ÉΩ
„ÄÄ„ÄÄ„ÄÄ„ÄÄ„ÄÄ„ÄÄ „ÄÄ„ÄÄ „ÄÄ„ÄÄ/ „ÄÄ„ÉΩ„ÄÄ„ÄÄ„ÄÄ „ÄÄ / „ÄÄ„ÉΩ
„ÄÄ   „ÄÄÔºøÔºøÔºøÔºøÔºøÔºø / „ÄÄ „ÄÄ „ÉΩÔºøÔºø/„ÄÄ „ÄÄ „ÄÄ„ÉΩ
„ÄÄ   „ÄÄ|„ÄÄÔºøÔºøÔºøÔºøÔºè„ÄÄ„ÄÄ„ÄÄ „ÄÄ „ÄÄ „ÄÄ„ÄÄ   :::::::::Ôºº
  „ÄÄ„ÄÄ| |„ÄÄ„ÄÄ„ÄÄ„ÄÄ / Ôºè„ÄÄ„ÄÄ„ÄÄ„ÄÄ„ÄÄ„ÄÄÔºº „ÄÄ „ÄÄ::::::::::::|
„ÄÄ „ÄÄ| |„ÄÄQQ„ÄÄ„ÄÄ„ÄÄ| Ôºà ‚óèÔºâ„ÄÄ„ÄÄ„ÄÄ Ôºà‚óèÔºâ  „ÄÄ ::::::::::::|
„ÄÄ„ÄÄ| |191965461 |„ÄÄ „ÄÄ„ÄÄ„ÄÄ „ÄÄ„ÄÄ„ÄÄ„ÄÄ  „ÄÄ:::::::::::::|    Êú¨‰∫∫‰∏Ä‰ª£Á†ÅËèúÈÄº
„ÄÄ„ÄÄ| |„ÄÄ„ÄÄ„ÄÄ„ÄÄ „ÄÄ|„ÄÄ „ÄÄÔºà__‰∫∫__‰∏ø   „ÄÄ.....:::::::::::::/   1998Áîü
   | |ÔºøÔºøÔºøÔºø„ÄÄ„ÉΩ„ÄÄ„ÄÄ„ÄÄ„ÄÄ„ÄÄ    .....::::::::::::::::::::<    ÂÆÖ
„ÄÄ ‚îîÔºøÔºøÔºøÔºèÔø£Ôø£„ÄÄ„ÄÄ„ÄÄ„ÄÄ„ÄÄ„ÄÄ    „ÄÄ:::::::::::::::::::::::::|  Ê¨¢ËøéÂãæÊê≠
„ÄÄ„ÄÄ|Ôºº„ÄÄ„ÄÄ„ÄÄ |„ÄÄ„ÄÄ„ÄÄ„ÄÄ„ÄÄ„ÄÄ„ÄÄ„ÄÄ„ÄÄ„ÄÄ„ÄÄ„ÄÄ:::::::::::::::::::::|
„ÄÄ„ÄÄÔºº Ôºº„ÄÄ„ÄÄÔººÔºøÔºøÔºø„ÄÄ„ÄÄ„ÄÄ„ÄÄ „ÄÄ„ÄÄ ::::::::::::::::::::::::|

-->
<head><meta name="generator" content="Hexo 3.9.0">
    <meta charset="utf-8">
    
    
    <title>Ê∂àÊÅØÈòüÂàó| kafka‰∏≠Èó¥‰ª∂ÂéüÁêÜ &amp;&amp; Áü•ËØÜÁÇπ | üéâ Missionary&#39;s Blog üòÜ | Missionary ‰∏≠ÂõΩ üëã</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="keywords" content="Ê∂àÊÅØÈòüÂàó,kafka,ÊäÄÊúØ,ÂéüÁêÜ">
    <link rel="shortcut icon" href="/img/favicon.ico">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.2/dist/jquery.fancybox.min.css">
    <link rel="stylesheet" href="/css/style.css?v=1.4.4">

    
        <link rel="stylesheet" href="/css/third-party/gitment.css?v=1.4.4">
    
    <script type="text/javascript">
        // Data Center
        var DC = {
            reward:	true,
            lv: JSON.parse('{"enable":false,"app_id":"7yVfPXhFH02yrjkOWJ2agpo6-gzGzoHsz","app_key":"CGsuOukhiIkc4nE75fKtUtXy","icon":true}'),
            v: JSON.parse('{"enable":true,"appid":"7yVfPXhFH02yrjkOWJ2agpo6-gzGzoHsz","appkey":"CGsuOukhiIkc4nE75fKtUtXy","notify":true,"verify":true,"placeholder":"give me some sugers plz...","avatar":"wavatar","highlight":true}'),
            g: JSON.parse('{"enable":true,"lazy":true,"owner":"missionOdd","repo":"FAQ","oauth":{"client_id":"3dffefee0452a0a23205","client_secret":"1b1394230850e312a0a178bdd41c4e70893d759f"},"perPage":6}'),
            d: JSON.parse('{"app_id":"8997440a"}')
        };
    </script>
    <script type="text/javascript">
        window.lazyScripts=[];
    </script>
    
        <script type="text/javascript" src="/js/plugins/daovoice.js?v=1.4.4"></script>
    

<link rel="alternate" href="/atom.xml" title="üéâ Missionary's Blog üòÜ" type="application/atom+xml">
</head>

<script src="//cdnjs.cloudflare.com/ajax/libs/pace/1.0.2/pace.min.js"></script>
<link href="//cdnjs.cloudflare.com/ajax/libs/pace/1.0.2/themes/pink/pace-theme-flash.css" rel="stylesheet">
<link rel="stylesheet" href="//cdnjs.loli.net/ajax/libs/mdui/0.4.1/css/mdui.min.css">
<link rel="stylesheet"  href="//cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.min.css">
<link rel="stylesheet" href="/css/custom.css?v=1.4.4">
<link href="//cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.css" rel="stylesheet">
<link href="//cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/default-skin/default-skin.css" rel="stylesheet">

<body>
    <div id="loading" class="active mdui-progress">
  <div class="mdui-progress-determinate"></div>
</div>

    <aside id="menu" class="">
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap">
      
      <img src="/img/brand.jpg" class="brand-bg">
      
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light rubberBand ">
          <img src="/img/avatar.jpg">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">Missionary</h5>
          <a href="mailto:z1165996866@hotmail.com" title="z1165996866@hotmail.com" class="mail">
            
              <span>z</span>
            
              <span>1</span>
            
              <span>1</span>
            
              <span>6</span>
            
              <span>5</span>
            
              <span>9</span>
            
              <span>9</span>
            
              <span>6</span>
            
              <span>8</span>
            
              <span>6</span>
            
              <span>6</span>
            
              <span>@</span>
            
              <span>h</span>
            
              <span>o</span>
            
              <span>t</span>
            
              <span>m</span>
            
              <span>a</span>
            
              <span>i</span>
            
              <span>l</span>
            
              <span>.</span>
            
              <span>c</span>
            
              <span>o</span>
            
              <span>m</span>
            
          </a>
          <a href="/atom.xml" rel="alternate" class="mdui-btn mdui-btn-dense mdui-color-theme-accent mdui-ripple">
              <i class="fa fa-rss"></i>
              RSSËÆ¢ÈòÖ
            </a>
        </hgroup>
        
        <ul class="menu-link">
          
              <li>
                <a href="https://github.com/missionOdd" target="_blank">
                  <i class="icon icon-lg icon-github"></i>
                </a>
              </li>
            
              <li>
                <a href="https://leetcode-cn.com/u/missionary" target="_blank">
                  <i class="icon icon-lg icon-gg-circle"></i>
                </a>
              </li>
            
        </ul>
        
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="">
              <a href="/" >
                <i class="icon icon-lg icon-home"></i>
                HOME
              </a>
            </li>
        
            <li class="">
              <a href="/photos" >
                <i class="icon icon-lg icon-camera"></i>
                PHOTOS
              </a>
            </li>
        
            <li class="">
              <a href="/books" >
                <i class="icon icon-lg icon-book"></i>
                BOOKS
              </a>
            </li>
        
            <li class="">
              <a href="/categories" >
                <i class="icon icon-lg icon-th-list"></i>
                CATEGORIES
              </a>
            </li>
        
            <li class="">
              <a href="/tags" >
                <i class="icon icon-lg icon-tags"></i>
                TAGS
              </a>
            </li>
        
            <li class="">
              <a href="/archives" >
                <i class="icon icon-lg icon-archives"></i>
                ARCHIVES
              </a>
            </li>
        
            <li class="">
              <a href="/about" >
                <i class="icon icon-lg icon-user"></i>
                ABOUT
              </a>
            </li>
        
            <li class="">
              <a href="https://github.com/missionOdd" target="_blank">
                <i class="icon icon-lg icon-github"></i>
                GITHUB
              </a>
            </li>
        
            <li class="">
              <a href="https://leetcode-cn.com/u/missionary/" target="_blank">
                <i class="icon icon-lg icon-gg-circle"></i>
                LEETCODE
              </a>
            </li>
        
            <li class="">
              <a href="http://weibo.com/missionodd" target="_blank">
                <i class="icon icon-lg icon-weibo"></i>
                WEIBO
              </a>
            </li>
        
            <li class="">
              <a href="/custom" >
                <i class="icon icon-lg icon-plus-square"></i>
                LINKS
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row clearfix">
        <a href="javascript:;" class="header-icon pull-left waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">
            <span>Ê∂àÊÅØÈòüÂàó| kafka‰∏≠Èó¥‰ª∂ÂéüÁêÜ &amp;&amp; Áü•ËØÜÁÇπ</span>
            
        </div>
        
        <a href="javascript:;" id="site_search_btn" class="header-icon pull-right waves-effect waves-circle waves-light">
            <i class="icon icon-lg icon-search"></i>
        </a>
        
    </div>
</header>
<header class="content-header post-header">
    <img src="/img/banner.jpg" class="header-bg">
    <div class="container fade-scale">
        <h1 class="title animated tada delay-5s">Ê∂àÊÅØÈòüÂàó| kafka‰∏≠Èó¥‰ª∂ÂéüÁêÜ &amp;&amp; Áü•ËØÜÁÇπ</h1>
        <h5 class="subtitle animated swing delay-5s">
            
                <time datetime="2021-12-08T05:50:37.000Z" itemprop="datePublished" class="page-time">
  2021-12-08
</time>


	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/‰∏≠Èó¥‰ª∂/">‰∏≠Èó¥‰ª∂</a><ul class="article-category-list-child"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/‰∏≠Èó¥‰ª∂/ÊäÄÊúØ/">ÊäÄÊúØ</a></li></ul></li></ul>


            
        </h5>
        
    </div>
    

</header>

<div id="site_search">
    <div class="search-title clearfix">
        <span class="pull-left">
          <i class="icon icon-lg icon-search"></i>
        </span>
        <input type="text" id="local-search-input" name="q" results="0" placeholder="search my blog..." class="form-control pull-left"/>
        <a href="javascript:;" class="close pull-right waves-effect waves-circle waves-light">
          <i class="icon icon-lg icon-close"></i>
        </a>
    </div>
    <div id="local-search-result"></div>
</div>



<div class="container body-wrap">
    <article id="post-kafka-notes"
  class="post-article article-type-post" itemprop="blogPost">
    <div class="post-card">
        <h1 class="post-card-title">Ê∂àÊÅØÈòüÂàó| kafka‰∏≠Èó¥‰ª∂ÂéüÁêÜ && Áü•ËØÜÁÇπ</h1>
        <div class="post-meta">
          
            <time class="post-time" title="2021-12-08 13:50:37" datetime="2021-12-08T05:50:37.000Z"  itemprop="datePublished">2021-12-08</time>

            
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/‰∏≠Èó¥‰ª∂/">‰∏≠Èó¥‰ª∂</a><ul class="article-category-list-child"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/‰∏≠Èó¥‰ª∂/ÊäÄÊúØ/">ÊäÄÊúØ</a></li></ul></li></ul>



            

            
<span class="post-comments-counter" id="/2021/12/08/kafka-notes/">
    <span class="post-meta-item-icon">
        <i class="icon icon-comment-o"></i>
    </span>
    
    <a href="/2021/12/08/kafka-notes/#gitment-display-button" onclick="ShowGitment()">
        <span class="post-comments-count gitment-comments-count" itemprop="commentsCount"></span>
    </a>
</span>



    <span class="leancloud-comment">
        <i class="icon icon-comment-o"></i>
        <a href="/2021/12/08/kafka-notes/#comment">
            <span class="valine-comment-count" data-xid="/2021/12/08/kafka-notes/"></span>
        </a>
    </span>


            
        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            
            <h1 id="Ê∂àÊÅØÈòüÂàó"><a href="#Ê∂àÊÅØÈòüÂàó" class="headerlink" title="Ê∂àÊÅØÈòüÂàó"></a>Ê∂àÊÅØÈòüÂàó</h1><p>È¶ñÂÖà‰∫ÜËß£‰∏Ä‰∏ã‰ΩøÁî®ÂàÜÂ∏ÉÂºèÊ∂àÊÅØÈòüÂàóÁöÑ‰ºòÁÇπÔºåÊÄªÁªì‰∏ªË¶ÅÂåÖÊã¨‰ª•‰∏ãÂá†‰∏™ÊñπÈù¢Ôºö</p>
<ul>
<li><p>Ëß£ËÄ¶ tags: None</p>
<p>Âú®È°πÁõÆÂêØÂä®‰πãÂàùÊù•È¢ÑÊµãÂ∞ÜÊù•È°πÁõÆ‰ºöÁ¢∞Âà∞‰ªÄ‰πàÈúÄÊ±ÇÔºåÊòØÊûÅÂÖ∂Âõ∞ÈöæÁöÑ„ÄÇÊ∂àÊÅØÁ≥ªÁªüÂú®Â§ÑÁêÜËøáÁ®ã‰∏≠Èó¥ÊèíÂÖ•‰∫Ü‰∏Ä‰∏™ÈöêÂê´ÁöÑ„ÄÅÂü∫‰∫éÊï∞ÊçÆÁöÑÊé•Âè£Â±ÇÔºå‰∏§ËæπÁöÑÂ§ÑÁêÜËøáÁ®ãÈÉΩË¶ÅÂÆûÁé∞Ëøô‰∏ÄÊé•Âè£„ÄÇËøôÂÖÅËÆ∏‰Ω†Áã¨Á´ãÁöÑÊâ©Â±ïÊàñ‰øÆÊîπ‰∏§ËæπÁöÑÂ§ÑÁêÜËøáÁ®ãÔºåÂè™Ë¶ÅÁ°Æ‰øùÂÆÉ‰ª¨ÈÅµÂÆàÂêåÊ†∑ÁöÑÊé•Âè£Á∫¶Êùü„ÄÇ</p>
</li>
<li><p>ÂÜó‰Ωô</p>
<p>Êúâ‰∫õÊÉÖÂÜµ‰∏ãÔºåÂ§ÑÁêÜÊï∞ÊçÆÁöÑËøáÁ®ã‰ºöÂ§±Ë¥•„ÄÇÈô§ÈùûÊï∞ÊçÆË¢´ÊåÅ‰πÖÂåñÔºåÂê¶ÂàôÂ∞ÜÈÄ†Êàê‰∏¢Â§±„ÄÇÊ∂àÊÅØÈòüÂàóÊääÊï∞ÊçÆËøõË°åÊåÅ‰πÖÂåñÁõ¥Âà∞ÂÆÉ‰ª¨Â∑≤ÁªèË¢´ÂÆåÂÖ®Â§ÑÁêÜÔºåÈÄöËøáËøô‰∏ÄÊñπÂºèËßÑÈÅø‰∫ÜÊï∞ÊçÆ‰∏¢Â§±È£éÈô©„ÄÇËÆ∏Â§öÊ∂àÊÅØÈòüÂàóÊâÄÈááÁî®ÁöÑ‚ÄùÊèíÂÖ•-Ëé∑Âèñ-Âà†Èô§‚ÄùËåÉÂºè‰∏≠ÔºåÂú®Êää‰∏Ä‰∏™Ê∂àÊÅØ‰ªéÈòüÂàó‰∏≠Âà†Èô§‰πãÂâçÔºåÈúÄË¶Å‰Ω†ÁöÑÂ§ÑÁêÜÁ≥ªÁªüÊòéÁ°ÆÁöÑÊåáÂá∫ËØ•Ê∂àÊÅØÂ∑≤ÁªèË¢´Â§ÑÁêÜÂÆåÊØïÔºå‰ªéËÄåÁ°Æ‰øù‰Ω†ÁöÑÊï∞ÊçÆË¢´ÂÆâÂÖ®ÁöÑ‰øùÂ≠òÁõ¥Âà∞‰Ω†‰ΩøÁî®ÂÆåÊØï„ÄÇ</p>
</li>
<li><p>Êâ©Â±ïÊÄß</p>
<p>Âõ†‰∏∫Ê∂àÊÅØÈòüÂàóËß£ËÄ¶‰∫Ü‰Ω†ÁöÑÂ§ÑÁêÜËøáÁ®ãÔºåÊâÄ‰ª•Â¢ûÂ§ßÊ∂àÊÅØÂÖ•ÈòüÂíåÂ§ÑÁêÜÁöÑÈ¢ëÁéáÊòØÂæàÂÆπÊòìÁöÑÔºåÂè™Ë¶ÅÂè¶Â§ñÂ¢ûÂä†Â§ÑÁêÜËøáÁ®ãÂç≥ÂèØ„ÄÇ‰∏çÈúÄË¶ÅÊîπÂèò‰ª£Á†Å„ÄÅ‰∏çÈúÄË¶ÅË∞ÉËäÇÂèÇÊï∞„ÄÇÊâ©Â±ïÂ∞±ÂÉèË∞ÉÂ§ßÁîµÂäõÊåâÈíÆ‰∏ÄÊ†∑ÁÆÄÂçï„ÄÇ</p>
</li>
<li><p>ÁÅµÊ¥ªÊÄß &amp; Â≥∞ÂÄºÂ§ÑÁêÜËÉΩÂäõ</p>
<p>Âú®ËÆøÈóÆÈáèÂâßÂ¢ûÁöÑÊÉÖÂÜµ‰∏ãÔºåÂ∫îÁî®‰ªçÁÑ∂ÈúÄË¶ÅÁªßÁª≠ÂèëÊå•‰ΩúÁî®Ôºå‰ΩÜÊòØËøôÊ†∑ÁöÑÁ™ÅÂèëÊµÅÈáèÂπ∂‰∏çÂ∏∏ËßÅÔºõÂ¶ÇÊûú‰∏∫‰ª•ËÉΩÂ§ÑÁêÜËøôÁ±ªÂ≥∞ÂÄºËÆøÈóÆ‰∏∫Ê†áÂáÜÊù•ÊäïÂÖ•ËµÑÊ∫êÈöèÊó∂ÂæÖÂëΩÊó†ÁñëÊòØÂ∑®Â§ßÁöÑÊµ™Ë¥π„ÄÇ‰ΩøÁî®Ê∂àÊÅØÈòüÂàóËÉΩÂ§ü‰ΩøÂÖ≥ÈîÆÁªÑ‰ª∂È°∂‰ΩèÁ™ÅÂèëÁöÑËÆøÈóÆÂéãÂäõÔºåËÄå‰∏ç‰ºöÂõ†‰∏∫Á™ÅÂèëÁöÑË∂ÖË¥üËç∑ÁöÑËØ∑Ê±ÇËÄåÂÆåÂÖ®Â¥©Ê∫É„ÄÇ</p>
</li>
<li><p>ÂèØÊÅ¢Â§çÊÄß</p>
<p>Á≥ªÁªüÁöÑ‰∏ÄÈÉ®ÂàÜÁªÑ‰ª∂Â§±ÊïàÊó∂Ôºå‰∏ç‰ºöÂΩ±ÂìçÂà∞Êï¥‰∏™Á≥ªÁªü„ÄÇÊ∂àÊÅØÈòüÂàóÈôç‰Ωé‰∫ÜËøõÁ®ãÈó¥ÁöÑËÄ¶ÂêàÂ∫¶ÔºåÊâÄ‰ª•Âç≥‰Ωø‰∏Ä‰∏™Â§ÑÁêÜÊ∂àÊÅØÁöÑËøõÁ®ãÊåÇÊéâÔºåÂä†ÂÖ•ÈòüÂàó‰∏≠ÁöÑÊ∂àÊÅØ‰ªçÁÑ∂ÂèØ‰ª•Âú®Á≥ªÁªüÊÅ¢Â§çÂêéË¢´Â§ÑÁêÜ„ÄÇ</p>
</li>
<li><p>È°∫Â∫è‰øùËØÅ</p>
<p>Âú®Â§ßÂ§ö‰ΩøÁî®Âú∫ÊôØ‰∏ãÔºåÊï∞ÊçÆÂ§ÑÁêÜÁöÑÈ°∫Â∫èÈÉΩÂæàÈáçË¶Å„ÄÇÂ§ßÈÉ®ÂàÜÊ∂àÊÅØÈòüÂàóÊú¨Êù•Â∞±ÊòØÊéíÂ∫èÁöÑÔºåÂπ∂‰∏îËÉΩ‰øùËØÅÊï∞ÊçÆ‰ºöÊåâÁÖßÁâπÂÆöÁöÑÈ°∫Â∫èÊù•Â§ÑÁêÜ„ÄÇÔºªKafka‰øùËØÅ‰∏Ä‰∏™PartitionÂÜÖÁöÑÊ∂àÊÅØÁöÑÊúâÂ∫èÊÄßÔºõnsq‰∏ç‰øùËØÅÊ∂àÊÅØÁöÑÈ°∫Â∫èÊÄßÔºΩ</p>
</li>
<li><p>ÁºìÂÜ≤</p>
<p>Âú®‰ªª‰ΩïÈáçË¶ÅÁöÑÁ≥ªÁªü‰∏≠ÔºåÈÉΩ‰ºöÊúâÈúÄË¶Å‰∏çÂêåÁöÑÂ§ÑÁêÜÊó∂Èó¥ÁöÑÂÖÉÁ¥†„ÄÇ‰æãÂ¶ÇÔºåÂä†ËΩΩ‰∏ÄÂº†ÂõæÁâáÊØîÂ∫îÁî®ËøáÊª§Âô®Ëä±Ë¥πÊõ¥Â∞ëÁöÑÊó∂Èó¥„ÄÇÊ∂àÊÅØÈòüÂàóÈÄöËøá‰∏Ä‰∏™ÁºìÂÜ≤Â±ÇÊù•Â∏ÆÂä©‰ªªÂä°ÊúÄÈ´òÊïàÁéáÁöÑÊâßË°å‚Äî‚Äî‚ÄîÂÜôÂÖ•ÈòüÂàóÁöÑÂ§ÑÁêÜ‰ºöÂ∞ΩÂèØËÉΩÁöÑÂø´ÈÄü„ÄÇËØ•ÁºìÂÜ≤ÊúâÂä©‰∫éÊéßÂà∂Âíå‰ºòÂåñÊï∞ÊçÆÊµÅÁªèËøáÁ≥ªÁªüÁöÑÈÄüÂ∫¶„ÄÇ</p>
</li>
<li><p>ÂºÇÊ≠•ÈÄö‰ø°<br>ÂæàÂ§öÊó∂ÂÄôÔºåÁî®Êà∑‰∏çÊÉ≥‰πü‰∏çÈúÄË¶ÅÁ´ãÂç≥Â§ÑÁêÜÊ∂àÊÅØ„ÄÇÊ∂àÊÅØÈòüÂàóÊèê‰æõ‰∫ÜÂºÇÊ≠•Â§ÑÁêÜÊú∫Âà∂ÔºåÂÖÅËÆ∏Áî®Êà∑Êää‰∏Ä‰∏™Ê∂àÊÅØÊîæÂÖ•ÈòüÂàóÔºå‰ΩÜÂπ∂‰∏çÁ´ãÂç≥Â§ÑÁêÜÂÆÉ„ÄÇÊÉ≥ÂêëÈòüÂàó‰∏≠ÊîæÂÖ•Â§öÂ∞ëÊ∂àÊÅØÂ∞±ÊîæÂ§öÂ∞ëÔºåÁÑ∂ÂêéÂú®ÈúÄË¶ÅÁöÑÊó∂ÂÄôÂÜçÂéªÂ§ÑÁêÜÂÆÉ‰ª¨„ÄÇ</p>
</li>
</ul>
<p>‰∏çÂêåÁöÑMessage QueueÂêÑÂÖ∑ÁâπËâ≤ÔºåÊ≠§Â§Ñ‰ª•nsqÂíåkafkaËøô‰∏§ÁßçÂπ≥Âè∞‰∏∫‰æãÔºåÂÅöÁÆÄË¶Å‰ªãÁªç</p>
<h3 id="NSQ"><a href="#NSQ" class="headerlink" title="NSQ"></a>NSQ</h3><p>NSQÊòØÂü∫‰∫éGoËØ≠Ë®ÄÂºÄÂèëÁöÑÂÆûÊó∂ÁöÑÂàÜÂ∏ÉÂºèÊ∂àÊÅØÂπ≥Âè∞ÔºåÂÖ∑ÊúâÂàÜÂ∏ÉÂºèÂíåÂéª‰∏≠ÂøÉÂåñÊãìÊâëÁªìÊûÑÔºåËØ•ÁªìÊûÑÂÖ∑ÊúâÊó†ÂçïÁÇπÊïÖÈöú„ÄÅÊïÖÈöúÂÆπÈîô„ÄÅÈ´òÂèØÁî®ÊÄß‰ª•ÂèäËÉΩÂ§ü‰øùËØÅÊ∂àÊÅØÁöÑÂèØÈù†‰º†ÈÄíÁöÑÁâπÂæÅ„ÄÇ</p>
<p>Âõõ‰∏™ÈáçË¶ÅÁªÑ‰ª∂Ôºö</p>
<ul>
<li>nsqdÔºö‰∏Ä‰∏™Ë¥üË¥£Êé•Êî∂„ÄÅÊéíÈòü„ÄÅËΩ¨ÂèëÊ∂àÊÅØÂà∞ÂÆ¢Êà∑Á´ØÁöÑÂÆàÊä§ËøõÁ®ã</li>
<li>nsqlookupdÔºöÁÆ°ÁêÜÊãìÊâë‰ø°ÊÅØÂπ∂Êèê‰æõÊúÄÁªà‰∏ÄËá¥ÊÄßÁöÑÂèëÁé∞ÊúçÂä°ÁöÑÂÆàÊä§ËøõÁ®ã</li>
<li>nsqadminÔºö‰∏ÄÂ•óWebÁî®Êà∑ÁïåÈù¢ÔºåÂèØÂÆûÊó∂Êü•ÁúãÈõÜÁæ§ÁöÑÁªüËÆ°Êï∞ÊçÆÂíåÊâßË°åÂêÑÁßçÂêÑÊ†∑ÁöÑÁÆ°ÁêÜ‰ªªÂä°</li>
<li>utilitiesÔºöÂ∏∏ËßÅÂü∫Á°ÄÂäüËÉΩ„ÄÅÊï∞ÊçÆÊµÅÂ§ÑÁêÜÂ∑•ÂÖ∑ÔºåÂ¶Çnsq_stat„ÄÅnsq_tail„ÄÅnsq_to_file„ÄÅnsq_to_http„ÄÅnsq_to_nsq„ÄÅto_nsq</li>
</ul>
<h4 id="ÁâπÊÄßÔºö"><a href="#ÁâπÊÄßÔºö" class="headerlink" title="ÁâπÊÄßÔºö"></a>ÁâπÊÄßÔºö</h4><ul>
<li>ÊîØÊåÅÊó† SPOF ÁöÑÂàÜÂ∏ÉÂºèÊãìÊâë</li>
<li>Ê∞¥Âπ≥Êâ©Â±ï(Ê≤°Êúâ‰∏≠Èó¥‰ª∂ÔºåÊó†ÁºùÂú∞Ê∑ªÂä†Êõ¥Â§öÁöÑËäÇÁÇπÂà∞ÈõÜÁæ§)</li>
<li>‰ΩéÂª∂ËøüÊ∂àÊÅØ‰º†ÈÄí (ÊÄßËÉΩ)</li>
<li>ÁªìÂêàË¥üËΩΩÂùáË°°ÂíåÂ§öÊí≠Ê∂àÊÅØË∑ØÁî±</li>
<li>ÊìÖÈïøÈù¢ÂêëÊµÅ(È´òÂêûÂêêÈáè)Âíå‰ªªÂä°(‰ΩéÂêûÂêêÈáè)Â∑•‰ΩúË¥üËΩΩ</li>
<li>‰∏ªË¶ÅÊòØÂÜÖÂ≠ò‰∏≠(Èô§‰∫ÜÈ´òÊ∞¥‰ΩçÁ∫øÊ∂àÊÅØÈÄèÊòéÂú∞‰øùÂ≠òÂú®Á£ÅÁõò‰∏ä)</li>
<li>ËøêË°åÊó∂‰∏∫Ê∂àË¥πËÄÖÊèê‰æõÂèëÁé∞Áîü‰∫ßËÄÖÁöÑÊúçÂä°(nsqlookupd)</li>
<li>‰º†ËæìÂ±ÇÂÆâÂÖ®ÊÄß (TLS)</li>
<li>Êï∞ÊçÆÊ†ºÂºè‰∏çÂèØÁü•</li>
<li>ËæÉÂ∞ë‰æùËµñ(ÂÆπÊòìÈÉ®ÁΩ≤)ÂíåÂÅ•ÂÖ®ÁöÑ„ÄÅÊúâÁïå„ÄÅÈªòËÆ§ÈÖçÁΩÆ</li>
<li>ÁÆÄÂçï TCP ÂçèËÆÆÔºåÂèØ‰ª•ÊîØÊåÅ‰ªª‰ΩïËØ≠Ë®ÄÁöÑÂÆ¢Êà∑Á´ØÂ∫ì</li>
<li>HTTP Êé•Âè£ÁªüËÆ°„ÄÅÁÆ°ÁêÜË°å‰∏∫ÂíåÁîü‰∫ßËÄÖ(‰∏çÈúÄË¶ÅÂÆ¢Êà∑Á´ØÂ∫ìÂèëÂ∏É)</li>
<li>ÈõÜÊàê‰∫ÜstatsdÊù•ÂÆûÁé∞ÂÆûÊó∂Ê£ÄÊµã</li>
<li>ÂÅ•Â£ÆÁöÑÈõÜÁæ§ÁÆ°ÁêÜÁïåÈù¢ (nsqadmin)</li>
</ul>
<h4 id="ÊãÖ‰øùÔºö"><a href="#ÊãÖ‰øùÔºö" class="headerlink" title="ÊãÖ‰øùÔºö"></a>ÊãÖ‰øùÔºö</h4><ul>
<li>ÊîØÊåÅÊ∂àÊÅØÂÜÖÂ≠òÈòüÂàóÁöÑÂ§ßÂ∞èËÆæÁΩÆÔºåÈªòËÆ§ÂÆåÂÖ®ÊåÅ‰πÖÂåñÔºàÂÄº‰∏∫0ÔºâÔºåÊ∂àÊÅØÂç≥ÂèØÊåÅ‰πÖÂà∞Á£ÅÁõò‰πüÂèØ‰ª•‰øùÂ≠òÂú®ÂÜÖÂ≠ò‰∏≠</li>
<li>‰øùËØÅÊ∂àÊÅØËá≥Â∞ë‰º†ÈÄí‰∏ÄÊ¨°,‰ª•Á°Æ‰øùÊ∂àÊÅØÂèØ‰ª•ÊúÄÁªàÊàêÂäüÂèëÈÄÅ</li>
<li>Êî∂Âà∞ÁöÑÊ∂àÊÅØÊòØÊó†Â∫èÁöÑ, ÂÆûÁé∞‰∫ÜÊùæÊï£ËÆ¢Ë¥≠</li>
<li>ÂèëÁé∞ÊúçÂä°nsqlookupdÂÖ∑ÊúâÊúÄÁªà‰∏ÄËá¥ÊÄß,Ê∂àÊÅØÊúÄÁªàËÉΩÂ§üÊâæÂà∞ÊâÄÊúâTopicÁîü‰∫ßËÄÖ</li>
</ul>
<h4 id="ÁªìÊûÑÔºö"><a href="#ÁªìÊûÑÔºö" class="headerlink" title="ÁªìÊûÑÔºö"></a>ÁªìÊûÑÔºö</h4><p>NSQ‰∏≠ÁöÑÊï∞ÊçÆÊµÅÊ®°ÂûãÊòØÁî±streamÂíåconsumerÁªÑÊàê„ÄÇTopicÊòØ‰∏ÄÁßçÁã¨ÁâπÁöÑstreamÔºåChannelÊòØ‰∏Ä‰∏™ËÆ¢ÈòÖ‰∫ÜÁªôÂÆöTopicÁöÑconsumerÈÄªËæëÂàÜÁªÑ„ÄÇNSQÁöÑÊï∞ÊçÆÊµÅÊ®°ÂûãÁªìÊûÑÂ¶Ç‰∏ãÂõæÊâÄÁ§∫Ôºö</p>
<figure class="image-box">
                <a rel=Ê∂àÊÅØÈòüÂàó| kafka‰∏≠Èó¥‰ª∂ÂéüÁêÜ && Áü•ËØÜÁÇπ href="uigd95fik9.gif" title="uigd95fik9" data-fancybox="images"><img src="uigd95fik9.gif" alt="uigd95fik9" title class></a>
                <p>uigd95fik9</p>
            </figure>
<p>‰ªé‰∏äÂõæÂèØ‰ª•ÁúãÂá∫ÔºåÂçï‰∏™nsqdÂèØ‰ª•ÊúâÂ§ö‰∏™TopicÔºåÊØè‰∏™TopicÂèàÂèØ‰ª•ÊúâÂ§ö‰∏™Channel„ÄÇ</p>
<p>ChannelËÉΩÂ§üÊé•Êî∂TopicÊâÄÊúâÊ∂àÊÅØÁöÑÂâØÊú¨Ôºå‰ªéËÄåÂÆûÁé∞‰∫ÜÊ∂àÊÅØÂ§öÊí≠ÂàÜÂèëÔºõ</p>
<p>ËÄåChannel‰∏äÁöÑÊØè‰∏™Ê∂àÊÅØË¢´ÂàÜÂèëÁªôÂÆÉÁöÑËÆ¢ÈòÖËÄÖÔºå‰ªéËÄåÂÆûÁé∞Ë¥üËΩΩÂùáË°°ÔºåÊâÄÊúâËøô‰∫õÂ∞±ÁªÑÊàê‰∫Ü‰∏Ä‰∏™ÂèØ‰ª•Ë°®Á§∫ÂêÑÁßçÁÆÄÂçïÂíåÂ§çÊùÇÊãìÊâëÁªìÊûÑÁöÑÂº∫Â§ßÊ°ÜÊû∂„ÄÇ</p>
<h3 id="kafka"><a href="#kafka" class="headerlink" title="kafka"></a>kafka</h3><h4 id="ÁâπÊÄßÔºö-1"><a href="#ÁâπÊÄßÔºö-1" class="headerlink" title="ÁâπÊÄßÔºö"></a>ÁâπÊÄßÔºö</h4><ul>
<li>‰ª•Êó∂Èó¥Â§çÊùÇÂ∫¶‰∏∫O(1)ÁöÑÊñπÂºèÊèê‰æõÊ∂àÊÅØÊåÅ‰πÖÂåñËÉΩÂäõÔºåÂç≥‰ΩøÂØπTBÁ∫ß‰ª•‰∏äÊï∞ÊçÆ‰πüËÉΩ‰øùËØÅÂ∏∏Êï∞Êó∂Èó¥Â§çÊùÇÂ∫¶ÁöÑËÆøÈóÆÊÄßËÉΩ„ÄÇ</li>
<li>È´òÂêûÂêêÁéá„ÄÇÂç≥‰ΩøÂú®ÈùûÂ∏∏Âªâ‰ª∑ÁöÑÂïÜÁî®Êú∫Âô®‰∏ä‰πüËÉΩÂÅöÂà∞ÂçïÊú∫ÊîØÊåÅÊØèÁßí100KÊù°‰ª•‰∏äÊ∂àÊÅØÁöÑ‰º†Ëæì„ÄÇ</li>
<li>ÊîØÊåÅKafka ServerÈó¥ÁöÑÊ∂àÊÅØÂàÜÂå∫ÔºåÂèäÂàÜÂ∏ÉÂºèÊ∂àË¥πÔºåÂêåÊó∂‰øùËØÅÊØè‰∏™PartitionÂÜÖÁöÑÊ∂àÊÅØÈ°∫Â∫è‰º†Ëæì„ÄÇ</li>
<li>ÂêåÊó∂ÊîØÊåÅÁ¶ªÁ∫øÊï∞ÊçÆÂ§ÑÁêÜÂíåÂÆûÊó∂Êï∞ÊçÆÂ§ÑÁêÜ„ÄÇ</li>
<li>Scale outÔºöÊîØÊåÅÂú®Á∫øÊ∞¥Âπ≥Êâ©Â±ï„ÄÇ</li>
</ul>
<h4 id="KafkaÊû∂ÊûÑ"><a href="#KafkaÊû∂ÊûÑ" class="headerlink" title="KafkaÊû∂ÊûÑ"></a>KafkaÊû∂ÊûÑ</h4><ul>
<li>BrokerÔºöKafkaÈõÜÁæ§ÂåÖÂê´‰∏Ä‰∏™ÊàñÂ§ö‰∏™ÊúçÂä°Âô®ÔºåËøôÁßçÊúçÂä°Âô®Ë¢´Áß∞‰∏∫broker</li>
<li>TopicÔºöÊØèÊù°ÂèëÂ∏ÉÂà∞KafkaÈõÜÁæ§ÁöÑÊ∂àÊÅØÈÉΩÊúâ‰∏Ä‰∏™Á±ªÂà´ÔºåËøô‰∏™Á±ªÂà´Ë¢´Áß∞‰∏∫Topic„ÄÇÔºàÁâ©ÁêÜ‰∏ä‰∏çÂêåTopicÁöÑÊ∂àÊÅØÂàÜÂºÄÂ≠òÂÇ®ÔºåÈÄªËæë‰∏ä‰∏Ä‰∏™TopicÁöÑÊ∂àÊÅØËôΩÁÑ∂‰øùÂ≠ò‰∫é‰∏Ä‰∏™ÊàñÂ§ö‰∏™broker‰∏ä‰ΩÜÁî®Êà∑Âè™ÈúÄÊåáÂÆöÊ∂àÊÅØÁöÑTopicÂç≥ÂèØÁîü‰∫ßÊàñÊ∂àË¥πÊï∞ÊçÆËÄå‰∏çÂøÖÂÖ≥ÂøÉÊï∞ÊçÆÂ≠ò‰∫é‰ΩïÂ§ÑÔºâ</li>
<li>PartitionÔºöParitionÊòØÁâ©ÁêÜ‰∏äÁöÑÊ¶ÇÂøµÔºåÊØè‰∏™TopicÂåÖÂê´‰∏Ä‰∏™ÊàñÂ§ö‰∏™Partition.</li>
<li>ProducerÔºöË¥üË¥£ÂèëÂ∏ÉÊ∂àÊÅØÂà∞Kafka broker</li>
<li>ConsumerÔºöÊ∂àÊÅØÊ∂àË¥πËÄÖÔºåÂêëKafka brokerËØªÂèñÊ∂àÊÅØÁöÑÂÆ¢Êà∑Á´Ø„ÄÇ</li>
<li>Consumer GroupÔºöÊØè‰∏™ConsumerÂ±û‰∫é‰∏Ä‰∏™ÁâπÂÆöÁöÑConsumer GroupÔºàÂèØ‰∏∫ÊØè‰∏™ConsumerÊåáÂÆögroup nameÔºåËã•‰∏çÊåáÂÆögroup nameÂàôÂ±û‰∫éÈªòËÆ§ÁöÑgroupÔºâ„ÄÇ</li>
</ul>
<h4 id="KafkaÊãìÊâëÁªìÊûÑ"><a href="#KafkaÊãìÊâëÁªìÊûÑ" class="headerlink" title="KafkaÊãìÊâëÁªìÊûÑ"></a>KafkaÊãìÊâëÁªìÊûÑ</h4><figure class="image-box">
                <a rel=Ê∂àÊÅØÈòüÂàó| kafka‰∏≠Èó¥‰ª∂ÂéüÁêÜ && Áü•ËØÜÁÇπ href="1025005-20160924125839231-370630847.png" title="kafkaÊû∂ÊûÑÂõæ" data-fancybox="images"><img src="1025005-20160924125839231-370630847.png" alt="kafkaÊû∂ÊûÑÂõæ" title class></a>
                <p>kafkaÊû∂ÊûÑÂõæ</p>
            </figure>
<p>Â¶Ç‰∏äÂõæÊâÄÁ§∫Ôºå‰∏Ä‰∏™ÂÖ∏ÂûãÁöÑKafkaÈõÜÁæ§‰∏≠ÂåÖÂê´Ëã•Âπ≤ProducerÔºàÂèØ‰ª•ÊòØwebÂâçÁ´Ø‰∫ßÁîüÁöÑPage ViewÔºåÊàñËÄÖÊòØÊúçÂä°Âô®Êó•ÂøóÔºåÁ≥ªÁªüCPU„ÄÅMemoryÁ≠âÔºâÔºåËã•Âπ≤brokerÔºàKafkaÊîØÊåÅÊ∞¥Âπ≥Êâ©Â±ïÔºå‰∏ÄËà¨brokerÊï∞ÈáèË∂äÂ§öÔºåÈõÜÁæ§ÂêûÂêêÁéáË∂äÈ´òÔºâÔºåËã•Âπ≤Consumer GroupÔºå‰ª•Âèä‰∏Ä‰∏™ZookeeperÈõÜÁæ§„ÄÇKafkaÈÄöËøáZookeeperÁÆ°ÁêÜÈõÜÁæ§ÈÖçÁΩÆÔºåÈÄâ‰∏æleaderÔºå‰ª•ÂèäÂú®Consumer GroupÂèëÁîüÂèòÂåñÊó∂ËøõË°årebalance„ÄÇProducer‰ΩøÁî®pushÊ®°ÂºèÂ∞ÜÊ∂àÊÅØÂèëÂ∏ÉÂà∞brokerÔºåConsumer‰ΩøÁî®pullÊ®°Âºè‰ªébrokerËÆ¢ÈòÖÂπ∂Ê∂àË¥πÊ∂àÊÅØ„ÄÇ</p>
<h4 id="Topic-amp-Partition"><a href="#Topic-amp-Partition" class="headerlink" title="Topic &amp; Partition"></a>Topic &amp; Partition</h4><p>TopicÂú®ÈÄªËæë‰∏äÂèØ‰ª•Ë¢´ËÆ§‰∏∫ÊòØ‰∏Ä‰∏™queueÔºåÊØèÊù°Ê∂àË¥πÈÉΩÂøÖÈ°ªÊåáÂÆöÂÆÉÁöÑTopicÔºåÂèØ‰ª•ÁÆÄÂçïÁêÜËß£‰∏∫ÂøÖÈ°ªÊåáÊòéÊääËøôÊù°Ê∂àÊÅØÊîæËøõÂì™‰∏™queueÈáå„ÄÇ‰∏∫‰∫Ü‰ΩøÂæóKafkaÁöÑÂêûÂêêÁéáÂèØ‰ª•Á∫øÊÄßÊèêÈ´òÔºåÁâ©ÁêÜ‰∏äÊääTopicÂàÜÊàê‰∏Ä‰∏™ÊàñÂ§ö‰∏™PartitionÔºåÊØè‰∏™PartitionÂú®Áâ©ÁêÜ‰∏äÂØπÂ∫î‰∏Ä‰∏™Êñá‰ª∂Â§πÔºåËØ•Êñá‰ª∂Â§π‰∏ãÂ≠òÂÇ®Ëøô‰∏™PartitionÁöÑÊâÄÊúâÊ∂àÊÅØÂíåÁ¥¢ÂºïÊñá‰ª∂„ÄÇ</p>
<h4 id="ProducerÊ∂àÊÅØË∑ØÁî±"><a href="#ProducerÊ∂àÊÅØË∑ØÁî±" class="headerlink" title="ProducerÊ∂àÊÅØË∑ØÁî±"></a>ProducerÊ∂àÊÅØË∑ØÁî±</h4><p>ProducerÂèëÈÄÅÊ∂àÊÅØÂà∞brokerÊó∂Ôºå‰ºöÊ†πÊçÆParititionÊú∫Âà∂ÈÄâÊã©Â∞ÜÂÖ∂Â≠òÂÇ®Âà∞Âì™‰∏Ä‰∏™Partition„ÄÇÂ¶ÇÊûúPartitionÊú∫Âà∂ËÆæÁΩÆÂêàÁêÜÔºåÊâÄÊúâÊ∂àÊÅØÂèØ‰ª•ÂùáÂåÄÂàÜÂ∏ÉÂà∞‰∏çÂêåÁöÑPartitionÈáåÔºåËøôÊ†∑Â∞±ÂÆûÁé∞‰∫ÜË¥üËΩΩÂùáË°°„ÄÇ</p>
<p>Âú®ÂèëÈÄÅ‰∏ÄÊù°Ê∂àÊÅØÊó∂ÔºåÂèØ‰ª•ÊåáÂÆöËøôÊù°Ê∂àÊÅØÁöÑkeyÔºåProducerÊ†πÊçÆËøô‰∏™keyÂíåPartitionÊú∫Âà∂Êù•Âà§Êñ≠Â∫îËØ•Â∞ÜËøôÊù°Ê∂àÊÅØÂèëÈÄÅÂà∞Âì™‰∏™Parition„ÄÇ</p>
<h4 id="Consumer-Group"><a href="#Consumer-Group" class="headerlink" title="Consumer Group"></a>Consumer Group</h4><p>ÔºàÊú¨ËäÇÊâÄÊúâÊèèËø∞ÈÉΩÊòØÂü∫‰∫éConsumer hight level APIËÄåÈùûlow level APIÔºâ„ÄÇ</p>
<p>‰ΩøÁî®Consumer high level APIÊó∂ÔºåÂêå‰∏ÄTopicÁöÑ‰∏ÄÊù°Ê∂àÊÅØÂè™ËÉΩË¢´Âêå‰∏Ä‰∏™Consumer GroupÂÜÖÁöÑ‰∏Ä‰∏™ConsumerÊ∂àË¥πÔºå‰ΩÜÂ§ö‰∏™Consumer GroupÂèØÂêåÊó∂Ê∂àË¥πËøô‰∏ÄÊ∂àÊÅØ„ÄÇ</p>
<figure class="image-box">
                <a rel=Ê∂àÊÅØÈòüÂàó| kafka‰∏≠Èó¥‰ª∂ÂéüÁêÜ && Áü•ËØÜÁÇπ href="70.png" title="img" data-fancybox="images"><img src="70.png" alt="img" title class></a>
                <p>img</p>
            </figure>
<p>ËøôÊòØKafkaÁî®Êù•ÂÆûÁé∞‰∏Ä‰∏™TopicÊ∂àÊÅØÁöÑÂπøÊí≠ÔºàÂèëÁªôÊâÄÊúâÁöÑConsumerÔºâÂíåÂçïÊí≠ÔºàÂèëÁªôÊüê‰∏Ä‰∏™ConsumerÔºâÁöÑÊâãÊÆµ„ÄÇ‰∏Ä‰∏™TopicÂèØ‰ª•ÂØπÂ∫îÂ§ö‰∏™Consumer Group„ÄÇÂ¶ÇÊûúÈúÄË¶ÅÂÆûÁé∞ÂπøÊí≠ÔºåÂè™Ë¶ÅÊØè‰∏™ConsumerÊúâ‰∏Ä‰∏™Áã¨Á´ãÁöÑGroupÂ∞±ÂèØ‰ª•‰∫Ü„ÄÇË¶ÅÂÆûÁé∞ÂçïÊí≠Âè™Ë¶ÅÊâÄÊúâÁöÑConsumerÂú®Âêå‰∏Ä‰∏™GroupÈáå„ÄÇÁî®Consumer GroupËøòÂèØ‰ª•Â∞ÜConsumerËøõË°åËá™Áî±ÁöÑÂàÜÁªÑËÄå‰∏çÈúÄË¶ÅÂ§öÊ¨°ÂèëÈÄÅÊ∂àÊÅØÂà∞‰∏çÂêåÁöÑTopic„ÄÇ</p>
<h3 id="NSQ-vs-Kafka"><a href="#NSQ-vs-Kafka" class="headerlink" title="NSQ vs Kafka"></a>NSQ vs Kafka</h3><table>
<thead>
<tr>
<th></th>
<th>NSQ</th>
<th>Kafka</th>
</tr>
</thead>
<tbody>
<tr>
<td>ËØ≠Ë®Ä</td>
<td>Go</td>
<td>Scala</td>
</tr>
<tr>
<td>Ê∂àÊÅØÂ≠òÂÇ®</td>
<td>ÂÜÖÂ≠ò&amp;&amp;Á£ÅÁõò</td>
<td>Á£ÅÁõòÔºåÊñá‰ª∂ÊñπÂºè</td>
</tr>
<tr>
<td>È°∫Â∫è‰øùËØÅ</td>
<td>Êó†Â∫èÔºåÊùæÊï£ËÆ¢ÈòÖ</td>
<td>‰øùËØÅÊúâÂ∫è</td>
</tr>
</tbody>
</table>
<p>Ëá≥‰∫éÂú®ÂÆûÈôÖÂ∫îÁî®‰∏≠Ôºå‰∏§ÁßçÊ∂àÊÅØÈòüÂàóÂ¶Ç‰ΩïÈÄâÊã©ÔºåË¶ÅÊ†πÊçÆ‰∏öÂä°ÈúÄÊ±ÇÂíåÊ∂àÊÅØÈòüÂàóÁöÑÁâπÊÄßÂÅöÂá∫ÂêàÁêÜÈÄâÊã©„ÄÇ‰ª•‚ÄúÈóÆÁ≠î‚ÄùÊúçÂä°Á´Ø‰∏∫‰æãÔºåÁõÆÂâçNSQÂíåKafka‰∏§ÁßçÊ∂àÊÅØÈòüÂàóÈÉΩÂú®‰ΩøÁî®‰∏≠Ôºö</p>
<p>ÊØîÂ¶ÇÂØπÁî®Êà∑Ë°å‰∏∫ËøõË°åÁªüËÆ°ÁöÑÁõ∏ÂÖ≥Ê∂àÊÅØÔºåÊàë‰ª¨ÈááÁî®nsqÔºå‰∏ªË¶ÅÊòØÂõ†‰∏∫nsqÊ∂àÊÅØ‰∏ªË¶Å‰øùÂ≠òÂú®ÂÜÖÂ≠òÔºåÂÆÉÂú®Â§ÑÁêÜÊ∂àÊÅØ‰∏äÊõ¥Âø´ÔºõÂπ∂‰∏îÁªüËÆ°Áî®Êà∑Ë°å‰∏∫ÁöÑÊ∂àÊÅØÔºåÂè™ÈúÄË¶ÅÂØπÊ∂àÊÅØ‰∫ã‰ª∂ËÆ∞ÂΩïÂç≥ÂèØÔºåÂπ∂‰∏çË¶ÅÊ±Ç‰∏•Ê†ºÁöÑÈ°∫Â∫è„ÄÇ</p>
<p>ËÄåÂØπ‰∫éÊèê‰∫§Á±ªÁöÑ‰∫ã‰ª∂ÔºåÂ∞±ÈúÄË¶Å‰øùËØÅ‰∏•Ê†ºÁöÑÈ°∫Â∫èÊÄß„ÄÇÊØîÂ¶ÇÁî®Êà∑Êèê‰∫§‰∏Ä‰∏™Á≠îÊ°àÔºåÈöèÂêéÂèàÁ´ãÂàªÂà†Èô§ÔºõÁî±‰∫éÂêéÂè∞ÂíådataÁõ∏ÂÖ≥‰∏öÂä°ÊñπÊòØÊ†πÊçÆÂèëÈÄÅÁöÑÊ∂àÊÅØ‰ΩúÁõ∏ÂÖ≥Â§ÑÁêÜÔºåÂ¶ÇÊûúÂà†Èô§Á≠îÊ°àÁöÑÊ∂àÊÅØÂÖàÂèëÈÄÅÔºåÂêéÂè∞ÂíådataÁõ∏ÂÖ≥‰∏öÂä°ÊñπÂ∞Ü‰ºöÂá∫Áé∞ÈîôËØØÔºõÂØπ‰∫éÊ≠§Á±ªÈúÄË¶Å‰∏•Ê†º‰øùËØÅÊ∂àÊÅØÈ°∫Â∫èÁöÑ‰∫ã‰ª∂ÔºåÊàë‰ª¨Â∞±ÈááÁî®kafka„ÄÇ</p>
<hr>
<h1 id="Âü∫Á°ÄÊû∂ÊûÑ"><a href="#Âü∫Á°ÄÊû∂ÊûÑ" class="headerlink" title="Âü∫Á°ÄÊû∂ÊûÑ"></a>Âü∫Á°ÄÊû∂ÊûÑ</h1><h2 id="KafkaServer"><a href="#KafkaServer" class="headerlink" title="KafkaServer"></a>KafkaServer</h2><p>‰ΩøÁî®Ê∂àÊÅØÈòüÂàóÁöÑ‰∏ªË¶ÅÂ•ΩÂ§ÑÊúâÔºö</p>
<ul>
<li>Ëß£ËÄ¶</li>
<li>Â≥∞ÂÄºÂ§ÑÁêÜËÉΩÂäõ„ÄÅÂºÇÊ≠•</li>
<li>ÊåÅ‰πÖÂåñ</li>
<li>È°∫Â∫è‰øùËØÅ</li>
<li>Êâ©Â±ïÊÄß</li>
</ul>
<h2 id="1-Êû∂ÊûÑ"><a href="#1-Êû∂ÊûÑ" class="headerlink" title="1. Êû∂ÊûÑ"></a>1. Êû∂ÊûÑ</h2><h3 id="1-1-Ê¶ÇÂøµ"><a href="#1-1-Ê¶ÇÂøµ" class="headerlink" title="1.1 Ê¶ÇÂøµ"></a>1.1 Ê¶ÇÂøµ</h3><p><strong>BrokerÔºö</strong></p>
<p>KafkaÈõÜÁæ§‰∏≠ÁöÑ‰∏ÄÂè∞ÊúçÂä°Âô®„ÄÇ</p>
<p><strong>TopicÔºö</strong></p>
<p>‰∏ªÈ¢ò„ÄÇÊ∂àÊÅØÁöÑÂàÜÁ±ªÔºåÊòØÈÄªËæë‰∏äÁöÑÊ¶ÇÂøµÔºåÂÆûÈôÖ‰ª•partitionÁöÑÂΩ¢ÂºèÂ≠òÊîæÂú®ÂêÑBrokerÊúçÂä°Âô®‰∏ä„ÄÇ</p>
<p><strong>PartitionÔºö</strong></p>
<ul>
<li>ÂàÜÂå∫„ÄÇÊòØÁâ©ÁêÜ‰∏äÁöÑÊ¶ÇÂøµÔºåÁªÑÊàêTopicÁöÑÂçï‰Ωç„ÄÇ</li>
</ul>
<p><strong>ReplicaÔºö</strong></p>
<p>ÂâØÊú¨„ÄÇÊòØÂÖ∑‰ΩìÁöÑÂàÜÂå∫ÔºåÊØîPartitionÊõ¥ÂÖ∑‰ΩìÁöÑÁâ©ÁêÜÊ¶ÇÂøµÔºå‰∏Ä‰∏™ÁúüÂÆûÁöÑÁõÆÂΩïÔºåÂ≠òÊîæÂú®‰∏ÄÂè∞BrokerÊúçÂä°Âô®‰∏ä„ÄÇÂú®‰ª£Á†Å‰∏≠ÂèàÂàÜ‰∏∫leaderÂíåfollower„ÄÇ</p>
<p><strong>ProducerÔºö</strong></p>
<ul>
<li>Áîü‰∫ßËÄÖ„ÄÇË¥üË¥£ÂèëÈÄÅÊ∂àÊÅØÂà∞Broker„ÄÇ</li>
</ul>
<p><strong>ConsumerÔºö</strong></p>
<ul>
<li>Ê∂àË¥πËÄÖ„ÄÇË¥üË¥£ËÆ¢ÈòÖTopicÂπ∂ÊãâÂèñÊ∂àÊÅØ„ÄÇ</li>
</ul>
<p><strong>CousumerGroupÔºö</strong></p>
<p>Ê∂àË¥πËÄÖÁªÑ„ÄÇÊØèÊù°Ê∂àÊÅØÂè™Ë¢´ÁªÑÂÜÖÊàêÂëòÊ∂àË¥π‰∏ÄÊ¨°„ÄÇ</p>
<h3 id="1-2-ÈÄªËæëÊû∂ÊûÑ"><a href="#1-2-ÈÄªËæëÊû∂ÊûÑ" class="headerlink" title="1.2 ÈÄªËæëÊû∂ÊûÑ"></a>1.2 ÈÄªËæëÊû∂ÊûÑ</h3><figure class="image-box">
                <a rel=Ê∂àÊÅØÈòüÂàó| kafka‰∏≠Èó¥‰ª∂ÂéüÁêÜ && Áü•ËØÜÁÇπ href="60af40353a110cbc9948067b4502a75d.png" title="image" data-fancybox="images"><img src="60af40353a110cbc9948067b4502a75d.png" alt="image" title class></a>
                <p>image</p>
            </figure>
<h3 id="1-3-Áâ©ÁêÜÊû∂ÊûÑ"><a href="#1-3-Áâ©ÁêÜÊû∂ÊûÑ" class="headerlink" title="1.3 Áâ©ÁêÜÊû∂ÊûÑ"></a>1.3 Áâ©ÁêÜÊû∂ÊûÑ</h3><h4 id="1-3-1-ÈõÜÁæ§Áâ©ÁêÜÊû∂ÊûÑ"><a href="#1-3-1-ÈõÜÁæ§Áâ©ÁêÜÊû∂ÊûÑ" class="headerlink" title="1.3.1 ÈõÜÁæ§Áâ©ÁêÜÊû∂ÊûÑ"></a>1.3.1 ÈõÜÁæ§Áâ©ÁêÜÊû∂ÊûÑ</h4><ul>
<li>*<figure class="image-box">
                <a rel=Ê∂àÊÅØÈòüÂàó| kafka‰∏≠Èó¥‰ª∂ÂéüÁêÜ && Áü•ËØÜÁÇπ href="0993d208eeb5dfe12a9e6f132e9d0eef.png" title="image" data-fancybox="images"><img src="0993d208eeb5dfe12a9e6f132e9d0eef.png" alt="image" title class></a>
                <p>image</p>
            </figure></li>
</ul>
<p>Â¶Ç‰∏äÂõæÔºåÊú¨ÈõÜÁæ§ÊúâÔºö</p>
<ul>
<li>4Âè∞broker„ÄÇbroker_1 Âà∞ broker_4</li>
<li>2‰∏™topic„ÄÇtopic_AÂíåtopic_B</li>
<li>topic_AÁöÑÂàÜÂå∫Êï∞ÊòØ4„ÄÇtopicA_0 Âà∞ topic_3</li>
<li>topic_AÁöÑÂâØÊú¨Âõ†Â≠êÊòØ2„ÄÇ‰æãÂ¶ÇtopicA_0Ëøô‰∏™ÂàÜÂå∫ÔºåÊúâ‰∏§‰∏™ÂâØÊú¨ÔºåÂàÜÂà´ÂàÜÂ∏ÉÂú®broker_1Âíåbroker_3‰∏§Âè∞Êú∫Âô®‰∏ä„ÄÇ</li>
</ul>
<h4 id="1-3-2-‰∏Ä‰∏™ÂâØÊú¨ÁõÆÂΩïÁªìÊûÑ"><a href="#1-3-2-‰∏Ä‰∏™ÂâØÊú¨ÁõÆÂΩïÁªìÊûÑ" class="headerlink" title="1.3.2 ‰∏Ä‰∏™ÂâØÊú¨ÁõÆÂΩïÁªìÊûÑ"></a>1.3.2 ‰∏Ä‰∏™ÂâØÊú¨ÁõÆÂΩïÁªìÊûÑ</h4><p>‰∏äÂõæ‰∏≠ÁöÑtopicA-0ÊòØ‰∏Ä‰∏™partitionÔºåÂáÜÁ°ÆÁöÑËØ¥Â∫îËØ•Áß∞‰πã‰∏∫‰∏Ä‰∏™ÂâØÊú¨ÔºåÂç≥Replica„ÄÇÂÆÉÊòØbroker_1ÊúçÂä°Âô®‰∏äÁöÑ‰∏Ä‰∏™Êó•ÂøóÁõÆÂΩïÔºåÂÖ∂ÂÜÖÈÉ®Áî±Â§ö‰∏™segmentÊñá‰ª∂ÁªÑÊàê„ÄÇtopicA-0ÁõÆÂΩïÁªìÊûÑÔºö</p>
<ul>
<li>*<figure class="image-box">
                <a rel=Ê∂àÊÅØÈòüÂàó| kafka‰∏≠Èó¥‰ª∂ÂéüÁêÜ && Áü•ËØÜÁÇπ href="15917459e5a10f3a6839bc535f0afbc6.png" title="image" data-fancybox="images"><img src="15917459e5a10f3a6839bc535f0afbc6.png" alt="image" title class></a>
                <p>image</p>
            </figure></li>
</ul>
<p><strong>*.logÊñá‰ª∂</strong>ÔºöÊó•ÂøóÊñá‰ª∂</p>
<p><strong>*.indexÊñá‰ª∂</strong>ÔºöÁ®ÄÁñèÁ¥¢ÂºïÊñá‰ª∂</p>
<p><strong>*.timeindexÊñá‰ª∂</strong>ÔºöÊó∂Èó¥Êà≥Á¥¢ÂºïÊñá‰ª∂„ÄÇÊ†πÊçÆÊó∂Èó¥Êà≥Âø´ÈÄüÂÆö‰ΩçÊ∂àÊÅØÊâÄÂú®‰ΩçÁΩÆ„ÄÇÔºàKafka API offsetsForTimesÊñπÊ≥ïÊâÄ‰ΩøÁî®Ôºâ</p>
<p>indexÊñá‰ª∂‰∏élogÊñá‰ª∂ÂÖ≥Á≥ª:</p>
<ul>
<li>*<figure class="image-box">
                <a rel=Ê∂àÊÅØÈòüÂàó| kafka‰∏≠Èó¥‰ª∂ÂéüÁêÜ && Áü•ËØÜÁÇπ href="42a9581fb80035875abcaff0e6902542.png" title="image" data-fancybox="images"><img src="42a9581fb80035875abcaff0e6902542.png" alt="image" title class></a>
                <p>image</p>
            </figure></li>
</ul>
<h3 id="1-4-‰ª£Á†ÅÊû∂ÊûÑ"><a href="#1-4-‰ª£Á†ÅÊû∂ÊûÑ" class="headerlink" title="1.4 ‰ª£Á†ÅÊû∂ÊûÑ"></a>1.4 ‰ª£Á†ÅÊû∂ÊûÑ</h3><h4 id="1-4-1-Á∫øÁ®ãÊ±†"><a href="#1-4-1-Á∫øÁ®ãÊ±†" class="headerlink" title="1.4.1 Á∫øÁ®ãÊ±†"></a>1.4.1 Á∫øÁ®ãÊ±†</h4><p>KafkaServerÂú®ÂêØÂä®Êó∂ÔºåÂàùÂßãÂåñKafkaRequestHandlerPoolÁ∫øÁ®ãÊ±†</p>
<p>KafkaRequestHandlerPoolÔºàÁ∫øÁ®ãÊ±†ÔºâÁî±KafkaRequestHandlerÁªÑÊàê</p>
<p>KafkaRequestHandlerË∞ÉÁî®KafkaApisÂ§ÑÁêÜrequest</p>
<p>‰∏ãÂõæÔºöKafkaÂ§ÑÁêÜrequestÁöÑÁ∫øÁ®ãÊ±†</p>
<ul>
<li>*<figure class="image-box">
                <a rel=Ê∂àÊÅØÈòüÂàó| kafka‰∏≠Èó¥‰ª∂ÂéüÁêÜ && Áü•ËØÜÁÇπ href="83fbd9155e52d987bb704a028f719772.png" title="image" data-fancybox="images"><img src="83fbd9155e52d987bb704a028f719772.png" alt="image" title class></a>
                <p>image</p>
            </figure></li>
</ul>
<p>kafkaServerÊé•Êî∂ÁöÑËØ∑Ê±ÇÔºåÂåÖÊã¨Êù•Ëá™ÂÆ¢Êà∑Á´ØÁöÑËØ∑Ê±ÇÂíåÊù•Ëá™ÂÖ∂‰ªñserverÁöÑËØ∑Ê±Ç„ÄÇÂÆ¢Êà∑Á´ØËØ∑Ê±Ç‰æãÂ¶ÇproducerÂèëÈÄÅÊ∂àÊÅØËØ∑Ê±Ç„ÄÅconsumerÊ∂àË¥πÊ∂àÊÅØËØ∑Ê±Ç„ÄÇÂÖ∂‰ªñbrokerËØ∑Ê±Ç‰æãÂ¶ÇÂâØÊú¨ÂêåÊ≠•Êó•ÂøóËØ∑Ê±Ç„ÄÇËØ∑Ê±ÇÁ±ªÂûãÊúâ21‰∏™Êûö‰∏æÂÄº„ÄÇ</p>
<p>ÊâÄÊúâÁöÑËØ∑Ê±ÇÊúÄÁªà‰ºöÊî∂ÊïõÂà∞BrokerÊúçÂä°Âô®‰∏äÁöÑKafkaApis.handleÊñπÊ≥ïÔºåÂ¶Ç‰∏ãÂõæÔºö</p>
<ul>
<li>*<figure class="image-box">
                <a rel=Ê∂àÊÅØÈòüÂàó| kafka‰∏≠Èó¥‰ª∂ÂéüÁêÜ && Áü•ËØÜÁÇπ href="9fb206ff88bb93e7d92cf7dced0e540b.png" title="image" data-fancybox="images"><img src="9fb206ff88bb93e7d92cf7dced0e540b.png" alt="image" title class></a>
                <p>image</p>
            </figure></li>
</ul>
<h4 id="1-4-2-Â§ÑÁêÜrequestÁöÑÁªÑ‰ª∂"><a href="#1-4-2-Â§ÑÁêÜrequestÁöÑÁªÑ‰ª∂" class="headerlink" title="1.4.2 Â§ÑÁêÜrequestÁöÑÁªÑ‰ª∂"></a>1.4.2 Â§ÑÁêÜrequestÁöÑÁªÑ‰ª∂</h4><p>Êúâ3‰∏™ÈáçË¶ÅÁªÑ‰ª∂Â§ÑÁêÜ‰∏äÂõæ21ÁßçËØ∑Ê±ÇÔºåÂÆÉ‰ª¨ÂàÜÂà´ÊòØÔºö</p>
<ul>
<li><strong>ReplicaManager</strong><ul>
<li>ÊääProduceÊó•ÂøóÂÜôÂÖ•Á£ÅÁõò</li>
<li>Â¶ÇÊûúÂâØÊú¨ÊòØfollowerÔºåÂêØÂä®ÂâØÊú¨ÂêåÊ≠•Á∫øÁ®ãÔºåÂèëÈÄÅfetchËØ∑Ê±Ç</li>
<li>Â¶ÇÊûúÂâØÊú¨ÊòØleaderÔºåÂ§ÑÁêÜÊù•Ëá™ÂâØÊú¨ÁöÑfetchËØ∑Ê±Ç</li>
</ul>
</li>
<li><strong>Coordinator</strong><ul>
<li>ÁÆ°ÁêÜConsumerÁöÑbalance</li>
</ul>
</li>
<li><strong>KafkaController</strong><ul>
<li>Broker ÁöÑ‰∏äÁ∫ø„ÄÅ‰∏ãÁ∫ø</li>
<li>Êñ∞Âª∫ topic ÊàñÂ∑≤Êúâ topic ÁöÑÊâ©ÂÆπÔºåtopic Âà†Èô§</li>
<li>Â§ÑÁêÜreplicaÁöÑÂàÜÈÖç„ÄÅËøÅÁßª„ÄÅleader ÈÄâ‰∏æ„ÄÅleader ÂàáÊç¢</li>
</ul>
</li>
</ul>
<p>‰∏ãÂõæÔºöÂ§ÑÁêÜrequestËØ∑Ê±Ç</p>
<ul>
<li>*<figure class="image-box">
                <a rel=Ê∂àÊÅØÈòüÂàó| kafka‰∏≠Èó¥‰ª∂ÂéüÁêÜ && Áü•ËØÜÁÇπ href="d85330c319388dddad5de8b90e743c9a.png" title="image" data-fancybox="images"><img src="d85330c319388dddad5de8b90e743c9a.png" alt="image" title class></a>
                <p>image</p>
            </figure></li>
</ul>
<h2 id="2-ÂèØÁî®ÊÄß„ÄÅÂèØÈù†ÊÄß‰øùÈöú"><a href="#2-ÂèØÁî®ÊÄß„ÄÅÂèØÈù†ÊÄß‰øùÈöú" class="headerlink" title="2. ÂèØÁî®ÊÄß„ÄÅÂèØÈù†ÊÄß‰øùÈöú"></a>2. ÂèØÁî®ÊÄß„ÄÅÂèØÈù†ÊÄß‰øùÈöú</h2><h3 id="2-1-ÈõÜÁæ§È´òÂèØÁî®ÊÄß"><a href="#2-1-ÈõÜÁæ§È´òÂèØÁî®ÊÄß" class="headerlink" title="2.1 ÈõÜÁæ§È´òÂèØÁî®ÊÄß"></a>2.1 ÈõÜÁæ§È´òÂèØÁî®ÊÄß</h3><p>Âú®Â∫îÂØπÂçïÁÇπÊïÖÈöúÊó∂Ôºåkafka‰ªçÁÑ∂ËÉΩÂ§üÂØπÂ§ñÊèê‰æõÊúçÂä°Ôºå‰∏ªË¶ÅÈÄöËøá‰ª•‰∏ãÁâπÊÄß‰øùËØÅÔºö</p>
<ul>
<li>ÂàÜÂ∏ÉÂºèÈõÜÁæ§Ê®°ÂºèÔºåÂ§öÂè∞ÊúçÂä°Âô®ÔºåÂàÜÊï£ÂçïÊúçÂä°Âô®ÂéãÂäõ„ÄÇ</li>
<li>‰∏Ä‰∏™topicÊãÜÂàÜÊàêÂ§öpartitionÂàÜÂå∫</li>
<li>‰∏Ä‰∏™partitionÂª∫Á´ãn‰∏™ÂâØÊú¨ÔºåÂàÜ‰∏∫leaderÂíåfollowerÔºå‰øùÊåÅÂêåÊ≠•„ÄÇleader‰∏ÄÊó¶ÂÆïÊú∫‰ªéfollowerÈÄâ‰∏æÂá∫Êñ∞ÁöÑleaderÊèê‰æõËØªÂÜôÊó•ÂøóÊúçÂä°„ÄÇ</li>
</ul>
<h3 id="2-2-Ê∂àÊÅØÂèØÈù†ÊÄß‰∏é‰∏ÄËá¥ÊÄß"><a href="#2-2-Ê∂àÊÅØÂèØÈù†ÊÄß‰∏é‰∏ÄËá¥ÊÄß" class="headerlink" title="2.2 Ê∂àÊÅØÂèØÈù†ÊÄß‰∏é‰∏ÄËá¥ÊÄß"></a><strong>2.2 Ê∂àÊÅØÂèØÈù†ÊÄß‰∏é‰∏ÄËá¥ÊÄß</strong></h3><p>Èù¢ÂØπÊïÖÈöúÊó∂ÊòØÂê¶‰ªçÁÑ∂‰øùÊåÅÊúÄÁªà‰∏ÄËá¥„ÄÇ</p>
<ul>
<li>producer.ACKS = [ -1, 0, 1] ‰øùËØÅÊó•ÂøóÁîü‰∫ßÁöÑÂáÜÁ°ÆÊÄß„ÄÇ</li>
<li>HWÂíåLEOÊú∫Âà∂„ÄÇ‰øùËØÅÊó•ÂøóÂêåÊ≠•ÁöÑÂáÜÁ°ÆÊÄß„ÄÇ</li>
</ul>
<h4 id="2-2-1-producer-ACKs"><a href="#2-2-1-producer-ACKs" class="headerlink" title="2.2.1 producer.ACKs"></a>2.2.1 producer.ACKs</h4><p><strong>ACKs=1</strong></p>
<ul>
<li>producerÂèëÈÄÅÊó•ÂøóÔºåÂè™Ë¶ÅLeaderÂÜôÂÖ•ÊàêÂäüÔºåÂàôËøîÂõûproducerÊàêÂäü</li>
</ul>
<p><strong>ACKs=0</strong></p>
<ul>
<li>producerÂèëÈÄÅÊó•ÂøóÔºå‰∏çÈúÄË¶ÅÁ≠âÂæÖleaderËøîÂõûÊàêÂäü</li>
<li>‰º†ËæìÊïàÁéáÊúÄÈ´òÔºåÂèØÈù†ÊÄßÊúÄÂ∑Æ</li>
</ul>
<p><strong>ACKs=-1</strong></p>
<ul>
<li>producerÂèëÈÄÅÊó•ÂøóÔºåLeaderÈúÄË¶ÅÁ≠âÂæÖISR‰∏≠ÊâÄÊúâÁöÑReplicaÂêåÊ≠•ÂÆåÊàêÂêéÔºåÊâçËøîÂõûÁªôÂÆ¢Êà∑Á´ØÊàêÂäü</li>
<li>ÂèØÈù†ÊÄßÊúÄÈ´òÔºåÊïàÁéáÊúÄÂ∑Æ„ÄÇÈõÜÁæ§ÁöÑÁì∂È¢àÂç°Âú®‰∫ÜÊúÄÂ∑ÆÁöÑÈÇ£Âè∞Êú∫Âô®</li>
</ul>
<h4 id="2-2-2-HWÂíåLEO"><a href="#2-2-2-HWÂíåLEO" class="headerlink" title="2.2.2 HWÂíåLEO"></a>2.2.2 HWÂíåLEO</h4><p><strong>LEO</strong></p>
<ul>
<li>LogEndOffsetÔºåÊó•ÂøóÊú´Á´ØÂÅèÁßªÈáè</li>
<li>ÊØè‰∏™ReplicaÊúÄÂêé‰∏ÄÊù°logÊâÄÂú®ÁöÑ‰ΩçÁΩÆ</li>
</ul>
<p><strong>HW</strong></p>
<ul>
<li>HighWaterMarkÔºåÈ´òÊ∞¥‰Ωç</li>
<li>HW = min( ISR.LEO )</li>
<li>Â∑≤ÁªèË¢´ISRÂÆåÊàêÂêåÊ≠•ÁöÑÊ∂àÊÅØÁöÑ‰ΩçÁΩÆ</li>
<li>ConsumerÊúÄÂ§öÂè™ËÉΩÊ∂àË¥πÂà∞HWÊâÄÂú®ÁöÑ‰ΩçÁΩÆ</li>
<li>ÂØπ‰∫éÂÜÖÈÉ®ReplicaÁöÑÂêåÊ≠•Ê∂àÊÅØËØ∑Ê±ÇÔºåÊ≤°ÊúâHWÁöÑÈôêÂà∂</li>
</ul>
<p>Â¶Ç‰∏ãÂõæÔºåHW‰∏éLEO‰ΩçÁΩÆÁ§∫ÊÑèÔºö</p>
<figure class="image-box">
                <a rel=Ê∂àÊÅØÈòüÂàó| kafka‰∏≠Èó¥‰ª∂ÂéüÁêÜ && Áü•ËØÜÁÇπ href="b9466c871eb1de0157d41377cd06d94a.png" title="image" data-fancybox="images"><img src="b9466c871eb1de0157d41377cd06d94a.png" alt="image" title class></a>
                <p>image</p>
            </figure>
<p><strong>HW‰∏éLEOÊõ¥Êñ∞ËøáÁ®ãÔºö</strong></p>
<figure class="image-box">
                <a rel=Ê∂àÊÅØÈòüÂàó| kafka‰∏≠Èó¥‰ª∂ÂéüÁêÜ && Áü•ËØÜÁÇπ href="d64eb94018321663dfe38c6ea278bbde.png" title="image" data-fancybox="images"><img src="d64eb94018321663dfe38c6ea278bbde.png" alt="image" title class></a>
                <p>image</p>
            </figure>
<p><strong>HW‰∏éLEOÊõ¥Êñ∞ËøáÁ®ãÔºàËØ¶ÁªÜÔºâÔºö</strong></p>
<p>HW‰∏éLEOÂ≠òÂú®‰∫éÊØè‰∏Ä‰∏™ÂâØÊú¨ÔºåÂπ∂‰∏ç‰ªÖ‰ªÖÂ≠òÂú®‰∫éleader„ÄÇ</p>
<p>leader‰∏≠Áª¥Êä§‰∫Ü‰∏§Â•óLEOÔºå‰∏ÄÂ•óÊòØËá™Â∑±ÁöÑÔºåÂè¶‰∏ÄÂ•óÊòØfollowerÁöÑ„ÄÇ</p>
<p>ÂÅáËÆæÁõÆÂâçÊ∂àÊÅØÈòüÂàó‰∏∫Á©∫ÔºåfollowerÂêØÂä®ÁöÑÂêåÊ≠•Ê∂àÊÅØÁ∫øÁ®ãÔºå‰∏ç‰ºöËé∑ÂèñÂà∞‰ªª‰ΩïÊ∂àÊÅØÔºå‰πü‰∏ç‰ºöÊõ¥Êñ∞HWÂíåLEO</p>
<ul>
<li>*<figure class="image-box">
                <a rel=Ê∂àÊÅØÈòüÂàó| kafka‰∏≠Èó¥‰ª∂ÂéüÁêÜ && Áü•ËØÜÁÇπ href="https://cdn.jsdelivr.net/gh/mafulong/mdPic@master/images/ec19a2cae1dc96baef8fe646f758b97a.png" title="image" data-fancybox="images"><img src="https://cdn.jsdelivr.net/gh/mafulong/mdPic@master/images/ec19a2cae1dc96baef8fe646f758b97a.png" alt="image" title class></a>
                <p>image</p>
            </figure></li>
</ul>
<p>Ê≠§Êó∂ÔºåProducerÁªôleaderÂèëÈÄÅ‰∫Ü‰∏ÄÊù°Êó•Âøó</p>
<ol>
<li>leaderÁöÑLEO + 1</li>
<li>leaderÂ∞ùËØïÊõ¥Êñ∞HWÔºåHW = min(LEO)Ôºå‰ªçÁÑ∂ÊòØ0</li>
</ol>
<ul>
<li>*<figure class="image-box">
                <a rel=Ê∂àÊÅØÈòüÂàó| kafka‰∏≠Èó¥‰ª∂ÂéüÁêÜ && Áü•ËØÜÁÇπ href="https://cdn.jsdelivr.net/gh/mafulong/mdPic@master/images/219fab4d24791360c434d96ad75c71e8.png" title="image" data-fancybox="images"><img src="https://cdn.jsdelivr.net/gh/mafulong/mdPic@master/images/219fab4d24791360c434d96ad75c71e8.png" alt="image" title class></a>
                <p>image</p>
            </figure></li>
</ul>
<p>followerÂèëÈÄÅfetchËØ∑Ê±ÇÔºö</p>
<ul>
<li>*<figure class="image-box">
                <a rel=Ê∂àÊÅØÈòüÂàó| kafka‰∏≠Èó¥‰ª∂ÂéüÁêÜ && Áü•ËØÜÁÇπ href="65578cc63bfff21a8529caed7fd904ff.png" title="image" data-fancybox="images"><img src="65578cc63bfff21a8529caed7fd904ff.png" alt="image" title class></a>
                <p>image</p>
            </figure></li>
</ul>
<ol>
<li>reqÁöÑoffsetÂèÇÊï∞ÊòØ0ÔºåË°®Á§∫‰ªéÁ¨¨0‰∏™Ê∂àÊÅØÂºÄÂßãfetch</li>
<li>leaderÊõ¥Êñ∞remote LEO=0ÔºåËøôÊòØÂõ†‰∏∫follower requestÁöÑoffsetÊòØ0</li>
<li>leaderÂ∞ùËØïÊõ¥Êñ∞HWÔºåHW = min(LEO)Ôºå‰ªçÁÑ∂ÊòØ0</li>
<li>leaderÊääÊï∞ÊçÆÂíåÊ≠§Êó∂ÁöÑleader HWËøîÂõûÁªôfollower</li>
<li>followerÊé•Êî∂Âà∞respsonseÔºåÊõ¥Êñ∞LEO=1ÔºåÊõ¥Êñ∞HW‰ªçÁÑ∂ÊòØ0</li>
</ol>
<p>followerÂèëÈÄÅÁ¨¨‰∫åËΩÆfetchËØ∑Ê±Ç:</p>
<figure class="image-box">
                <a rel=Ê∂àÊÅØÈòüÂàó| kafka‰∏≠Èó¥‰ª∂ÂéüÁêÜ && Áü•ËØÜÁÇπ href="a730c7a7e7b6ea34fa9d3a71e1911f57.png" title="image" data-fancybox="images"><img src="a730c7a7e7b6ea34fa9d3a71e1911f57.png" alt="image" title class></a>
                <p>image</p>
            </figure>
<ol>
<li>reqÁöÑoffsetÂèÇÊï∞ÊòØ1ÔºåË°®Á§∫ËØ∑Ê±ÇÂêåÊ≠•Á¨¨‰∏Ä‰∏™Ê∂àÊÅØ</li>
<li>leaderÊõ¥Êñ∞remote LEO=1ÔºåÂõ†‰∏∫follower requestÁöÑoffsetÊòØ1</li>
<li>leaderÂ∞ùËØïÊõ¥Êñ∞HWÔºåHW=min(LEO)Ôºå<strong>Ê≠§Êó∂Êõ¥Êñ∞HW=1</strong></li>
<li>leaderÊääÊï∞ÊçÆÂíåÊ≠§Êó∂ÁöÑleader HWËøîÂõûÁªôfollower</li>
<li>followerÊé•Êî∂Âà∞respsonseÔºåÊõ¥Êñ∞HWÔºå<strong>Ê≠§Êó∂Êõ¥Êñ∞HW=1</strong></li>
</ol>
<p>Ëá≥Ê≠§ÔºåproducerÁîü‰∫ßÁöÑÊ∂àÊÅØÂ∑≤Áªè‰øùÂ≠òÂà∞kafkaÁöÑÂêÑ‰∏™ÂâØÊú¨‰∏ä‰∫ÜÔºåConsumerÂ∑≤ÁªèÂèØ‰ª•Ê∂àË¥πÂà∞HW‰ΩçÁΩÆ‰∫Ü„ÄÇ</p>
<p>‰∏Ä‰∏™Ê∂àÊÅØ‰ªéÂÜôÂÖ•kafkaÂà∞ÂÆåÊàêÊõ¥Êñ∞HWÔºåÈúÄË¶ÅfollowerÂèëÈÄÅ‰∏§ËΩÆfetchËØ∑Ê±Ç„ÄÇ Á¨¨‰∏ÄËΩÆfetchÊòØfollowÂëäËØâleaderËá™Â∑±ÁöÑleo, ‰ª•ÂèäÊõ¥Êñ∞offset‰ª•Âèäleo. Á¨¨‰∫åËΩÆfetchÊòØÂëäËØâproducerËá™Â∑±ÊúÄÊñ∞ÁöÑleoÁî®‰∫éleaderÊõ¥Êñ∞hw.</p>
<h2 id="3-Â∏∏ËßÅÁöÑÈÄâ‰∏æ„ÄÅÂàÜÈÖç„ÄÅRebalance"><a href="#3-Â∏∏ËßÅÁöÑÈÄâ‰∏æ„ÄÅÂàÜÈÖç„ÄÅRebalance" class="headerlink" title="3. Â∏∏ËßÅÁöÑÈÄâ‰∏æ„ÄÅÂàÜÈÖç„ÄÅRebalance"></a>3. Â∏∏ËßÅÁöÑÈÄâ‰∏æ„ÄÅÂàÜÈÖç„ÄÅRebalance</h2><p>KafkaÈõÜÁæ§‰æùËµñZookeeperÔºåZookeeperÁöÑÊï∞ÊçÆÊ®°ÂûãÊòØ‰∏ÄÊ£µÊ†ëÔºåkafkaÁöÑÁªÑ‰ª∂ÊääÂõûË∞ÉÂáΩÊï∞Ê≥®ÂÜåÂà∞zkÊ†ëËäÇÁÇπ‰∏ãÔºåÂú®ËäÇÁÇπÂèëÁîüÂèòÊõ¥Êó∂ÔºåzkÈÄöËøáÂõûË∞ÉÈÄöÁü•kafka„ÄÇ</p>
<h3 id="3-1-ControllerÈÄâ‰∏æ"><a href="#3-1-ControllerÈÄâ‰∏æ" class="headerlink" title="3.1 ControllerÈÄâ‰∏æ"></a>3.1 ControllerÈÄâ‰∏æ</h3><p>KafkaControllerÁöÑÈÄâ‰∏æËøáÁ®ãÊØîËæÉÁÆÄÂçïÔºåÊâÄÊúâÁöÑbrokerÂêØÂä®Êó∂ÔºåÊä¢Âç†Ê≥®ÂÜåZookeeperÁöÑ/ControllerËäÇÁÇπÔºåÊ≥®ÂÜåÊàêÂäüÂç≥Êàê‰∏∫Controller„ÄÇ‰º™‰ª£Á†ÅÂ¶Ç‰∏ãÔºö</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">def elect: Boolean = &#123;</span><br><span class="line">    leaderId = getControllerID   // Êü•ËØ¢ÂΩìÂâçÈõÜÁæ§ControllerId</span><br><span class="line"></span><br><span class="line">    if(leaderId != -1) &#123;  // ControllerÊó©Â∑≤Â≠òÂú®‰∫Ü</span><br><span class="line">       return amILeader</span><br><span class="line">    &#125;</span><br><span class="line">    try &#123;</span><br><span class="line">        zkCheckedEphemeral.create()  // Ê≥®ÂÜåÂà∞zookeeper leaderËäÇÁÇπ</span><br><span class="line">    &#125; catch &#123;</span><br><span class="line">        case _: ZkNodeExistsException =&gt;   // leaderË¢´Âà´‰∫∫Ê≥®ÂÜåÔºåÊäõÂºÇÂ∏∏</span><br><span class="line">        leaderId = getControllerID</span><br><span class="line">    &#125;</span><br><span class="line">    return amILeader</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="3-2-ConsumerÂêØÂä®Ëß¶ÂèëRebalance"><a href="#3-2-ConsumerÂêØÂä®Ëß¶ÂèëRebalance" class="headerlink" title="3.2 ConsumerÂêØÂä®Ëß¶ÂèëRebalance"></a>3.2 ConsumerÂêØÂä®Ëß¶ÂèëRebalance</h3><p>Áî±‰∫éBrokerÊï∞ÈáèÈÄöÂ∏∏‰∏ç‰ºöÂæàÂ§öÔºåÊâÄ‰ª•ControllerÈÄâ‰∏æÈááÁî®Êä¢Âç†Ê≥®ÂÜåÁöÑÊñπÂºè‰∏ç‰ºöÁªôzookeeperÂ∏¶Êù•ÂæàÂ§ßÂéãÂäõ„ÄÇ</p>
<p>‰ΩÜÊòØÂØπ‰∫éConsumerËÄåË®ÄÔºå‰∏Ä‰∏™Â§ßÁöÑTopicÂèØËÉΩÂØπÂ∫îÂàõÂª∫‰∫ÜÊï∞ÈáèÂ∫ûÂ§ßÁöÑConsumerÔºåKafkaËÄÅÁâàÊú¨‰πüÁ°ÆÂÆûÊòØËøô‰πàÂÆûÁé∞ÁöÑÔºåËøôÁßçÊÉÖÂÜµ‰∏ãÔºåÂ≠òÂú®‰∏§‰∏™ÈóÆÈ¢òÔºö</p>
<ul>
<li>ÁæäÁæ§ÊïàÂ∫îÔºö‰ªª‰Ωï‰∏Ä‰∏™ConsumerÁöÑÂ¢ûÂáèÈÉΩ‰ºöËß¶ÂèëÊâÄÊúâConsumerÁöÑRebalance</li>
<li>ËÑëË£ÇÊïàÂ∫îÔºöÊØè‰∏™ConsumerÂàÜÂà´ÂçïÁã¨ÈÄöËøáZookeeperÂà§Êñ≠Âì™‰∫õConsumer ÂÆïÊú∫‰∫ÜÔºåÈÇ£‰πà‰∏çÂêåConsumerÂú®Âêå‰∏ÄÊó∂Âàª‰ªéZookeeperÁúãÂà∞ÁöÑËßÜËßíÂ∞±ÂèØËÉΩ‰∏ç‰∏ÄÊ†∑„ÄÇËøôÂ∞±‰ºöÈÄ†Êàê‰∏çÊ≠£Á°ÆÁöÑReblanceÂ∞ùËØï„ÄÇ</li>
</ul>
<p>Êñ∞ÁâàÊú¨ÁöÑKafkaÂØπÊ≠§ÂÅö‰∫Ü‰ºòÂåñÔºå‰ΩøÁî®‰∫Ü‚ÄúÂçèË∞ÉÂëò‚ÄùËøô‰∏ÄËßíËâ≤Ôºå‰Ωú‰∏∫‚ÄúÊùÉÂ®Å‚Äù‚ÄúÊåáÊå•‚ÄùConsumer Rebalance</p>
<p>Êñ∞ÁâàÊú¨ÔºåConsumerÂêØÂä®ËøáÁ®ãÂ¶Ç‰∏ãÔºö</p>
<figure class="image-box">
                <a rel=Ê∂àÊÅØÈòüÂàó| kafka‰∏≠Èó¥‰ª∂ÂéüÁêÜ && Áü•ËØÜÁÇπ href="5849ad51359fe5c181c7c4673b8f6da8.png" title="image" data-fancybox="images"><img src="5849ad51359fe5c181c7c4673b8f6da8.png" alt="image" title class></a>
                <p>image</p>
            </figure>
<ol>
<li>ConsumerÂêØÂä®ÔºåÂêë‰ªªÊÑè‰∏ÄÂè∞brokerÂèëÈÄÅËØ∑Ê±ÇÔºåÂæóÂà∞ÂìçÂ∫î„ÄÇÂìçÂ∫îÂÜÖÂÆπ‰∏∫‚ÄúÂçèË∞ÉÂëòÁöÑÂú∞ÂùÄ‚Äù„ÄÇ</li>
<li>ConsumerÊâæÂà∞Ëá™Â∑±ÁöÑCoordinatorÔºå<strong>ÊåÅÁª≠</strong>ÂèëÈÄÅÂøÉË∑≥ËØ∑Ê±Ç</li>
<li>ConsumerÂà§Êñ≠ÂøÉË∑≥ËØ∑Ê±ÇÁöÑÂìçÂ∫îÁöÑErrorCodeÔºåÂ¶ÇÊûúÊ≤°ÊúâÂºÇÂ∏∏ÂàôÊ∂àË¥πÊï∞ÊçÆ„ÄÇÂ¶ÇÊûúÊúâIllegalGenerationÂºÇÂ∏∏ÔºåËØ¥ÊòéCoordinatorÊ≠£Âú®ËÆ°ÁÆórebalanceÔºåÁªü‰∏ÄÁªôConsumerÂàÜÈÖçPartition„ÄÇ</li>
<li>ConsumerÁªôCoordinatorÂèëÈÄÅJonGroupËØ∑Ê±ÇÔºåÂæóÂà∞ÂìçÂ∫îÔºåÂæóÁü•Ëá™Â∑±Ë¢´ÂàÜÈÖç‰∫ÜÂì™‰∏™PartitionÔºåËøûÊé•ÈÇ£‰∏™partitionËøõË°åÊ∂àË¥π„ÄÇ</li>
</ol>
<h3 id="3-3-Leader-ReplicaÂÆïÊú∫Ëß¶ÂèëRebalance"><a href="#3-3-Leader-ReplicaÂÆïÊú∫Ëß¶ÂèëRebalance" class="headerlink" title="3.3 Leader ReplicaÂÆïÊú∫Ëß¶ÂèëRebalance"></a>3.3 Leader ReplicaÂÆïÊú∫Ëß¶ÂèëRebalance</h3><figure class="image-box">
                <a rel=Ê∂àÊÅØÈòüÂàó| kafka‰∏≠Èó¥‰ª∂ÂéüÁêÜ && Áü•ËØÜÁÇπ href="c981ddff865953bf37066940aa92cc28.png" title="image" data-fancybox="images"><img src="c981ddff865953bf37066940aa92cc28.png" alt="image" title class></a>
                <p>image</p>
            </figure>
<p>ÂõæÔºöbrokerÂÆïÊú∫Ëß¶ÂèëreplicaÈÄâ‰∏æ</p>
<p>ReplicaÂàÜÂ∏ÉÂú®broker‰∏äÔºåReplica leaderÊéâÁ∫øÂÖ∂ÂÆûÂ∞±ÊòØleaderÊâÄÂú®ÁöÑbrokerÁöÑÂÆïÊú∫Ôºå‰ªéÂÆïÊú∫Âà∞ÈõÜÁæ§ÊÅ¢Â§çÁ®≥ÂÆöÊÄÅËøáÁ®ãÔºö</p>
<ol>
<li>BrokerÂêØÂä®ÔºåÂú®zookeeperÁöÑbroker/idsË∑ØÂæÑÊ≥®ÂÜå‰∏¥Êó∂ËäÇÁÇπ</li>
<li>ControllerÂêØÂä®ÔºåÊ≥®ÂÜåwatcherÂáΩÊï∞ÔºåÁõëÂê¨zookeeper‰∏äËø∞Ë∑ØÂæÑÁöÑËäÇÁÇπÂèòÂåñ</li>
<li>BrokerÂõ†‰∏∫ÁΩëÁªú„ÄÅÊñ≠Áîµ„ÄÅÊú∫Âô®ÊïÖÈöúÁ≠âÂéüÂõ†ÂÆïÊú∫</li>
<li>zookeeperÁõëÂê¨Âà∞brokerËäÇÁÇπÊéâÁ∫øÔºåËß¶ÂèëcontrollerÊ≥®ÂÜåÁöÑwatcherÔºåÈÄöËøáÂõûË∞ÉÂáΩÊï∞ÈÄöÁü•Controller</li>
<li>ControllerÂÜ≥ÂÆö‰∏Ä‰∏™set_pÈõÜÂêàÔºåÂåÖÂê´ÂÆïÊú∫broker‰∏äÁöÑÊâÄÊúâpartition</li>
<li>ÂØπ‰∫é‰∏äËø∞ÁöÑpartitionÔºåController‰ªé/brokers/topics/[topic]/partitions/[partition]/stateËØªÂèñËØ• Partition ÂΩìÂâçÁöÑ ISR</li>
<li>Controller‰ªé‰∏äËø∞ISR‰∏≠ÈÄâÂá∫Leader„ÄÇÈÄâ‰∏æÁÆóÊ≥ïÊòØquorumÔºàÊ≥ïÂÆö‰∫∫Êï∞ÔºâÁÆóÊ≥ïÔºåÈÄöËøáÊï∞ÊçÆÂÜó‰ΩôÊù•‰øùËØÅÊï∞ÊçÆ‰∏ÄËá¥ÊÄßÁöÑÊäïÁ•®ÁÆóÊ≥ï„ÄÇÂØπ‰∫éKafkaËÄåË®ÄÔºåÈÄâ‰∏æ‰∫∫Êï∞Â∞±ÊòØISR„ÄÇ</li>
<li>ControllerÂ∞ÜÊñ∞ÁöÑ Leader„ÄÅISR ÂíåÊñ∞ÁöÑleader_epochÂèäcontroller_epochÂÜôÂÖ•/brokers/topics/[topic]/partitions/[partition]/state</li>
<li>Âêëset_pÁõ∏ÂÖ≥ÁöÑbrokerÂèëÈÄÅLeaderAndIsrRequestÈÄöÁü•ÂèóÂΩ±ÂìçÁöÑbrokerÊõ¥Êñ∞‰ø°ÊÅØ</li>
</ol>
<h3 id="3-4-topicÂàÜÈÖçÂà∞broker"><a href="#3-4-topicÂàÜÈÖçÂà∞broker" class="headerlink" title="3.4 topicÂàÜÈÖçÂà∞broker"></a>3.4 topicÂàÜÈÖçÂà∞broker</h3><ol>
<li>Áî®Êà∑Ë∞ÉÁî®ËÑöÊú¨ÂàõÂª∫topicÔºåÊåáÂÆöÂàÜÂå∫Êï∞ÂíåÂâØÊú¨Êï∞</li>
<li>ControllerÊé•Êî∂CreateTopicËØ∑Ê±ÇÔºåËÆ°ÁÆóbroker‰∏épartitionÁöÑÂØπÂ∫îÂÖ≥Á≥ª</li>
<li>ControllerÂêëBrokerÂèëÈÄÅLeaderAndIsrËØ∑Ê±ÇÔºåÈÄöÁü•BrokerÊúâ‰∫ÜÊñ∞ÁöÑTopicÔºåÂêÑbrokerË¥üË¥£ÂàõÂª∫Partition</li>
</ol>
<p>ÂâØÊú¨ÂàÜÈÖçÁÆóÊ≥ïÔºö</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">* To achieve this goal for replica assignment without considering racks, we:</span><br><span class="line">* 1. Assign the first replica of each partition by round-robin, starting from a random position in the broker list.</span><br><span class="line">* 2. Assign the remaining replicas of each partition with an increasing shift.</span><br><span class="line">*</span><br><span class="line">* Here is an example of assigning</span><br><span class="line">* broker-0  broker-1  broker-2  broker-3  broker-4</span><br><span class="line">* p0        p1        p2        p3        p4       (1st replica)</span><br><span class="line">* p5        p6        p7        p8        p9       (1st replica)</span><br><span class="line">* p4        p0        p1        p2        p3       (2nd replica)</span><br><span class="line">* p8        p9        p5        p6        p7       (2nd replica)</span><br><span class="line">* p3        p4        p0        p1        p2       (3nd replica)</span><br><span class="line">* p7        p8        p9        p5        p6       (3nd replica)</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="Áü•ËØÜÁÇπ"><a href="#Áü•ËØÜÁÇπ" class="headerlink" title="Áü•ËØÜÁÇπ"></a>Áü•ËØÜÁÇπ</h1><ul>
<li><p>kafka‰ΩøÁî®tcp, ioÂ§öË∑ØÂ§çÁî®Âç≥‰ø°Âè∑È©±Âä®io, Áîü‰∫ßËÄÖÊúâÂêåÊ≠•ÂíåÂºÇÊ≠•2ÁßçÁ±ªÂûã</p>
</li>
<li><p>ÈÄâÊã©Áî±producerÂêëbroker pushÊ∂àÊÅØÂπ∂Áî±consumer‰ªébroker pullÊ∂àÊÅØ„ÄÇ</p>
</li>
<li><p>kafkaÂíånsqÂØπÊØîÔºö</p>
<ul>
<li>kafkaÊòØpullÔºåÊúâÂ∫èÔºåÂêûÂêêÈ´òÔºõnsqÊ∂àÊÅØÊòØÊó†Â∫èÁöÑÔºåÂêûÂêê‰ΩéÔºåÊúârequeueÂíådeferÂäüËÉΩÔºå‰∏çÊåÅ‰πÖÂåñÔºå‰∏çÂèØÂõûÊ∫ØÔºåpullÔºåÁî®ÂÜÖÂ≠òÔºåÊâÄ‰ª•ÈÄüÂ∫¶Âø´„ÄÇ</li>
</ul>
</li>
<li><p>kafkaÊï∞ÊçÆÂèØÈù†ÊÄßÂíåÈáçÂ§çÊ∂àË¥π</p>
<ol>
<li>ÈúÄË¶ÅÊ∂àË¥πËÄÖÊìç‰ΩúÂπÇÁ≠âÔºåÊù•‰øùËØÅÈáçÂ§çÊ∂àË¥πÊó†ÂΩ±Âìç</li>
<li>Â§ÑÁêÜÂêéÊèê‰∫§commitÔºå‰øùËØÅÊ∂àÊÅØË¢´Ê∂àË¥πÂà∞Ôºå‰∫ãÂä°‰øùËØÅ</li>
<li>Áîü‰∫ßËÄÖÁîü‰∫ßÊ∂àÊÅØÂ§±Ë¥•Êó∂ÔºåÊä•error„ÄÇ</li>
<li>Â¶ÇÊûúË¶Å‰øùËØÅÊúâÂ∫èÔºåËÆ©Ê∂àÊÅØÂà∞1‰∏™partitionÂ∞±Ë°å‰∫ÜÔºåpartitionÂÜÖÈÉ®Ê∂àË¥πÊòØÊúâÂ∫èÁöÑ</li>
</ol>
</li>
<li><p>kafkaÂü∫‰∫ézk.</p>
</li>
<li><p>kafkaÊòØÂèëÂ∏É-ËÆ¢ÈòÖÊ®°Âûã„ÄÇ</p>
</li>
<li><p>Zookeeper ‰∏ªË¶Å‰∏∫ Kafka ÂÅö‰∫Ü‰∏ãÈù¢Ëøô‰∫õ‰∫ãÊÉÖÔºö</p>
<ol>
<li><strong>Broker Ê≥®ÂÜå</strong> ÔºöÂú® Zookeeper ‰∏ä‰ºöÊúâ‰∏Ä‰∏™‰∏ìÈó®<strong>Áî®Êù•ËøõË°å Broker ÊúçÂä°Âô®ÂàóË°®ËÆ∞ÂΩï</strong>ÁöÑËäÇÁÇπ„ÄÇÊØè‰∏™ Broker Âú®ÂêØÂä®Êó∂ÔºåÈÉΩ‰ºöÂà∞ Zookeeper ‰∏äËøõË°åÊ≥®ÂÜåÔºåÂç≥Âà∞/brokers/ids ‰∏ãÂàõÂª∫Â±û‰∫éËá™Â∑±ÁöÑËäÇÁÇπ„ÄÇÊØè‰∏™ Broker Â∞±‰ºöÂ∞ÜËá™Â∑±ÁöÑ IP Âú∞ÂùÄÂíåÁ´ØÂè£Á≠â‰ø°ÊÅØËÆ∞ÂΩïÂà∞ËØ•ËäÇÁÇπ‰∏≠Âéª</li>
<li><strong>Topic Ê≥®ÂÜå</strong> Ôºö Âú® Kafka ‰∏≠ÔºåÂêå‰∏Ä‰∏™<strong>Topic ÁöÑÊ∂àÊÅØ‰ºöË¢´ÂàÜÊàêÂ§ö‰∏™ÂàÜÂå∫</strong>Âπ∂Â∞ÜÂÖ∂ÂàÜÂ∏ÉÂú®Â§ö‰∏™ Broker ‰∏äÔºå<strong>Ëøô‰∫õÂàÜÂå∫‰ø°ÊÅØÂèä‰∏é Broker ÁöÑÂØπÂ∫îÂÖ≥Á≥ª</strong>‰πüÈÉΩÊòØÁî± Zookeeper Âú®Áª¥Êä§„ÄÇÊØîÂ¶ÇÊàëÂàõÂª∫‰∫Ü‰∏Ä‰∏™ÂêçÂ≠ó‰∏∫ my-topic ÁöÑ‰∏ªÈ¢òÂπ∂‰∏îÂÆÉÊúâ‰∏§‰∏™ÂàÜÂå∫ÔºåÂØπÂ∫îÂà∞ zookeeper ‰∏≠‰ºöÂàõÂª∫Ëøô‰∫õÊñá‰ª∂Â§πÔºö<code>/brokers/topics/my-topic/Partitions/0</code>„ÄÅ<code>/brokers/topics/my-topic/Partitions/1</code></li>
<li><strong>Ë¥üËΩΩÂùáË°°</strong> Ôºö‰∏äÈù¢‰πüËØ¥Ëøá‰∫Ü Kafka ÈÄöËøáÁªôÁâπÂÆö Topic ÊåáÂÆöÂ§ö‰∏™ Partition, ËÄåÂêÑ‰∏™ Partition ÂèØ‰ª•ÂàÜÂ∏ÉÂú®‰∏çÂêåÁöÑ Broker ‰∏ä, ËøôÊ†∑‰æøËÉΩÊèê‰æõÊØîËæÉÂ•ΩÁöÑÂπ∂ÂèëËÉΩÂäõ„ÄÇ ÂØπ‰∫éÂêå‰∏Ä‰∏™ Topic ÁöÑ‰∏çÂêå PartitionÔºåKafka ‰ºöÂ∞ΩÂäõÂ∞ÜËøô‰∫õ Partition ÂàÜÂ∏ÉÂà∞‰∏çÂêåÁöÑ Broker ÊúçÂä°Âô®‰∏ä„ÄÇÂΩìÁîü‰∫ßËÄÖ‰∫ßÁîüÊ∂àÊÅØÂêé‰πü‰ºöÂ∞ΩÈáèÊäïÈÄíÂà∞‰∏çÂêå Broker ÁöÑ Partition ÈáåÈù¢„ÄÇÂΩì Consumer Ê∂àË¥πÁöÑÊó∂ÂÄôÔºåZookeeper ÂèØ‰ª•Ê†πÊçÆÂΩìÂâçÁöÑ Partition Êï∞Èáè‰ª•Âèä Consumer Êï∞ÈáèÊù•ÂÆûÁé∞Âä®ÊÄÅË¥üËΩΩÂùáË°°„ÄÇ</li>
<li>‚Ä¶‚Ä¶</li>
</ol>
</li>
<li><p>ISR:In-Sync Replicas ÂâØÊú¨ÂêåÊ≠•ÈòüÂàó AR:Assigned Replicas ÊâÄÊúâÂâØÊú¨</p>
<p>HW:High Watermark È´òÊ∞¥‰ΩçÔºåÂèñ‰∏Ä‰∏™partitionÂØπÂ∫îÁöÑISR‰∏≠ÊúÄÂ∞èÁöÑLEO‰Ωú‰∏∫HWÔºåconsumerÊúÄÂ§öÂè™ËÉΩÊ∂àË¥πÂà∞HWÊâÄÂú®ÁöÑ‰ΩçÁΩÆ‰∏ä‰∏ÄÊù°‰ø°ÊÅØ„ÄÇ</p>
<p>LEO:LogEndOffset ÂΩìÂâçÊó•ÂøóÊñá‰ª∂‰∏≠‰∏ã‰∏ÄÊù°ÂæÖÂÜô‰ø°ÊÅØÁöÑoffset</p>
<p>HW/LEOËøô‰∏§‰∏™ÈÉΩÊòØÊåáÊúÄÂêé‰∏ÄÊù°ÁöÑ‰∏ã‰∏ÄÊù°ÁöÑ‰ΩçÁΩÆËÄå‰∏çÊòØÊåáÊúÄÂêé‰∏ÄÊù°ÁöÑ‰ΩçÁΩÆ„ÄÇ</p>
<p>LSO:Last Stable Offset ÂØπÊú™ÂÆåÊàêÁöÑ‰∫ãÂä°ËÄåË®ÄÔºåLSO ÁöÑÂÄºÁ≠â‰∫é‰∫ãÂä°‰∏≠Á¨¨‰∏ÄÊù°Ê∂àÊÅØÁöÑ‰ΩçÁΩÆ(firstUnstableOffset)ÔºåÂØπÂ∑≤ÂÆåÊàêÁöÑ‰∫ãÂä°ËÄåË®ÄÔºåÂÆÉÁöÑÂÄºÂêå HW Áõ∏Âêå</p>
<p>LW:Low Watermark ‰ΩéÊ∞¥‰Ωç, ‰ª£Ë°® AR ÈõÜÂêà‰∏≠ÊúÄÂ∞èÁöÑ logStartOffset ÂÄº</p>
</li>
</ul>
<h2 id="Èù¢ËØïÈ¢ò"><a href="#Èù¢ËØïÈ¢ò" class="headerlink" title="Èù¢ËØïÈ¢ò"></a>Èù¢ËØïÈ¢ò</h2><ul>
<li><a href="https://juejin.cn/post/6844903889003610119" target="_blank" rel="noopener">kafkaÈù¢ËØïÈ¢ò</a></li>
<li><a href="https://github.com/Snailclimb/JavaGuide/blob/master/docs/system-design/distributed-system/message-queue/KafkaÂ∏∏ËßÅÈù¢ËØïÈ¢òÊÄªÁªì.md">kafkaÈù¢ËØïÈ¢ò2</a></li>
<li><a href="http://trumandu.github.io/2019/04/13/KafkaÈù¢ËØïÈ¢ò‰∏éÁ≠îÊ°àÂÖ®Â•óÊï¥ÁêÜ/" target="_blank" rel="noopener">Êï¥ÁêÜÔºåÁ≠îÊ°à‰∏çÂÖ®ÁöÑ</a></li>
<li><a href="https://cloud.tencent.com/developer/article/1541215" target="_blank" rel="noopener">Èù¢ËØïÈ¢ò3</a></li>
</ul>
<h2 id="ÊéßÂà∂Âô®Controller"><a href="#ÊéßÂà∂Âô®Controller" class="headerlink" title="ÊéßÂà∂Âô®Controller"></a>ÊéßÂà∂Âô®Controller</h2><ul>
<li><p>ÊéßÂà∂Âô®ÊòØÂ¶Ç‰ΩïË¢´ÈÄâÂá∫Êù•ÁöÑÔºü</p>
<ul>
<li><p>‰Ω†‰∏ÄÂÆöÂæàÊÉ≥Áü•ÈÅìÔºåÊéßÂà∂Âô®ÊòØÂ¶Ç‰ΩïË¢´ÈÄâÂá∫Êù•ÁöÑÂë¢ÔºüÊàë‰ª¨ÂàöÂàöÂú®ÂâçÈù¢ËØ¥ËøáÔºåÊØèÂè∞ Broker ÈÉΩËÉΩÂÖÖÂΩìÊéßÂà∂Âô®ÔºåÈÇ£‰πàÔºåÂΩìÈõÜÁæ§ÂêØÂä®ÂêéÔºåKafka ÊÄé‰πàÁ°ÆËÆ§ÊéßÂà∂Âô®‰Ωç‰∫éÂì™Âè∞ Broker Âë¢Ôºü</p>
<p>ÂÆûÈôÖ‰∏äÔºåBroker Âú®ÂêØÂä®Êó∂Ôºå‰ºöÂ∞ùËØïÂéª ZooKeeper ‰∏≠ÂàõÂª∫ /controller ËäÇÁÇπ„ÄÇKafka ÂΩìÂâçÈÄâ‰∏æÊéßÂà∂Âô®ÁöÑËßÑÂàôÊòØÔºöÁ¨¨‰∏Ä‰∏™ÊàêÂäüÂàõÂª∫ /controller ËäÇÁÇπÁöÑ Broker ‰ºöË¢´ÊåáÂÆö‰∏∫ÊéßÂà∂Âô®„ÄÇ</p>
</li>
</ul>
</li>
<li><p>ÊéßÂà∂Âô®ÊòØÂÅö‰ªÄ‰πàÁöÑÔºü</p>
<ul>
<li><p>1.‰∏ªÈ¢òÁÆ°ÁêÜÔºàÂàõÂª∫„ÄÅÂà†Èô§„ÄÅÂ¢ûÂä†ÂàÜÂå∫Ôºâ</p>
<p>2.ÂàÜÂå∫ÈáçÂàÜÈÖç</p>
<p>3.Preferred È¢ÜÂØºËÄÖÈÄâ‰∏æ</p>
<p>4.ÈõÜÁæ§ÊàêÂëòÁÆ°ÁêÜÔºàÊñ∞Â¢û Broker„ÄÅBroker ‰∏ªÂä®ÂÖ≥Èó≠„ÄÅBroker ÂÆïÊú∫Ôºâ</p>
<p>5.Êï∞ÊçÆÊúçÂä°</p>
</li>
</ul>
</li>
<li><p>‰øùÂ≠òÁöÑÊï∞ÊçÆÔºö</p>
</li>
<li><figure class="image-box">
                <a rel=Ê∂àÊÅØÈòüÂàó| kafka‰∏≠Èó¥‰ª∂ÂéüÁêÜ && Áü•ËØÜÁÇπ href="20210523170815.png" title="image-20210523170815843" data-fancybox="images"><img src="20210523170815.png" alt="image-20210523170815843" title class></a>
                <p>image-20210523170815843</p>
            </figure>
</li>
</ul>
<h2 id="consumerÁÆ°ÁêÜoffset"><a href="#consumerÁÆ°ÁêÜoffset" class="headerlink" title="consumerÁÆ°ÁêÜoffset"></a>consumerÁÆ°ÁêÜoffset</h2><p><strong>kafkaÂÜÖÈÉ®Êúâ‰∏™‰∏ªÈ¢òÔºå__consumer_offset</strong></p>
<p>ËÄÅÁâàÊú¨ Consumer ÁöÑ‰ΩçÁßªÁÆ°ÁêÜÊòØ‰æùÊâò‰∫é Apache ZooKeeper ÁöÑÔºåÂÆÉ‰ºöËá™Âä®ÊàñÊâãÂä®Âú∞Â∞Ü‰ΩçÁßªÊï∞ÊçÆÊèê‰∫§Âà∞ ZooKeeper ‰∏≠‰øùÂ≠ò„ÄÇÂΩì Consumer ÈáçÂêØÂêéÔºåÂÆÉËÉΩËá™Âä®‰ªé ZooKeeper ‰∏≠ËØªÂèñ‰ΩçÁßªÊï∞ÊçÆÔºå‰ªéËÄåÂú®‰∏äÊ¨°Ê∂àË¥πÊà™Ê≠¢ÁöÑÂú∞ÊñπÁªßÁª≠Ê∂àË¥π„ÄÇËøôÁßçËÆæËÆ°‰ΩøÂæó Kafka Broker ‰∏çÈúÄË¶Å‰øùÂ≠ò‰ΩçÁßªÊï∞ÊçÆÔºåÂáèÂ∞ë‰∫Ü Broker Á´ØÈúÄË¶ÅÊåÅÊúâÁöÑÁä∂ÊÄÅÁ©∫Èó¥ÔºåÂõ†ËÄåÊúâÂà©‰∫éÂÆûÁé∞È´ò‰º∏Áº©ÊÄß„ÄÇ</p>
<p>‰ΩÜÊòØÔºåZooKeeper ÂÖ∂ÂÆûÂπ∂‰∏çÈÄÇÁî®‰∫éËøôÁßçÈ´òÈ¢ëÁöÑÂÜôÊìç‰ΩúÔºåÂõ†Ê≠§ÔºåKafka Á§æÂå∫Ëá™ 0.8.2.x ÁâàÊú¨ÂºÄÂßãÔºåÂ∞±Âú®ÈÖùÈÖø‰øÆÊîπËøôÁßçËÆæËÆ°ÔºåÂπ∂ÊúÄÁªàÂú®Êñ∞ÁâàÊú¨ Consumer ‰∏≠Ê≠£ÂºèÊé®Âá∫‰∫ÜÂÖ®Êñ∞ÁöÑ‰ΩçÁßªÁÆ°ÁêÜÊú∫Âà∂ÔºåËá™ÁÑ∂‰πüÂåÖÊã¨Ëøô‰∏™Êñ∞ÁöÑ‰ΩçÁßª‰∏ªÈ¢ò„ÄÇ</p>
<p>Êñ∞ÁâàÊú¨ Consumer ÁöÑ‰ΩçÁßªÁÆ°ÁêÜÊú∫Âà∂ÂÖ∂ÂÆû‰πüÂæàÁÆÄÂçïÔºåÂ∞±ÊòØÂ∞Ü Consumer ÁöÑ‰ΩçÁßªÊï∞ÊçÆ‰Ωú‰∏∫‰∏ÄÊù°Êù°ÊôÆÈÄöÁöÑ Kafka Ê∂àÊÅØÔºåÊèê‰∫§Âà∞ <strong>consumer_offsets ‰∏≠„ÄÇÂèØ‰ª•Ëøô‰πàËØ¥Ôºå</strong>consumer_offsets ÁöÑ‰∏ªË¶Å‰ΩúÁî®ÊòØ‰øùÂ≠ò Kafka Ê∂àË¥πËÄÖÁöÑ‰ΩçÁßª‰ø°ÊÅØ„ÄÇÂÆÉË¶ÅÊ±ÇËøô‰∏™Êèê‰∫§ËøáÁ®ã‰∏ç‰ªÖË¶ÅÂÆûÁé∞È´òÊåÅ‰πÖÊÄßÔºåËøòË¶ÅÊîØÊåÅÈ´òÈ¢ëÁöÑÂÜôÊìç‰Ωú„ÄÇÊòæÁÑ∂ÔºåKafka ÁöÑ‰∏ªÈ¢òËÆæËÆ°Â§©ÁÑ∂Â∞±Êª°Ë∂≥Ëøô‰∏§‰∏™Êù°‰ª∂ÔºåÂõ†Ê≠§Ôºå‰ΩøÁî® Kafka ‰∏ªÈ¢òÊù•‰øùÂ≠ò‰ΩçÁßªËøô‰ª∂‰∫ãÊÉÖÔºåÂÆûÈôÖ‰∏äÂ∞±ÊòØ‰∏Ä‰∏™Ê∞¥Âà∞Ê∏†ÊàêÁöÑÊÉ≥Ê≥ï‰∫Ü„ÄÇ</p>
<p>‰ΩçÁßª‰∏ªÈ¢òÁöÑ Key ‰∏≠Â∫îËØ•‰øùÂ≠ò 3 ÈÉ®ÂàÜÂÜÖÂÆπÔºögourpId, topic, partitionId</p>

        </div>
        
<blockquote class="post-copyright">
    <div class="content">
        
<span class="post-time">
    ÊúÄÂêéÊõ¥Êñ∞Êó∂Èó¥Ôºö<time datetime="2022-02-16T10:35:53.269Z" itemprop="dateUpdated">2022-02-16 18:35:53</time>
</span><br>


        
        ËΩ¨ËΩΩÊ≥®ÊòéÂá∫Â§ÑÔºåÂéüÊñáÂú∞ÂùÄÔºö<a href="/2021/12/08/kafka-notes/" target="_blank" rel="external">https://github.com/missionOdd/2021/12/08/kafka-notes/</a>
        
    </div>
    <div class="mdui-chip" id="accost-btn">
      <span class="mdui-chip-icon mdui-color-red-a700"><i class="mdui-icon material-icons">&#xe311;</i></span>
      <span class="mdui-chip-title">Accost</span>
    </div>
    <footer>
      <div class="mdui-chip">
        <a href="https://github.com/missionOdd">
            <img src="/img/avatar.jpg" alt="Missionary">
             About Missionary
        </a>
        </div>
    </footer>
</blockquote>


        
            <div class="page-reward">
    <a id="rewardBtn" href="javascript:;" class="page-reward-btn waves-effect waves-circle waves-light">Ëµè</a>
</div>

            
        
        <div class="post-footer">
            
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/kafka/">kafka</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ÂéüÁêÜ/">ÂéüÁêÜ</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ÊäÄÊúØ/">ÊäÄÊúØ</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Ê∂àÊÅØÈòüÂàó/">Ê∂àÊÅØÈòüÂàó</a></li></ul>

            <div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://github.com/missionOdd/2021/12/08/kafka-notes/&title=„ÄäÊ∂àÊÅØÈòüÂàó| kafka‰∏≠Èó¥‰ª∂ÂéüÁêÜ && Áü•ËØÜÁÇπ„Äã ‚Äî üéâ Missionary's Blog üòÜ&pic=https://github.com/missionOdd/img/avatar.jpg" data-title="ÂæÆÂçö">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="ÂæÆ‰ø°">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://github.com/missionOdd/2021/12/08/kafka-notes/&title=„ÄäÊ∂àÊÅØÈòüÂàó| kafka‰∏≠Èó¥‰ª∂ÂéüÁêÜ && Áü•ËØÜÁÇπ„Äã ‚Äî üéâ Missionary's Blog üòÜ&source=WebÂêéÁ´Ø/JavaÂú®Â≠¶/ÂçïË∫´" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>

        </div>
        
            <div class="mdui-container">
  <div class="mdui-tab" id="tab">
    <a href="#tab1-content" id="tab1" class="mdui-ripple">Ê∏∏ÂÆ¢Áî®Êà∑</a>
    <a href="#tab2-content" id="tab2" class="mdui-tab-active mdui-ripple">GitHubË¥¶Êà∑</a>
  </div>

  <div id="tab1-content" class="mdui-p-a-2">
    
      <div id="comment" style=""></div>

  </div>
  <div id="tab2-content" class="mdui-p-a-2">
    
          
    <div onclick="ShowGitment()" id="gitment-display-button" style="display: block;">
        <span>ÊòæÁ§∫ Gitment ËØÑËÆ∫</span>
    </div>
    <div id="gitment" class="hide"></div>


    
  </div>

</div>

        
    </div>
    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="prev">
      <a href="/2021/12/10/os-notes/" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">Êìç‰ΩúÁ≥ªÁªü | Á°¨Ê†∏ÂõæÊñáËÆ≤Ëß£</h4>
      </a>
    </div>
  

  
    <div class="next">
      <a href="/2021/12/06/tomcat-architecture/" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">TomcatÊû∂ÊûÑÂéüÁêÜËß£ÊûêÂà∞Êû∂ÊûÑËÆæËÆ°ÂÄüÈâ¥</h4>
      </a>
    </div>
  
</nav>


    
    
        <aside class="post-widget">
            <nav class="post-toc-wrap" id="post-toc">
                <strong>ÁõÆÂΩï</strong>
                <ol class="post-toc"><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#Ê∂àÊÅØÈòüÂàó"><span class="post-toc-number">1.</span> <span class="post-toc-text">Ê∂àÊÅØÈòüÂàó</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#NSQ"><span class="post-toc-number">1.0.1.</span> <span class="post-toc-text">NSQ</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#ÁâπÊÄßÔºö"><span class="post-toc-number">1.0.1.1.</span> <span class="post-toc-text">ÁâπÊÄßÔºö</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#ÊãÖ‰øùÔºö"><span class="post-toc-number">1.0.1.2.</span> <span class="post-toc-text">ÊãÖ‰øùÔºö</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#ÁªìÊûÑÔºö"><span class="post-toc-number">1.0.1.3.</span> <span class="post-toc-text">ÁªìÊûÑÔºö</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#kafka"><span class="post-toc-number">1.0.2.</span> <span class="post-toc-text">kafka</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#ÁâπÊÄßÔºö-1"><span class="post-toc-number">1.0.2.1.</span> <span class="post-toc-text">ÁâπÊÄßÔºö</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#KafkaÊû∂ÊûÑ"><span class="post-toc-number">1.0.2.2.</span> <span class="post-toc-text">KafkaÊû∂ÊûÑ</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#KafkaÊãìÊâëÁªìÊûÑ"><span class="post-toc-number">1.0.2.3.</span> <span class="post-toc-text">KafkaÊãìÊâëÁªìÊûÑ</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Topic-amp-Partition"><span class="post-toc-number">1.0.2.4.</span> <span class="post-toc-text">Topic &amp; Partition</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#ProducerÊ∂àÊÅØË∑ØÁî±"><span class="post-toc-number">1.0.2.5.</span> <span class="post-toc-text">ProducerÊ∂àÊÅØË∑ØÁî±</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Consumer-Group"><span class="post-toc-number">1.0.2.6.</span> <span class="post-toc-text">Consumer Group</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#NSQ-vs-Kafka"><span class="post-toc-number">1.0.3.</span> <span class="post-toc-text">NSQ vs Kafka</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#Âü∫Á°ÄÊû∂ÊûÑ"><span class="post-toc-number">2.</span> <span class="post-toc-text">Âü∫Á°ÄÊû∂ÊûÑ</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#KafkaServer"><span class="post-toc-number">2.1.</span> <span class="post-toc-text">KafkaServer</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#1-Êû∂ÊûÑ"><span class="post-toc-number">2.2.</span> <span class="post-toc-text">1. Êû∂ÊûÑ</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1-1-Ê¶ÇÂøµ"><span class="post-toc-number">2.2.1.</span> <span class="post-toc-text">1.1 Ê¶ÇÂøµ</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1-2-ÈÄªËæëÊû∂ÊûÑ"><span class="post-toc-number">2.2.2.</span> <span class="post-toc-text">1.2 ÈÄªËæëÊû∂ÊûÑ</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1-3-Áâ©ÁêÜÊû∂ÊûÑ"><span class="post-toc-number">2.2.3.</span> <span class="post-toc-text">1.3 Áâ©ÁêÜÊû∂ÊûÑ</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#1-3-1-ÈõÜÁæ§Áâ©ÁêÜÊû∂ÊûÑ"><span class="post-toc-number">2.2.3.1.</span> <span class="post-toc-text">1.3.1 ÈõÜÁæ§Áâ©ÁêÜÊû∂ÊûÑ</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#1-3-2-‰∏Ä‰∏™ÂâØÊú¨ÁõÆÂΩïÁªìÊûÑ"><span class="post-toc-number">2.2.3.2.</span> <span class="post-toc-text">1.3.2 ‰∏Ä‰∏™ÂâØÊú¨ÁõÆÂΩïÁªìÊûÑ</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1-4-‰ª£Á†ÅÊû∂ÊûÑ"><span class="post-toc-number">2.2.4.</span> <span class="post-toc-text">1.4 ‰ª£Á†ÅÊû∂ÊûÑ</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#1-4-1-Á∫øÁ®ãÊ±†"><span class="post-toc-number">2.2.4.1.</span> <span class="post-toc-text">1.4.1 Á∫øÁ®ãÊ±†</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#1-4-2-Â§ÑÁêÜrequestÁöÑÁªÑ‰ª∂"><span class="post-toc-number">2.2.4.2.</span> <span class="post-toc-text">1.4.2 Â§ÑÁêÜrequestÁöÑÁªÑ‰ª∂</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#2-ÂèØÁî®ÊÄß„ÄÅÂèØÈù†ÊÄß‰øùÈöú"><span class="post-toc-number">2.3.</span> <span class="post-toc-text">2. ÂèØÁî®ÊÄß„ÄÅÂèØÈù†ÊÄß‰øùÈöú</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2-1-ÈõÜÁæ§È´òÂèØÁî®ÊÄß"><span class="post-toc-number">2.3.1.</span> <span class="post-toc-text">2.1 ÈõÜÁæ§È´òÂèØÁî®ÊÄß</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2-2-Ê∂àÊÅØÂèØÈù†ÊÄß‰∏é‰∏ÄËá¥ÊÄß"><span class="post-toc-number">2.3.2.</span> <span class="post-toc-text">2.2 Ê∂àÊÅØÂèØÈù†ÊÄß‰∏é‰∏ÄËá¥ÊÄß</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#2-2-1-producer-ACKs"><span class="post-toc-number">2.3.2.1.</span> <span class="post-toc-text">2.2.1 producer.ACKs</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#2-2-2-HWÂíåLEO"><span class="post-toc-number">2.3.2.2.</span> <span class="post-toc-text">2.2.2 HWÂíåLEO</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#3-Â∏∏ËßÅÁöÑÈÄâ‰∏æ„ÄÅÂàÜÈÖç„ÄÅRebalance"><span class="post-toc-number">2.4.</span> <span class="post-toc-text">3. Â∏∏ËßÅÁöÑÈÄâ‰∏æ„ÄÅÂàÜÈÖç„ÄÅRebalance</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#3-1-ControllerÈÄâ‰∏æ"><span class="post-toc-number">2.4.1.</span> <span class="post-toc-text">3.1 ControllerÈÄâ‰∏æ</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#3-2-ConsumerÂêØÂä®Ëß¶ÂèëRebalance"><span class="post-toc-number">2.4.2.</span> <span class="post-toc-text">3.2 ConsumerÂêØÂä®Ëß¶ÂèëRebalance</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#3-3-Leader-ReplicaÂÆïÊú∫Ëß¶ÂèëRebalance"><span class="post-toc-number">2.4.3.</span> <span class="post-toc-text">3.3 Leader ReplicaÂÆïÊú∫Ëß¶ÂèëRebalance</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#3-4-topicÂàÜÈÖçÂà∞broker"><span class="post-toc-number">2.4.4.</span> <span class="post-toc-text">3.4 topicÂàÜÈÖçÂà∞broker</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#Áü•ËØÜÁÇπ"><span class="post-toc-number">3.</span> <span class="post-toc-text">Áü•ËØÜÁÇπ</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Èù¢ËØïÈ¢ò"><span class="post-toc-number">3.1.</span> <span class="post-toc-text">Èù¢ËØïÈ¢ò</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#ÊéßÂà∂Âô®Controller"><span class="post-toc-number">3.2.</span> <span class="post-toc-text">ÊéßÂà∂Âô®Controller</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#consumerÁÆ°ÁêÜoffset"><span class="post-toc-number">3.3.</span> <span class="post-toc-text">consumerÁÆ°ÁêÜoffset</span></a></li></ol></li></ol>
            </nav>
            <div class="toc-bar"><div>
        </aside>
    

</article>

    <div id="reward" class="page-modal reward-lay">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <h3 class="reward-title">
        <i class="icon icon-quote-left"></i>
        Êàë‰ª¨‰∏ÄËµ∑Êù•ËÆ©Ëøô‰∏™‰∏ñÁïåÊúâË∂£‰∏ÄÁÇπ
        <i class="icon icon-quote-right"></i>
    </h3>
    <div class="reward-content">
        
        <div class="reward-code">
            <img id="rewardCode" src="/img/reward-wechat.jpg" alt="ÊâìËµè‰∫åÁª¥Á†Å">
        </div>
        
        <label class="reward-toggle">
            <input id="rewardToggle" type="checkbox" class="reward-toggle-check"
                data-wechat="/img/reward-wechat.jpg" data-alipay="/img/reward-alipay.jpg">
            <div class="reward-toggle-ctrol">
                <span class="reward-toggle-item wechat">ÂæÆ‰ø°</span>
                <span class="reward-toggle-label"></span>
                <span class="reward-toggle-item alipay">ÊîØ‰ªòÂÆù</span>
            </div>
        </label>
        
    </div>
</div>

    

</div>

    </main>
    <footer class="footer ">
    
    <div class="top">
        
            <p>
    <span>LinksÔºö</span>
    
    <span class="blogroll-item">
        <a href="https://github.com/missionOdd" target="_blank">HOME</a>
    </span>
    
</p>

        
    </div>
    
    <div class="mdui-bottom-nav">
  <a href="javascript:;" class="mdui-ripple mdui-bottom-nav-active">
    <i class="mdui-icon material-icons">history</i>
    <label>Recents</label>
  </a>
  <a href="javascript:;" class="mdui-ripple">
    <i class="mdui-icon material-icons">favorite</i>
    <label>Favorites</label>
  </a>
  <a href="javascript:;" class="mdui-ripple">
    <i class="mdui-icon material-icons">&#xe80e;</i>
    <label>Hot</label>
  </a>

</div>
    <div class="bottom">
        <p>
            <span>
                Missionary &copy; 2018 - 2022
            </span>
           	
           	<span>
           		<a href="http://www.miitbeian.gov.cn/" target="_blank">Á≤§ICPÂ§á19008953Âè∑</a>
           	</span>
           	

            

            <span>
	            Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/codefine/hexo-theme-mellow" target="_blank">mellow</a>
            </span>
            

            
            <span>
	            Hosted by <a href="https://coding.net/pages" target="_blank">Coding Pages</a>
            </span>
            


        </p>
        <p>
          
              
<span class="site-uv" title="ÊÄªËÆøÂÆ¢Èáè">
    <i class="icon icon-user"></i>
    <i class="busuanzi-value" id="busuanzi_value_site_uv"></i>
</span>


<span class="site-pv" title="ÊÄªËÆøÈóÆÈáè">
    <i class="icon icon-eye"></i>
    <i class="busuanzi-value" id="busuanzi_value_site_pv"></i>
</span>


          
          <span id="timeDate">ËΩΩÂÖ•Â§©Êï∞...</span><span id="times">ËΩΩÂÖ•Êó∂ÂàÜÁßí...</span>
          <script>
              var now = new Date();
              function createtime() {
                  var grt= new Date("09/15/2018 12:49:00");//Ê≠§Â§Ñ‰øÆÊîπ‰Ω†ÁöÑÂª∫Á´ôÊó∂Èó¥ÊàñËÄÖÁΩëÁ´ô‰∏äÁ∫øÊó∂Èó¥
                  now.setTime(now.getTime()+250);
                  days = (now - grt ) / 1000 / 60 / 60 / 24; dnum = Math.floor(days);
                  hours = (now - grt ) / 1000 / 60 / 60 - (24 * dnum); hnum = Math.floor(hours);
                  if(String(hnum).length ==1 ){hnum = "0" + hnum;} minutes = (now - grt ) / 1000 /60 - (24 * 60 * dnum) - (60 * hnum);
                  mnum = Math.floor(minutes); if(String(mnum).length ==1 ){mnum = "0" + mnum;}
                  seconds = (now - grt ) / 1000 - (24 * 60 * 60 * dnum) - (60 * 60 * hnum) - (60 * mnum);
                  snum = Math.round(seconds); if(String(snum).length ==1 ){snum = "0" + snum;}
                  document.getElementById("timeDate").innerHTML = "Êú¨Á´ôÂ∑≤ÂÆâÂÖ®ËøêË°å "+dnum+" Â§© ";
                  document.getElementById("times").innerHTML = hnum + " Â∞èÊó∂ " + mnum + " ÂàÜ " + snum + " Áßí";
              }
          setInterval("createtime()",250);
          </script>
        </p>
    </div>

</footer>

    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light mdui-ripple"><span class="icon icon-lg icon-chevron-up"></span></a>



<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://github.com/missionOdd/2021/12/08/kafka-notes/&title=„ÄäÊ∂àÊÅØÈòüÂàó| kafka‰∏≠Èó¥‰ª∂ÂéüÁêÜ && Áü•ËØÜÁÇπ„Äã ‚Äî üéâ Missionary's Blog üòÜ&pic=https://github.com/missionOdd/img/avatar.jpg" data-title="ÂæÆÂçö">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="ÂæÆ‰ø°">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://github.com/missionOdd/2021/12/08/kafka-notes/&title=„ÄäÊ∂àÊÅØÈòüÂàó| kafka‰∏≠Èó¥‰ª∂ÂéüÁêÜ && Áü•ËØÜÁÇπ„Äã ‚Äî üéâ Missionary's Blog üòÜ&source=WebÂêéÁ´Ø/JavaÂú®Â≠¶/ÂçïË∫´" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>Êâ´‰∏ÄÊâ´ÔºåÂàÜ‰∫´Âà∞ÂæÆ‰ø°</p>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMYAAADGCAAAAACs8KCBAAACMElEQVR42u3aQY6EMAwFUe5/aUbqbYtQ34ZRJ6msEEKQx8JybB8HXudnfV+TO+dwXT1zvLFkyJAxLYN/5vv5MWP8hvHX+d5kyJCxD6MTZMdv4D+F/KDL+zJkyJCBQyFHpqFZhgwZMvoHV7JpfvaUIUOGjNohthNSOfL1s7gMGTImZHQaA29f/1N/Q4YMGT/MOEuLg0nRjYfXy/3IkCFjacbV6zrB9+ptHMAbpTd1OxkyZCzH6JfA0uQv/e7NzmXIkLEo49lwWSuWdcY4jjeivgwZMn6M0Wkr8lGwTtgtpokyZMhYiME3xwN0GnxJYEU9WBkyZGzAqN1JS288BAdBX4YMGdswaskfD77pjESQPsqQIWNpBg+pJBDXRihqe4gTRBkyZEzOSDdX+3yx8od3IkOGjLUZ/OiYthL5RtPiXZxpypAhY1pGfwCCHHf56Fj6jAwZMnZg9Ae5SIDul9WCnFGGDBnLMUhxnxTUSLmNk9JGqQwZMtZm9AcmeMqYNib5MzJkyNiHQQIuCcc81esMZwRVQxkyZCzESANu53jMk9Gg8SBDhoylGbUNdQDpsbn2vAwZMtZgnOEaNzhrAZTzLn+NDBkylmbUAm5tjbebtgQeSA1lyJAxFaM2YEGQtXSwWPiTIUPGBoz04MpHJZ5K7G54MmTIkIFJ/fJc7Q0yZMiQMW5Apk3KZxNQGTJk7MMgh1j+4VqzIU03ZciQsQ+jP2xBDqUEQ7bbmhyRIUPGfIw/kc+yUMVrezwAAAAASUVORK5CYII=" alt="ÂæÆ‰ø°ÂàÜ‰∫´‰∫åÁª¥Á†Å">
</div>



    
   <canvas class="fireworks" style="position: fixed;left: 0;top: 0;z-index: 1; pointer-events: none;" ></canvas>
   <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/animejs/2.2.0/anime.min.js"></script>
   <script type="text/javascript" src="/js/plugins/fireworks.js?v=1.4.4"></script>


    <!-- main-js -->
<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.0/jquery.min.js"></script>
<script type="text/javascript" src="/js/plugins/fastclick.js?v=1.4.4"></script>
<script type="text/javascript" src="/js/plugins/ios-orientationchange-fix.js?v=1.4.4"></script>
<script type="text/javascript" src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.2/dist/jquery.fancybox.min.js"></script>

<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/node-waves/0.7.4/waves.min.js"></script>

<script type="text/javascript" src="/js/method.js?v=1.4.4"></script>
<script type="text/javascript" src="/js/blog.js?v=1.4.4"></script>

<!-- third-party -->




<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?18b812f3375b09bd66be7e3a46d7cc2d";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>



<script type="text/javascript" src="/js/plugins/local_search.js?v=1.4.4"></script>
<script type="text/javascript">
	var search_path = "search.xml";
	if (search_path.length === 0) {
		search_path = "search.xml";
	}
	var path = "/" + search_path;
	searchFunc(path, "local-search-input", "local-search-result");
</script>



<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




    
        <script type="text/javascript" src="//unpkg.com/valine/dist/Valine.min.js"></script>
<script type="text/javascript" src="/js/plugins/valine.js?v=1.4.4"></script>

    
    
        <script type="text/javascript" src="/js/plugins/gitmint.browser.js?v=1.4.4"></script>
<script type="text/javascript" src="/js/plugins/gitment.js?v=1.4.4"></script>
    





    <!-- mathjax config similar to math.stackexchange -->
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
            processEscapes: true,
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>




    <script>
    (function() {
        var OriginTitile = document.title, titleTime;
        document.addEventListener('visibilitychange', function() {
            if (document.hidden) {
                document.title = 'Á≠â‰Ω†ÂõûÊù•ÔºÅ';
                clearTimeout(titleTime);
            } else {
                document.title = '(„Å§„Çß‚äÇ)Ê¨¢Ëøé!';
                titleTime = setTimeout(function() {
                    document.title = OriginTitile;
                },2000);
            }
        });
    })();
</script>




    <script type="text/javascript">
  daovoice('init', {
    app_id: "8997440a"
  });
  daovoice('update');
</script>


    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.0/jquery.min.js"></script>
<script type="text/javascript" src="/js/custom.js?v=1.4.4"></script>
<script src="//cdnjs.loli.net/ajax/libs/mdui/0.4.1/js/mdui.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe-ui-default.min.js"></script>

<script type="text/javascript">
jQuery.noConflict();     //Â∞ÜÂèòÈáè$ÁöÑÊéßÂà∂ÊùÉËÆ©Ê∏°
</script>
<script type="text/javascript" color="213,0,0" opacity='0.7' zIndex="-2" count="60" src="//cdnjs.cloudflare.com/ajax/libs/canvas-nest.js/1.0.1/canvas-nest.min.js"></script>
<!-- <script type="text/javascript">

jQuery(function($){


});
</script> -->

</body>
</html>
