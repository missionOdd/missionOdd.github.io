<!DOCTYPE html>
<html>
<!--
„ÄÄ„ÄÄ„ÄÄ„ÄÄ„ÄÄ„ÄÄ„ÄÄ„ÄÄ  „ÄÄ„ÄÄ„ÄÄ/„ÉΩ„ÄÄ„ÄÄ„ÄÄ„ÄÄ„ÄÄ„ÄÄ/„ÉΩ
„ÄÄ„ÄÄ„ÄÄ„ÄÄ„ÄÄ„ÄÄ „ÄÄ„ÄÄ „ÄÄ„ÄÄ/ „ÄÄ„ÉΩ„ÄÄ„ÄÄ„ÄÄ „ÄÄ / „ÄÄ„ÉΩ
„ÄÄ   „ÄÄÔºøÔºøÔºøÔºøÔºøÔºø / „ÄÄ „ÄÄ „ÉΩÔºøÔºø/„ÄÄ „ÄÄ „ÄÄ„ÉΩ
„ÄÄ   „ÄÄ|„ÄÄÔºøÔºøÔºøÔºøÔºè„ÄÄ„ÄÄ„ÄÄ „ÄÄ „ÄÄ „ÄÄ„ÄÄ   :::::::::Ôºº
  „ÄÄ„ÄÄ| |„ÄÄ„ÄÄ„ÄÄ„ÄÄ / Ôºè„ÄÄ„ÄÄ„ÄÄ„ÄÄ„ÄÄ„ÄÄÔºº „ÄÄ „ÄÄ::::::::::::|
„ÄÄ „ÄÄ| |„ÄÄQQ„ÄÄ„ÄÄ„ÄÄ| Ôºà ‚óèÔºâ„ÄÄ„ÄÄ„ÄÄ Ôºà‚óèÔºâ  „ÄÄ ::::::::::::|
„ÄÄ„ÄÄ| |191965461 |„ÄÄ „ÄÄ„ÄÄ„ÄÄ „ÄÄ„ÄÄ„ÄÄ„ÄÄ  „ÄÄ:::::::::::::|    Êú¨‰∫∫‰∏Ä‰ª£Á†ÅËèúÈÄº
„ÄÄ„ÄÄ| |„ÄÄ„ÄÄ„ÄÄ„ÄÄ „ÄÄ|„ÄÄ „ÄÄÔºà__‰∫∫__‰∏ø   „ÄÄ.....:::::::::::::/   1998Áîü
   | |ÔºøÔºøÔºøÔºø„ÄÄ„ÉΩ„ÄÄ„ÄÄ„ÄÄ„ÄÄ„ÄÄ    .....::::::::::::::::::::<    ÂÆÖ
„ÄÄ ‚îîÔºøÔºøÔºøÔºèÔø£Ôø£„ÄÄ„ÄÄ„ÄÄ„ÄÄ„ÄÄ„ÄÄ    „ÄÄ:::::::::::::::::::::::::|  Ê¨¢ËøéÂãæÊê≠
„ÄÄ„ÄÄ|Ôºº„ÄÄ„ÄÄ„ÄÄ |„ÄÄ„ÄÄ„ÄÄ„ÄÄ„ÄÄ„ÄÄ„ÄÄ„ÄÄ„ÄÄ„ÄÄ„ÄÄ„ÄÄ:::::::::::::::::::::|
„ÄÄ„ÄÄÔºº Ôºº„ÄÄ„ÄÄÔººÔºøÔºøÔºø„ÄÄ„ÄÄ„ÄÄ„ÄÄ „ÄÄ„ÄÄ ::::::::::::::::::::::::|

-->
<head><meta name="generator" content="Hexo 3.9.0">
    <meta charset="utf-8">
    
    
    <title>Âπ∂ÂèëÁºñÁ®ã| volatile&amp;ÈîÅÂçáÁ∫ß&amp;DCL&amp;Á∫øÁ®ãÊ±†Ë∞É‰ºò | üéâ Missionary&#39;s Blog üòÜ | Missionary ‰∏≠ÂõΩ üëã</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="keywords" content="ÊäÄÊúØ,ÂéüÁêÜ,È´òÂπ∂Âèë">
    <link rel="shortcut icon" href="/img/favicon.ico">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.2/dist/jquery.fancybox.min.css">
    <link rel="stylesheet" href="/css/style.css?v=1.4.4">

    
        <link rel="stylesheet" href="/css/third-party/gitment.css?v=1.4.4">
    
    <script type="text/javascript">
        // Data Center
        var DC = {
            reward:	true,
            lv: JSON.parse('{"enable":false,"app_id":"7yVfPXhFH02yrjkOWJ2agpo6-gzGzoHsz","app_key":"CGsuOukhiIkc4nE75fKtUtXy","icon":true}'),
            v: JSON.parse('{"enable":true,"appid":"7yVfPXhFH02yrjkOWJ2agpo6-gzGzoHsz","appkey":"CGsuOukhiIkc4nE75fKtUtXy","notify":true,"verify":true,"placeholder":"give me some sugers plz...","avatar":"wavatar","highlight":true}'),
            g: JSON.parse('{"enable":true,"lazy":true,"owner":"missionOdd","repo":"FAQ","oauth":{"client_id":"3dffefee0452a0a23205","client_secret":"1b1394230850e312a0a178bdd41c4e70893d759f"},"perPage":6}'),
            d: JSON.parse('{"app_id":"8997440a"}')
        };
    </script>
    <script type="text/javascript">
        window.lazyScripts=[];
    </script>
    
        <script type="text/javascript" src="/js/plugins/daovoice.js?v=1.4.4"></script>
    

<link rel="alternate" href="/atom.xml" title="üéâ Missionary's Blog üòÜ" type="application/atom+xml">
</head>

<script src="//cdnjs.cat.net/ajax/libs/pace/1.0.2/pace.min.js"></script>
<link href="//cdnjs.cat.net/ajax/libs/pace/1.0.2/themes/pink/pace-theme-flash.css" rel="stylesheet">
<link rel="stylesheet" href="//cdnjs.loli.net/ajax/libs/mdui/0.4.1/css/mdui.min.css">
<link rel="stylesheet"  href="//cdnjs.cat.net/ajax/libs/animate.css/3.5.2/animate.min.css">
<link rel="stylesheet" href="/css/custom.css?v=1.4.4">
<link href="//cdnjs.cat.net/ajax/libs/photoswipe/4.1.2/photoswipe.css" rel="stylesheet">
<link href="//cdnjs.cat.net/ajax/libs/photoswipe/4.1.2/default-skin/default-skin.css" rel="stylesheet">

<body>
    <div id="loading" class="active mdui-progress">
  <div class="mdui-progress-determinate"></div>
</div>

    <aside id="menu" class="">
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap">
      
      <img src="/img/brand.jpg" class="brand-bg">
      
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light rubberBand ">
          <img src="/img/avatar.jpg">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">Missionary</h5>
          <a href="mailto:z1165996866@hotmail.com" title="z1165996866@hotmail.com" class="mail">
            
              <span>z</span>
            
              <span>1</span>
            
              <span>1</span>
            
              <span>6</span>
            
              <span>5</span>
            
              <span>9</span>
            
              <span>9</span>
            
              <span>6</span>
            
              <span>8</span>
            
              <span>6</span>
            
              <span>6</span>
            
              <span>@</span>
            
              <span>h</span>
            
              <span>o</span>
            
              <span>t</span>
            
              <span>m</span>
            
              <span>a</span>
            
              <span>i</span>
            
              <span>l</span>
            
              <span>.</span>
            
              <span>c</span>
            
              <span>o</span>
            
              <span>m</span>
            
          </a>
          <a href="/atom.xml" rel="alternate" class="mdui-btn mdui-btn-dense mdui-color-theme-accent mdui-ripple">
              <i class="fa fa-rss"></i>
              RSSËÆ¢ÈòÖ
            </a>
        </hgroup>
        
        <ul class="menu-link">
          
              <li>
                <a href="https://github.com/missionOdd" target="_blank">
                  <i class="icon icon-lg icon-github"></i>
                </a>
              </li>
            
              <li>
                <a href="https://leetcode-cn.com/u/missionary" target="_blank">
                  <i class="icon icon-lg icon-gg-circle"></i>
                </a>
              </li>
            
        </ul>
        
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="">
              <a href="/" >
                <i class="icon icon-lg icon-home"></i>
                HOME
              </a>
            </li>
        
            <li class="">
              <a href="/photos" >
                <i class="icon icon-lg icon-camera"></i>
                PHOTOS
              </a>
            </li>
        
            <li class="">
              <a href="/books" >
                <i class="icon icon-lg icon-book"></i>
                BOOKS
              </a>
            </li>
        
            <li class="">
              <a href="/categories" >
                <i class="icon icon-lg icon-th-list"></i>
                CATEGORIES
              </a>
            </li>
        
            <li class="">
              <a href="/tags" >
                <i class="icon icon-lg icon-tags"></i>
                TAGS
              </a>
            </li>
        
            <li class="">
              <a href="/archives" >
                <i class="icon icon-lg icon-archives"></i>
                ARCHIVES
              </a>
            </li>
        
            <li class="">
              <a href="/about" >
                <i class="icon icon-lg icon-user"></i>
                ABOUT
              </a>
            </li>
        
            <li class="">
              <a href="https://github.com/missionOdd" target="_blank">
                <i class="icon icon-lg icon-github"></i>
                GITHUB
              </a>
            </li>
        
            <li class="">
              <a href="https://leetcode-cn.com/u/missionary/" target="_blank">
                <i class="icon icon-lg icon-gg-circle"></i>
                LEETCODE
              </a>
            </li>
        
            <li class="">
              <a href="http://weibo.com/missionodd" target="_blank">
                <i class="icon icon-lg icon-weibo"></i>
                WEIBO
              </a>
            </li>
        
            <li class="">
              <a href="/custom" >
                <i class="icon icon-lg icon-plus-square"></i>
                LINKS
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row clearfix">
        <a href="javascript:;" class="header-icon pull-left waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">
            <span>Âπ∂ÂèëÁºñÁ®ã| volatile&amp;ÈîÅÂçáÁ∫ß&amp;DCL&amp;Á∫øÁ®ãÊ±†Ë∞É‰ºò</span>
            
        </div>
        
        <a href="javascript:;" id="site_search_btn" class="header-icon pull-right waves-effect waves-circle waves-light">
            <i class="icon icon-lg icon-search"></i>
        </a>
        
    </div>
</header>
<header class="content-header post-header">
    <img src="/img/banner.jpg" class="header-bg">
    <div class="container fade-scale">
        <h1 class="title animated tada delay-5s">Âπ∂ÂèëÁºñÁ®ã| volatile&amp;ÈîÅÂçáÁ∫ß&amp;DCL&amp;Á∫øÁ®ãÊ±†Ë∞É‰ºò</h1>
        <h5 class="subtitle animated swing delay-5s">
            
                <time datetime="2022-03-23T04:50:37.000Z" itemprop="datePublished" class="page-time">
  2022-03-23
</time>


	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/ÊäÄÊúØ/">ÊäÄÊúØ</a><ul class="article-category-list-child"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/ÊäÄÊúØ/È´òÂπ∂Âèë/">È´òÂπ∂Âèë</a></li></ul></li></ul>


            
        </h5>
        
    </div>
    

</header>

<div id="site_search">
    <div class="search-title clearfix">
        <span class="pull-left">
          <i class="icon icon-lg icon-search"></i>
        </span>
        <input type="text" id="local-search-input" name="q" results="0" placeholder="search my blog..." class="form-control pull-left"/>
        <a href="javascript:;" class="close pull-right waves-effect waves-circle waves-light">
          <i class="icon icon-lg icon-close"></i>
        </a>
    </div>
    <div id="local-search-result"></div>
</div>



<div class="container body-wrap">
    <article id="post-concurrent-programming"
  class="post-article article-type-post" itemprop="blogPost">
    <div class="post-card">
        <h1 class="post-card-title">Âπ∂ÂèëÁºñÁ®ã| volatile&ÈîÅÂçáÁ∫ß&DCL&Á∫øÁ®ãÊ±†Ë∞É‰ºò</h1>
        <div class="post-meta">
          
            <time class="post-time" title="2022-03-23 12:50:37" datetime="2022-03-23T04:50:37.000Z"  itemprop="datePublished">2022-03-23</time>

            
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/ÊäÄÊúØ/">ÊäÄÊúØ</a><ul class="article-category-list-child"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/ÊäÄÊúØ/È´òÂπ∂Âèë/">È´òÂπ∂Âèë</a></li></ul></li></ul>



            

            
<span class="post-comments-counter" id="/2022/03/23/concurrent-programming/">
    <span class="post-meta-item-icon">
        <i class="icon icon-comment-o"></i>
    </span>
    
    <a href="/2022/03/23/concurrent-programming/#gitment-display-button" onclick="ShowGitment()">
        <span class="post-comments-count gitment-comments-count" itemprop="commentsCount"></span>
    </a>
</span>



    <span class="leancloud-comment">
        <i class="icon icon-comment-o"></i>
        <a href="/2022/03/23/concurrent-programming/#comment">
            <span class="valine-comment-count" data-xid="/2022/03/23/concurrent-programming/"></span>
        </a>
    </span>


            
        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            
            <h2 id="volatile"><a href="#volatile" class="headerlink" title="volatile"></a>volatile</h2><p>‰∏ÄÊòØ‰øùËØÅÂèØËßÅÊÄß„ÄÇ<br>‰∫åÊòØÁ¶ÅÊ≠¢Êåá‰ª§ÈáçÊãçÂ∫è„ÄÇ<br>ÂèØËßÅÊÄßÔºåÊòØËÆ©ÂÖ∂‰ªñÁ∫øÁ®ãÂèØËßÅÔºå‰∏ÄËà¨Êàë‰ª¨ÊòØÂ§öÊ†∏CPUÔºå‰∏ÄÊó¶volatile‰øÆÈ•∞ÁöÑÂèòÈáèË¢´‰∏Ä‰∏™CPU‰øÆÊîπÔºå‰øÆÊîπÂÆåÁöÑÂÄºÈúÄË¶ÅÁ´ãÂç≥Êé®ÈÄÅÂà∞‰∏ªÂ≠òÔºåÊé®ÈÄÅËøáÁ®ãË¶ÅÁªèËøá‰∏Ä‰∏™ÊÄªÁ∫ø„ÄÇÈÇ£‰πàÔºåÊàë‰ª¨ËØ¥ÁöÑÂèØËßÅÊÄßÂ∞±ÊòØ‰ΩìÁé∞Âú®ÊÄªÁ∫øËøô‰∏ÄÂ±Ç‰∏ä„ÄÇÂõ†‰∏∫ÔºåÊàë‰ª¨ÂÖ∂‰ªñÁöÑCPU‰∏ÄÁõ¥Âú®ÂóÖÊé¢ÊÄªÁ∫øÁöÑÊï∞ÊçÆÊµÅÈÄöÔºåÂú®ÁºìÂ≠ò‰∏ÄËá¥ÊÄßÁöÑ‰øùÈöú‰∏ãÔºå ËÉΩÂ§üÂóÖÊé¢Âà∞Êï∞ÊçÆÁöÑ‰øÆÊîπÔºåÁÑ∂ÂêéÔºåÂ¶ÇÊûúËá™Â∑±ÁöÑÁºìÂ≠òË°åÊúâËøôÊù°Êï∞ÊçÆÔºåÂ∞±ÁΩÆ‰∏∫Â§±Êïà„ÄÇ<br>Â¶ÇÊûú‰∏ãÊ¨°ÊúâÁ∫øÁ®ãÂØπËØ•Êï∞ÊçÆËØªÊàñÂÜôÔºåÈÇ£‰πàÂÆÉ‰ºöÂÖà‰ªé‰∏ªÂ≠òÊãâÂèñÊï∞ÊçÆ‰øùÂ≠òÂà∞CPUËá™Â∑±ÁöÑÁºìÂ≠òË°åÈáåËæπÔºåÁÑ∂ÂêéÂÜçÂÅöËøõ‰∏ÄÊ≠•Â§ÑÁêÜ„ÄÇ<br>Â∞±ÊòØÂóÖÊé¢ÂíåMESIÁºìÂ≠ò‰∏ÄËá¥ÊÄßÂçèËÆÆÂÖ±Âêå‰øùËØÅ‰∫ÜCPUÂ±ÇÁöÑÂèØËßÅÊÄß„ÄÇ<br>ÊÄªÁ∫øÂ¶Ç‰ΩïÁü•ÈÅìvolatile‰øÆÈ•∞Âë¢ÔºüÂÖ≥ÈîÆÁî®‰∫Ülock ÂâçÁºÄÁöÑÊåá‰ª§ÔºåÊúâ‰∏§Â±ÇÂê´‰πâ„ÄÇ‰∏Ä‰∏™ÊòØÂ∞ÜÊï∞ÊçÆÁöÑ‰øÆÊîπÊé®ÈÄÅÂà∞‰∏ªÂ≠òÔºå‰∏Ä‰∏™ÊòØlockÊåá‰ª§ËøáÊéßÂà∂ÊÄªÁ∫øÁöÑÊó∂ÂÄôÔºåÂÖ∂‰ªñCPU‰ºöÂóÖÊé¢lockÊåá‰ª§ÔºåÁÑ∂ÂêéÁΩÆÁºìÂ≠òË°åÂ§±Êïà„ÄÇ</p>
<p>Á¶ÅÊ≠¢Êåá‰ª§ÈáçÊéíÂ∫è<br>È¶ñÂÖàÔºåÂÆÉÊòØÁ¶ÅÊ≠¢Âú®ÁºñËØëÈò∂ÊÆµÔºåClassÁªìÊûÑ‰∏≠ÊñπÊ≥ïË°®ÁöÑÂ±ûÊÄßË°®ÁöÑCodeÂ±ûÊÄßÔºåÂ≠òÊîæÁùÄJVMÊåá‰ª§ÔºåÂú®ÁºñËØëÊúüÊó∂ÔºåvolatileÂ∞±ÂÆåÊàê‰∫Ü‰∏Ä‰∏™ÂÜÖÂ≠òÂ±èÈöúÁöÑÁºñËØë„ÄÇ<br>ÂØπ‰∫évolatileÁöÑÂÜôÔºåÂÜôÂâçÂä†ÂÖ•storeStoreÂ±èÈöúÔºå‰øùËØÅÂÜôÂÜôÈ°∫Â∫èÔºåÂÜôÂêéÂä†ÂÖ•storeLoadÔºå‰øùËØÅÂÖàÂÜôÂêéËØªÈ°∫Â∫èÔºõÂØπ‰∫évolatileÁöÑËØªÔºåÂú®Á¨¨‰∏Ä‰∏™ËØªÂêéÂä†ÂÖ•loadLoadÂ±èÈöúÔºå‰øùËØÅËØªËØªÈ°∫Â∫èÔºåËØªÂêéloadStoreÔºå‰øùËØÅÂÖàËØªÂêéÂÜôÈ°∫Â∫èÔºåStoreLoadËøôÊòØ‰∏™ÂÖ®ËÉΩÂûãÂ±èÈöúÔºåÂºÄÈîÄÂæàÂ§ßÔºåÂêåÊó∂ÂÖ∑ÊúâÂÖ∂‰ªñ3‰∏™Â±èÈöúÁöÑÊïàÊûú„ÄÇÊâßË°åËØ•Â±èÈöúÁöÑËä±ÈîÄÊØîËæÉÊòÇË¥µÔºåÂõ†‰∏∫Â§ÑÁêÜÂô®ÈÄöÂ∏∏Ë¶ÅÊääÂΩìÂâçÁöÑÂÜôÁºìÂÜ≤Âå∫ÁöÑÂÜÖÂÆπÂÖ®ÈÉ®Âà∑Êñ∞Âà∞[ÂÜÖÂ≠ò]‰∏≠ÔºàBuffer Fully FlushÔºå‰∏ÄËà¨‰∏ç‰ºöÂçïÁã¨‰ΩøÁî®„ÄÇ</p>
<blockquote>
<p>ÂºïÁî≥Ôºö<br>final ÂüüÁöÑÂÜô‰πãÂêéÔºåÊûÑÈÄ†ÂáΩÊï∞ return ‰πãÂâçÔºåÊèíÂÖ•‰∏Ä‰∏™ StoreStore Â±èÈöú„ÄÇ<br>Âú® ÂàùÊ¨°ËØª final ÂüüÊìç‰ΩúÁöÑÂâçÈù¢ÊèíÂÖ•‰∏Ä‰∏™ LoadLoad Â±èÈöú</p>
</blockquote>
<p>ÁâπÊÆäÊÉÖÂÜµ‰∏ãÔºåÂèØ‰ª•‰øùËØÅÂéüÂ≠êÊÄß„ÄÇ<br>Â¶ÇÊûúÊòØÂçïÊù°JVMÊåá‰ª§Â≠óËäÇÁ†ÅÔºåÂèØ‰ª•‰øùËØÅÂéüÂ≠êÊÄßÔºõÂ¶ÇÊûúÊòØÂ§öÊù°JVMÊåá‰ª§Â≠óËäÇÁ†ÅÔºå‰∏çËÉΩ‰øùËØÅÂéüÂ≠êÊÄßÔºõÔºàÂª∫ËÆÆÂà´Ê∑±ÂÖ•ÔºåÊÄïÊ∑±ÈóÆÂà∞Êåá‰ª§Âá∫ÂÖ•Ê†àÔºâ<br>Â¶ÇÊûúÊòØÂØπ flag = trueÁöÑËØªÂÜôÔºåÂèØ‰øùËØÅÔºåÂõ†‰∏∫ËØªÂíåÂÜôÈÉΩÊòØ1Êù°Êåá‰ª§Â≠óËäÇÁ†Å„ÄÇ<br>Â¶ÇÊûúa++Ôºå‰∏ç‰øùËØÅÔºåËøôÈáåÊ∂âÂèä‰∫Ü3Êù°JVMÊåá‰ª§Â≠óËäÇÁ†ÅÔºåiload ËØªÂèñaÔºåiadd ËøõË°åa+1Ôºåistore ÂÜôa„ÄÇ</p>
<p>‰∏ãÈù¢Ëøô‰∏™Á≠îÊ°àÊúâÁÇπ‰∏çÁêÜËß£Ôºö<br>read load use ‰Ωú‰∏∫‰∏ÄÁßçËØªÂéüÂ≠êÊìç‰Ωú<br>assign store write ‰Ωú‰∏∫‰∏ÄÁßçÂÜôÂéüÂ≠êÊìç‰Ωú<br>‰∏ªÂ≠òÂÄºreadÂà∞ÊâßË°åÂºïÊìéÔºåÊâßË°åÂºïÊìéÂÄºloadÂà∞‰∏Ä‰∏™Ê†àÂ≠òÂâØÊú¨ÂèòÈáèÔºåÊ†àÂ≠òÂÄºuse Âà∞ÊâßË°åÂºïÊìéÔºå‰ª•‰æøËÆ°ÁÆóÂ§ÑÁêÜÔºõ<br>ÊâßË°åÂºïÊìéÂÄº assignÂà∞Ê†àÂ≠òÂâØÊú¨ÂèòÈáèÔºåÊ†àÂ≠òÂâØÊú¨ÂÄºstoreÂà∞‰∏ªÂ≠òÔºå‰∏ªÂ≠òÂÄºwrite Âà∞‰∏ªÂ≠òÁöÑÂèòÈáèÔºå‰ª•‰æøÂÖ±‰∫´Ôºõ</p>
<p>ÂéüÂ≠êÊìç‰ΩúÈÅøÂÖç ËØªËøáÁ®ã Êàñ ÂÜôËøáÁ®ã Âú®‰∏≠Èó¥Êìç‰ΩúË¢´ÊâìÊñ≠„ÄÇ<br>ËôΩÁÑ∂use ÂíåassignÂ≠òÂú® Ë¢´ÊâìÊñ≠ÁöÑÂèØËÉΩÔºå‰ΩÜÂ∑•‰ΩúÂÜÖÂ≠òÂíå‰∏ªÂÜÖÂ≠ò‰æùÊóßÊÉ≥Á≠â„ÄÇ<br>    Âõ†Ê≠§Âú®Â§öÁ∫øÁ®ãÂÜÖÔºåÈÄÇÂêàflagËµãÂÄºÔºå‰∏çÈÄÇÂêàa++Á≠âÈùûÂéüÂ≠êÊìç‰ΩúÔºåËøêÁÆóÁªìÊûúa‰ºöÂØπ‰∏≠Èó¥Âä†Êï∞a‰∫ßÁîü‰æùËµñ„ÄÇ</p>
<blockquote>
<p><strong>JavaÂÜÖÂ≠òÊ®°ÂûãÂç≥Java Memory ModelÔºåÁÆÄÁß∞JMM„ÄÇ</strong><br><strong>JMMÂÆö‰πâ‰∫ÜJava ËôöÊãüÊú∫(JVM)Âú®ËÆ°ÁÆóÊú∫ÂÜÖÂ≠ò(RAM)‰∏≠ÁöÑÂ∑•‰ΩúÊñπÂºè„ÄÇJVM ÊòØÊï¥‰∏™ËÆ°ÁÆóÊú∫ËôöÊãüÊ®°ÂûãÔºåÊâÄ‰ª• JMM ÊòØÈö∂Â±û‰∫é JVM ÁöÑ„ÄÇ</strong><br>‰∏Ä„ÄÅJVMÊûÑÊàêÔºö<br><strong>1„ÄÅÁ±ªÂä†ËΩΩÂô®ÔºàClassLoaderÔºâ</strong>:Âú® JVM ÂêØÂä®Êó∂ÊàñËÄÖÂú®Á±ªËøêË°åÂ∞ÜÈúÄË¶ÅÁöÑ class Âä†ËΩΩÂà∞JVM ‰∏≠„ÄÇ<br><strong>2„ÄÅÊâßË°åÂºïÊìé</strong>ÔºöË¥üË¥£ÊâßË°å class Êñá‰ª∂‰∏≠ÂåÖÂê´ÁöÑÂ≠óËäÇÁ†ÅÊåá‰ª§.<br><strong>3„ÄÅÂÜÖÂ≠òÂå∫Ôºà‰πüÂè´ËøêË°åÊó∂Êï∞ÊçÆÂå∫Ôºâ</strong>ÔºöÊòØÂú® JVM ËøêË°åÁöÑÊó∂ÂÄôÊìç‰ΩúÊâÄÂàÜÈÖçÁöÑÂÜÖÂ≠òÂå∫„ÄÇ<br><strong>Ôºà1Ôºâ„ÄÅÊñπÊ≥ïÂå∫(MethodArea)</strong>ÔºöÁî®‰∫éÂ≠òÂÇ®Á±ªÁªìÊûÑ‰ø°ÊÅØÁöÑÂú∞ÊñπÔºåÂåÖÊã¨Â∏∏ÈáèÊ±†„ÄÅÈùôÊÄÅÂ∏∏Èáè„ÄÅÊûÑÈÄ†ÂáΩÊï∞Á≠â„ÄÇËôΩÁÑ∂ JVM ËßÑËåÉÊääÊñπÊ≥ïÂå∫ÊèèËø∞‰∏∫Â†ÜÁöÑ‰∏Ä‰∏™ËæëÈÉ®ÂàÜÔºå ‰ΩÜÂÆÉÂç¥Êúâ‰∏™Âà´Âêçnon-heapÔºàÈùûÂ†ÜÔºâÔºåÊâÄ‰ª•Â§ßÂÆ∂‰∏çË¶ÅÊêûÊ∑∑Ê∑Ü‰∫Ü„ÄÇÊñπÊ≥ïÂå∫ËøòÂåÖÂê´‰∏Ä‰∏™ËøêË°åÊó∂Â∏∏ÈáèÊ±†„ÄÇ<br><strong>Ôºà2Ôºâ„ÄÅjava Â†Ü(Heap)</strong>ÔºöÂ≠òÂÇ® java ÂÆû‰æãÊàñËÄÖÂØπË±°ÁöÑÂú∞Êñπ„ÄÇËøôÂùóÊòØ GC ÁöÑ‰∏ªË¶ÅÂå∫Âüü„ÄÇ‰ªéÂ≠òÂÇ®ÁöÑÂÜÖÂÆπÊàë‰ª¨ÂèØ‰ª•ÂæàÂÆπÊòìÁü•ÈÅìÔºåÊñπÊ≥ïÂíåÂ†ÜÊòØË¢´ÊâÄÊúâ java Á∫øÁ®ãÂÖ±‰∫´ÁöÑ„ÄÇ<br><strong>Ôºà3Ôºâ„ÄÅjava Ê†à(Stack)</strong>Ôºöjava Ê†àÊÄªÊòØÂíåÁ∫øÁ®ãÂÖ≥ËÅîÂú®‰∏ÄËµ∑ÔºåÊØèÂΩìÂàõ‰∏Ä‰∏™Á∫øÁ®ãÊó∂ÔºåJVM Â∞±‰ºö‰∏∫Ëøô‰∏™Á∫øÁ®ãÂàõÂª∫‰∏Ä‰∏™ÂØπÂ∫îÁöÑ java Ê†àÂú®Ëøô‰∏™ java Ê†à‰∏≠,ÂÖ∂‰∏≠Âèà‰ºöÂåÖÂê´Â§ö‰∏™Ê†àÂ∏ßÔºåÊØèËøêË°å‰∏Ä‰∏™ÊñπÊ≥ïÂ∞±Âª∫‰∏Ä‰∏™Ê†àÂ∏ßÔºåÁî®‰∫éÂ≠òÂÇ®Â±ÄÈÉ®ÂèòÈáèË°®„ÄÅÊìç‰ΩúÊ†à„ÄÅÊñπÊ≥ïËøîÂõûÁ≠â„ÄÇÊØè‰∏Ä‰∏™<br>ÊñπÊ≥ï‰ªéË∞ÉÁî®Áõ¥Ëá≥ÊâßË°åÂÆåÊàêÁöÑËøáÁ®ãÔºåÂ∞±ÂØπÂ∫î‰∏ÄÊ†àÂ∏ßÂú® java Ê†à‰∏≠ÂÖ•Ê†àÂà∞Âá∫Ê†àÁöÑËøáÁ®ã„ÄÇÊâÄ‰ª• java Ê†àÊòØÁ∫øÁ®ãÊúâÁöÑ„ÄÇ<br><strong>Ôºà4Ôºâ„ÄÅÁ®ãÂ∫èËÆ°Êï∞Âô®(PCRegister)</strong>ÔºöÁî®‰∫é‰øùÂ≠òÂΩìÂâçÁ∫øÁ®ãÊâßË°åÁöÑÂÜÖÂ≠òÂú∞ÂùÄ„ÄÇÁî±‰∫é JVM Á®ãÂ∫èÊòØÂ§öÁ∫øÁ®ãÊâßË°åÁöÑÔºàÁ∫øÁ®ãËΩÆÊµÅÂàáÊç¢ÔºâÔºåÊâÄ‰ª•‰∏∫‰∫Ü‰øùËØÅÁ®ãÂàáÊç¢ÂõûÊù•ÂêéÔºåËøòËÉΩÊÅ¢Â§çÂà∞ÂéüÂÖàÁä∂ÊÄÅÔºåÂ∞±ÈúÄË¶Å‰∏Ä‰∏™Áã¨Á´ãËÆ°Êï∞Âô®ÔºåËÆ∞ÂΩï‰πãÂâç‰∏≠Êñ≠ÁöÑÂú∞ÊñπÔºåÂèØËßÅÁ®ãÂ∫èËÆ°Êï∞Âô®‰πüÊòØÁ∫øÁ®ãÁßÅÊúâÁöÑ„ÄÇ<br><strong>Ôºà5Ôºâ„ÄÅÊú¨Âú∞ÊñπÊ≥ïÊ†à(Native MethodStack)</strong>ÔºöÂíå java Ê†àÁöÑ‰ΩúÁî®Â∑Æ‰∏çÂ§öÔºåÂè™‰∏çËøáÊòØ‰∏∫ JVM ‰ΩøÁî®Âà∞ native ÊñπÊ≥ïÊúçÂä°ÁöÑ„ÄÇ<br><strong>4„ÄÅÊú¨Âú∞ÊñπÊ≥ïÊé•Âè£</strong>Ôºö‰∏ªË¶ÅÊòØË∞ÉÁî® C Êàñ C++ÂÆûÁé∞ÁöÑÊú¨Âú∞ÊñπÊ≥ïÂèäÂõûË∞ÉÁªìÊûú„ÄÇ<br><strong>ÂºÄÁ∫øÁ®ãÂΩ±ÂìçÂì™ÂùóÂÜÖÂ≠òÔºü</strong><br>ÊØèÂΩìÊúâÁ∫øÁ®ãË¢´ÂàõÂª∫ÁöÑÊó∂ÂÄôÔºåJVM Â∞±ÈúÄË¶Å‰∏∫ÂÖ∂Âú®ÂÜÖÂ≠ò‰∏≠ÂàÜÈÖçËôöÊãüÊú∫Ê†àÂíåÊú¨Âú∞ÊñπÊ≥ïÊ†àÊù•ËÆ∞ÂΩïË∞ÉÁî®ÊñπÊ≥ïÁöÑÂÜÖÂÆπÔºåÂàÜÈÖçÁ®ãÂ∫èËÆ°Êï∞Âô®ËÆ∞ÂΩïÊåá‰ª§ÊâßË°åÁöÑ‰ΩçÁΩÆÔºåËøôÊ†∑ÁöÑÂÜÖÂ≠òÊ∂àËÄóÂ∞±ÊòØÂàõÂª∫Á∫øÁ®ãÁöÑÂÜÖÂ≠ò‰ª£‰ª∑„ÄÇ<br>Java Á∫øÁ®ã‰πãÈó¥ÁöÑÈÄö‰ø°ÊÄªÊòØÈöêÂºèËøõË°åÔºåÂπ∂‰∏îÈááÁî®ÁöÑÊòØÂÖ±‰∫´ÂÜÖÂ≠òÊ®°Âûã„ÄÇËøôÈáåÊèêÂà∞ÁöÑÂÖ±‰∫´ÂÜÖÂ≠òÊ®°ÂûãÊåáÁöÑÂ∞±ÊòØ Java ÂÜÖÂ≠òÊ®°Âûã(ÁÆÄÁß∞ JMM)ÔºåJMM ÂÜ≥ÂÆö‰∏Ä‰∏™Á∫øÁ®ãÂØπÂÖ±‰∫´ÂèòÈáèÁöÑÂÜôÂÖ•‰ΩïÊó∂ÂØπÂè¶‰∏Ä‰∏™Á∫øÁ®ãÂèØËßÅ„ÄÇ‰ªéÊäΩË±°ÁöÑËßíÂ∫¶Êù•ÁúãÔºåJMM ÂÆö‰πâ‰∫ÜÁ∫øÁ®ãÂíå‰∏ªÂÜÖÂ≠ò‰πãÈó¥ÁöÑÊäΩË±°ÂÖ≥Á≥ªÔºöÁ∫øÁ®ã‰πãÈó¥ÁöÑÂÖ±‰∫´ÂèòÈáèÂ≠òÂÇ®Âú®‰∏ªÂÜÖÂ≠òÔºàmain memoryÔºâ‰∏≠ÔºåÊØè‰∏™Á∫øÁ®ãÈÉΩÊúâ‰∏Ä‰∏™ÁßÅÊúâÁöÑÊú¨Âú∞ÂÜÖÂ≠òÔºàlocal memoryÔºâÔºåÊú¨Âú∞ÂÜÖÂ≠ò‰∏≠Â≠òÂÇ®‰∫ÜËØ•Á∫øÁ®ã‰ª•ËØª/ÂÜôÂÖ±‰∫´ÂèòÈáèÁöÑÂâØÊú¨„ÄÇÊú¨Âú∞ÂÜÖÂ≠òÊòØ JMM ÁöÑ‰∏Ä‰∏™ÊäΩË±°Ê¶ÇÂøµÔºåÂπ∂‰∏çÁúüÂÆûÂ≠òÂú®„ÄÇÂÆÉÊ∂µÁõñ‰∫ÜÁºìÂ≠òÔºåÂÜôÁºìÂÜ≤Âå∫ÔºåÂØÑÂ≠òÂô®‰ª•ÂèäÂÖ∂‰ªñÁöÑÁ°¨‰ª∂ÂíåÁºñËØëÂô®‰ºòÂåñ„ÄÇÊÄª‰πãÔºåJMM Â∞±ÊòØ‰∏ÄÁªÑËßÑÂàôÔºåËøôÁªÑËßÑÂàôÊÑèÂú®Ëß£ÂÜ≥Âú®Âπ∂ÂèëÁºñÁ®ãÂèØËÉΩÂá∫Áé∞ÁöÑÁ∫øÁ®ãÂÆâÂÖ®ÈóÆÈ¢òÔºåÂπ∂Êèê‰æõ‰∫ÜÂÜÖÁΩÆËß£ÂÜ≥ÊñπÊ°àÔºàhappen-before ÂéüÂàôÔºâÂèäÂÖ∂Â§ñÈÉ®ÂèØ‰ΩøÁî®ÁöÑÂêåÊ≠•ÊâãÊÆµ(synchronized/volatile Á≠â)ÔºåÁ°Æ‰øù‰∫ÜÁ®ãÂ∫èÊâßË°åÂú®Â§öÁ∫øÁ®ãÁéØÂ¢É‰∏≠ÁöÑÂ∫îÊúâÁöÑÂéüÂ≠êÊÄßÔºåÂèØËßÜÊÄßÂèäÂÖ∂ÊúâÂ∫èÊÄß„ÄÇ</p>
</blockquote>
<p>ÊØîËæÉÔºö<br>synchronized  ‰∏ÄÂÆöÊù°‰ª∂ÊòØÈáçÈáèÁ∫ß+ÂèØÈáçÁî®ÈîÅ<br>‰ΩúÁî®Âà∞ÊôÆÈÄöÊñπÊ≥ï‰∏äÔºåÈùôÊÄÅÊñπÊ≥ï‰∏ä„ÄÇ<br>ÊôÆÈÄöÊñπÊ≥ïÊòØÂØπË±°ÈîÅÔºå<br>ÈùôÊÄÅÊñπÊ≥ïÊòØÂΩìÂâçclassÈîÅÔºõ</p>
<p>ÂØπÂçï‰∏™ÂÄºËØªÂÜôÔºå<br>ËØªÂ§öÂÜôÂ∞ëÔºåÁî®volatileÔºåÁºìÂ≠òË°åÁõ¥Êé•ËØªÔºõ<br>ËØªÂ∞ëÂÜôÂ§öÔºåÁî®sychronized‰ΩúÁî®Âà∞ËØªÂÜôÊñπÊ≥ï„ÄÇ<br>volatileÈîÅÊÄªÁ∫øÔºåCPUÂóÖÊé¢Ôºå‰º™ÂÖ±‰∫´ÈóÆÈ¢òÔºõ<br>sychronizedÂè™‰ºöÁ∫øÁ®ãÁöÑblockÁä∂ÊÄÅÔºåÊúâÁî®Êà∑ÊÄÅÂíåÂÜÖÊ†∏ÊÄÅÁöÑ‰∏ä‰∏ãÊñáÂàáÊç¢ÔºåÊúâ‰∏Ä‰∏™Á∫øÁ®ãÊâßË°åÁöÑËÆ∞ÂøÜÔºåËøô‰∏™ËøáÁ®ãËÄóËµÑÊ∫êËÄóÊó∂Èó¥ÔºåÊâÄ‰ª•ÊèêÂá∫CAS„ÄÇÂ¶ÇÊûúÂÜôËøáÁ®ãÁü≠ÔºåCPUÊâßË°åÈùûÂ∏∏Âø´ÔºåÁ∫øÁ®ãblockedÈùûÂ∏∏Áü≠„ÄÇ</p>
<p>ÊÄªÁªì<br>ÈáçÈáèÁ∫ßÈîÅËÉΩÊèêÈ´òÁ®ãÂ∫èÁöÑÂêûÂêêÈáè„ÄÇ</p>
<p>‚Äî‚Äî‚Äî‚Äî</p>
<h3 id="QÔºösynchronized-Âíå-lock-ÁöÑÂå∫Âà´Ôºü"><a href="#QÔºösynchronized-Âíå-lock-ÁöÑÂå∫Âà´Ôºü" class="headerlink" title="QÔºösynchronized Âíå lock ÁöÑÂå∫Âà´Ôºü"></a>QÔºösynchronized Âíå lock ÁöÑÂå∫Âà´Ôºü</h3><p>1ÔºåÂü∫Êú¨‰ΩøÁî®ÔºåÂÖ≥ÈîÆÂ≠óÔºõÊé•Âè£<br>    lockÊé•Âè£Êúâ6‰∏™ÊñπÊ≥ïÔºölockÔºåunlockÔºåtrylockÈùûÈòªÂ°ûÂä†ÈîÅÔºåtrylock(time)ÈùûÈòªÂ°ûÂèØË∂ÖÊó∂Âä†ÈîÅÔºålockInterruptiblyÂèØ‰∏≠Êñ≠Âä†ÈîÅÔºõ<br>    Rentrantlock ÂÆûÁé∞<br>2ÔºåÈöêÂºèÂä†ÈîÅÔºåÊòæÂºèÂä†ÈîÅ<br>    lockÂú®tryÈáåÔºåunlockÂú®finallyÈáå<br>3Ôºå‰ΩúÁî®ÊñπÊ≥ï‰∏äÂ§öÁßçÊñπÂºèÔºålockÂè™ËÉΩ‰ΩúÁî®Âà∞‰ª£Á†ÅÂùó<br>ÂØπ‰∫ésynchronized<br>    ÊôÆÈÄöÊñπÊ≥ïÔºåÈùôÊÄÅÊñπÊ≥ïÔºåÊñπÊ≥ïÂùó‰∏äÊúâ‰ªÄ‰πà‰∏çÂêå„ÄÇ<br>    ‰ª£Á†ÅÂùóÂèçÁºñËØëÂêåÊ≠•Êåá‰ª§ÔºåmonitorenterÔºåmonitorexitÔºõ<br>    ‰∏ÄÂÆöÊúâ‰∏§‰∏™Âá∫Âè£ÔºåÊ≠£Â∏∏ÂíåÂºÇÂ∏∏„ÄÇ<br>    ÊñπÊ≥ï‰∏ä‰ºöÊúâACC_SYNCHRONIZEDËÆøÈóÆÊ†áÂøó„ÄÇ</p>
<p>4Ôºålock ÊîØÊåÅÈùûÈòªÂ°ûÂºèÂä†ÈîÅÔºà‰ø°Âè∑ÈáèÔºâÔºåÊîØÊåÅÂèØË∂ÖÊó∂Âä†ÈîÅÔºåÊîØÊåÅÂèØ‰∏≠Êñ≠Âä†ÈîÅÔºõ<br>‰∏çÈòªÂ°ûÔºåÂ∞ë‰∏ÄÊ¨°‰∏ä‰∏ãÊñáÂàáÊç¢„ÄÇÂèØË∂ÖÊó∂ÂèØ‰∏≠Êñ≠ÔºåÊõ¥ÁÅµÊ¥ªÔºõ</p>
<p>5Ôºå‰ªéÂ∫ïÂ±ÇÂéüÁêÜÔºåsynchronized‰∏ÄÂÆöÊù°‰ª∂‰∏ã ÈááÁî®ÂØπË±°ÁõëËßÜÂô®monitorÔºålockÈááÁî®AQSÔºõ<br>Object ÁöÑmonitorÔºåÁ∫øÁ®ãÁ´û‰∫âÂ§±Ë¥•ÔºåË∞ÉÁî®waitÊñπÊ≥ïÈáäÊîæÈîÅÔºå‰ºöÊîæÂà∞Á≠âÂæÖÈòüÂàóÔºåÁ≠âÂæÖÂî§ÈÜíÔºåÂÜçËøõË°åÈîÅÁ´û‰∫âÔºå‰ºöÊîæÂà∞ÂêåÊ≠•ÈòüÂàó„ÄÇ</p>
<p>6ÔºåsynchronizedÂú®ËøõË°åÂä†ÈîÅËß£ÈîÅÊàñÈÄöÁü•Á≠âÂæÖÊó∂ÔºåÂè™Êúâ‰∏Ä‰∏™ÂêåÊ≠•ÈòüÂàóEntry Set ‰∏Ä‰∏™Á≠âÂæÖÈòüÂàóWait SetÔºõ<br>lockÊúâ‰∏Ä‰∏™ÂêåÊ≠•ÈòüÂàóEntry SetÔºåÂ§ö‰∏™Á≠âÂæÖÈòüÂàóWait SetÔºõ<br>ÂàõÂª∫‰∏Ä‰∏™conditionÂ∞±Â§ö‰∏Ä‰∏™Á≠âÂæÖÈòüÂàó<br>7ÔºåÈîÅÁ´û‰∫âÔºåsynchronizedÂè™ÊîØÊåÅÈùûÂÖ¨Âπ≥ÈîÅÔºålockÊîØÊåÅÂÖ¨Âπ≥ÈîÅÂíåÈùûÂÖ¨Âπ≥ÈîÅÔºõ<br>ÂØπ‰∫éÂú®ÊéíÈòüÁöÑAÁ∫øÁ®ãÔºåÊñ∞Êù•ÁöÑÁ∫øÁ®ãBÔºåABÁ´û‰∫âÊú∫‰ºöÁõ∏ÂêåÔºåÂØπA‰∏çÂÖ¨Âπ≥ÔºõÂ¶ÇÊûúAÊÄªÊòØË¢´ÊèíÈòüÔºåAÊÄªÊòØÂú®ÊéíÈòüÔºåAÂ∞±ÊòØÈ••È•øÁ∫øÁ®ã„ÄÇ<br>ÂØπ‰∫éÂú®ÊéíÈòüÁöÑAÁ∫øÁ®ãÔºåÊñ∞Êù•ÁöÑÁ∫øÁ®ãBÔºåBÂú®ÈòüÂàóÊú´Á´ØÊéíÈòüÔºåÂØπAÂÖ¨Âπ≥„ÄÇ</p>
<p>8ÔºåÁ≠âÂæÖÂî§ÈÜíÊú∫Âà∂Ôºåsychronized‰∏éObjectËøõË°åÈÖçÂêàÔºå‰ΩøÁî®notifyAllÊñπÊ≥ïÊìç‰ΩúÔºõlockÈúÄË¶ÅÁî®contditionÊé•Âè£ÈÖçÂêàÔºå‰πüÊòØwait/notifyÊú∫Âà∂ÔºåÂè™ÊòØÊñπÊ≥ïÂêç‰∏çÂêåawait/signalAll„ÄÇ<br>Â¶ÇÊûúÁ∫øÁ®ãËé∑ÂèñÈîÅÔºåÂπ∂conditionÁöÑawaitÊñπÊ≥ïÔºåÁ∫øÁ®ãÂéªÂì™Ôºü<br>Âú®awaitÊñπÊ≥ïÂâçÔºåÁ∫øÁ®ãÂä†ÂÖ•conditionÁöÑÁ≠âÂæÖÈòüÂàóÔºå‰∏çÈúÄË¶ÅCASÔºåÁõ¥Êé•Âä†ÔºåÊ≠§Êó∂ÊåÅÊúâÂΩìÂâçÈîÅÔºåËØ¥ÊòéËá™Â∑±Á´û‰∫âÊàêÂäü„ÄÇÂΩìË∞ÉÁî®awaitÂêéÔºåÂÆÉ‰ºöËøõË°åÈîÅÈáäÊîæ„ÄÇ<br>Âú∫ÊôØÔºöÁ∫øÁ®ãAËé∑ÂèñÈîÅÂêéÔºåË∞ÉÁî®waitÔºåAË¢´Âî§ÈÜíÔºåÁªßÁª≠ÊâßË°åÈáäÊîæ‰∫ÜÔºåAÁªèÂéÜ‰∫Ü‰ªÄ‰πàÔºü<br>waitÂâçÔºåAÊèêÂâçÂä†ÂÖ•conditionÁöÑÁ≠âÂæÖÈòüÂàóÂ∞æÈÉ®Ôºå‰∏çÈúÄCASÔºõÂΩìAÂú®ÈòüÂàóÂ§¥ÈÉ®ÔºåÂ∞±ÊòØË¢´Âî§ÈÜíÔºåÂ∞±‰ºöËøõË°å‰∏ÄËΩÆÁ∫øÁ®ãÁ´û‰∫âÔºåÂ¶ÇÊûúÁ´û‰∫âÂ§±Ë¥•Ôºå‰ºöÂä†ÂÖ•Âà∞ÈîÅÁöÑÂêåÊ≠•ÈòüÂàóÂ∞æÈÉ®ÔºåÈúÄË¶ÅCASÔºõAÊéíÈòüÂà∞Â§¥ÈÉ®ÔºåË¢´Âî§ÈÜíÔºåÁúãÂÖ¨Âπ≥ÈîÅËøòÊòØÈùûÂÖ¨Âπ≥ÈîÅÔºåÂ¶ÇÊûúÊòØÈùûÂÖ¨Âπ≥ÈîÅÔºåÂèØËÉΩËøò‰ºö‰øùÊåÅ‰∏ÄÊÆµÊó∂Èó¥È••È•øÔºåÂ¶ÇÊûúÊòØÂÖ¨Âπ≥ÈîÅÔºåÁõ¥Êé•Ëé∑ÂèñÈîÅÔºåÁõ¥Êé•Ë∑≥ËΩ¨waitÊñπÊ≥ïÈáäÊîæÔºåÁõ¥Âà∞ÊääÈîÅÈáäÊîæ„ÄÇ</p>
<figure class="image-box">
                <a rel=Âπ∂ÂèëÁºñÁ®ã| volatile&ÈîÅÂçáÁ∫ß&DCL&Á∫øÁ®ãÊ±†Ë∞É‰ºò href="image-20220305082139330.png" title="image-20220305082139330" data-fancybox="images"><img src="image-20220305082139330.png" alt="image-20220305082139330" title class></a>
                <p>image-20220305082139330</p>
            </figure>
<p>9Ôºå‰∏™ÊÄßÂåñÂÆöÂà∂ÊñπÈù¢ÔºåAQSÊòØ‰ΩøÁî®Ê®°ÁâàÊñπÊ≥ïÊ®°ÂºèÔºåÂèØ‰ª•Ëá™ÂÆö‰πâlock„ÄÇ<br>lock‰∏ãÁöÑËØªÂÜôÈîÅÔºåËÉΩÊîØÊåÅÂπ∂ÂèëËØªÔºåÊòØÂÖ±‰∫´Êéí‰ªñÈîÅ„ÄÇ<br>AQSÁöÑÂèØÈáçÂÜôÊñπÊ≥ïÔºåtryacquireShared /tryreleasesharedÔºåtryacquire/tryrelease</p>
<blockquote>
<p>ÊØè‰∏™ÂØπË±°ÈÉΩ‰∏é‰∏Ä‰∏™<strong>monitor</strong> Áõ∏ÂÖ≥ËÅî„ÄÇÂΩì‰∏î‰ªÖÂΩìÊã•ÊúâÊâÄÊúâËÄÖÊó∂ÔºàË¢´Êã•ÊúâÔºâÔºåmonitorÊâç‰ºöË¢´ÈîÅÂÆö„ÄÇÊâßË°åÂà∞monitorenterÊåá‰ª§ÁöÑÁ∫øÁ®ãÔºå‰ºöÂ∞ùËØïÂéªËé∑ÂæóÂØπÂ∫îÁöÑmonitorÔºåÂ¶Ç‰∏ãÔºö</p>
<blockquote>
<p>ÊØè‰∏™ÂØπË±°Áª¥Êä§ÁùÄ‰∏Ä‰∏™ËÆ∞ÂΩïÁùÄË¢´ÈîÅÊ¨°Êï∞ÁöÑËÆ°Êï∞Âô®, ÂØπË±°Êú™Ë¢´ÈîÅÂÆöÊó∂ÔºåËØ•ËÆ°Êï∞Âô®‰∏∫0„ÄÇÁ∫øÁ®ãËøõÂÖ•monitorÔºàÊâßË°åmonitorenterÊåá‰ª§ÔºâÊó∂Ôºå‰ºöÊääËÆ°Êï∞Âô®ËÆæÁΩÆ‰∏∫1.</p>
<p>ÂΩìÂêå‰∏Ä‰∏™Á∫øÁ®ãÂÜçÊ¨°Ëé∑ÂæóËØ•ÂØπË±°ÁöÑÈîÅÁöÑÊó∂ÂÄôÔºåËÆ°Êï∞Âô®ÂÜçÊ¨°Ëá™Â¢û.</p>
<p>ÂΩìÂÖ∂‰ªñÁ∫øÁ®ãÊÉ≥Ëé∑ÂæóËØ•monitorÁöÑÊó∂ÂÄôÔºåÂ∞±‰ºöÈòªÂ°ûÔºåÁõ¥Âà∞ËÆ°Êï∞Âô®‰∏∫0ÊâçËÉΩÊàêÂäü„ÄÇ</p>
</blockquote>
</blockquote>
<h2 id="ÈîÅÂçáÁ∫ßËØ¶Ëß£"><a href="#ÈîÅÂçáÁ∫ßËØ¶Ëß£" class="headerlink" title="ÈîÅÂçáÁ∫ßËØ¶Ëß£"></a>ÈîÅÂçáÁ∫ßËØ¶Ëß£</h2><blockquote>
<p><strong>synchronizedÈîÅÊúâÂõõÁßçÁä∂ÊÄÅÔºåÊó†ÈîÅÔºåÂÅèÂêëÈîÅÔºåËΩªÈáèÁ∫ßÈîÅÔºåÈáçÈáèÁ∫ßÈîÅ</strong></p>
</blockquote>
<blockquote>
<p><strong>Êó†ÈîÅÔºåÂÅèÂêëÈîÅÔºåËΩªÈáèÁ∫ßÈîÅÔºàCASÔºâÈÉΩÊòØÂú®Áî®Êà∑Á©∫Èó¥ÂÆåÊàê</strong><br><strong>ÈáçÈáèÁ∫ßÈîÅÊòØÈúÄË¶ÅÂêëÂÜÖÊ†∏Áî≥ËØ∑ÁöÑ</strong></p>
</blockquote>
<p>ÁÆÄÂçïÁöÑËÆ≤Ôºö<br><strong>ÂΩìÁ∫øÁ®ãAÂêØÂä®ÂêéÔºåËé∑Âæó‰∫ÜÂØπË±°ÁöÑÈîÅÔºåÊ≠§Êó∂Á∫øÁ®ãAÁöÑÁ∫øÁ®ãIDÂ∞Ü‰øùÂ≠òÂà∞ÂØπË±°ÁöÑÂØπË±°Â§¥‰∏≠ÔºåÂØπË±°Â§¥‰∏≠ÁöÑÂÅèÂêëÈîÅÊ†áÂøó‰ΩçÂèò‰∏∫1„ÄÇÊ≠§Êó∂Â¶ÇÊûúÁ¨¨‰∫å‰∏™Á∫øÁ®ãBÊÉ≥ËÆøÈóÆËøô‰∏™ÂØπË±°ÔºåÁ∫øÁ®ãA„ÄÅB‰πãÈó¥Â∞±Â≠òÂú®‰∏Ä‰∏™Á´û‰∫âÁöÑÂÖ≥Á≥ªÔºå‰ΩÜÊòØÊ≠§Êó∂ÂÅèÂêëÈîÅÊòØÂÅèÂêë‰∫éÁ∫øÁ®ãAÁöÑÔºåÂç≥AÊòØ‰ºòÂÖàÁöÑÔºåÂÅèÂêëÈîÅÂ∞Ü‰ºöÂçáÁ∫ß‰∏∫ËΩªÈáèÁ∫ßÈîÅÔºå‰ª•Ê≠§Êù•‰øùËØÅÊåÅÊúâÂØπË±°ÈîÅÁöÑÁöÑÁ∫øÁ®ãAËøêË°å„ÄÇÊ≠§Êó∂Á∫øÁ®ãBÂ∞Ü‰ºöËøõË°åCASÔºåCAS‰πüÂè´ÂÅöËá™ÊóãÈîÅÔºåB‰ºöÂéªÊ£ÄÊü•ÂØπË±°ÁöÑÈîÅÊòØÂê¶ËøòÊòØÂ±û‰∫éAÁöÑÔºåÂ¶ÇÊûúÊòØÔºåÈÇ£BÂ∞Ü‰ºöÁªßÁª≠Ëá™ÈÄâÔºåÁõ¥Âà∞ÂØπË±°ÈîÅË¢´ÈáäÊîæÔºåBÈ©¨‰∏äÂ∞±‰ºöËé∑ÂèñÂØπË±°ÁöÑÈîÅ„ÄÇ‰ΩÜÊòØÂÅáÂ¶ÇÈïøÊó∂Èó¥Êó†Ê≥ïËé∑ÂèñÂà∞ÂØπË±°ÁöÑÈîÅÔºåCASÊòØ‰ºöÊ∂àËÄóCPUÁöÑÊÄßËÉΩÁöÑÔºåÂ∞§ÂÖ∂ÂΩìËÆ∏Â§ö‰∏™Á∫øÁ®ãÁ´û‰∫âÂêå‰∏Ä‰∏™ÂØπË±°ÁöÑÈîÅÊó∂ÔºåCPUËµÑÊ∫êÂç†Áî®‰ºöÂ§ßÂ§ßÊèêÈ´òÔºåÊ≠§Êó∂ÈîÅÂ∞Ü‰ºöÂÜçÊ¨°ÂçáÁ∫ßÔºåÂØπË±°ÈîÅÂ∞ÜÂçáÁ∫ß‰∏∫ÈáçÈáèÁ∫ßÈîÅ„ÄÇÊ≠§Êó∂ÔºåÊâÄÊúâÁ´û‰∫âÁöÑÁ∫øÁ®ãÂ∞ÜËøõÂÖ•ÈòªÂ°ûÈòüÂàóÔºåÁ≠âÂæÖcpuÁöÑË∞ÉÂ∫¶„ÄÇ</strong><br><figure class="image-box">
                <a rel=Âπ∂ÂèëÁºñÁ®ã| volatile&ÈîÅÂçáÁ∫ß&DCL&Á∫øÁ®ãÊ±†Ë∞É‰ºò href="200B5CB0-C1CD-4BAB-B6D0-0F9571CA6BE7_20220306170653.png?v=1&type=image&token=V1:3a9aOLmt56Y9r0-FQjdOX46UTQordIh0AVMM9wUpw3I" title="ËæìÂÖ•ÂõæÁâáÊèèËø∞" data-fancybox="images"><img src="200B5CB0-C1CD-4BAB-B6D0-0F9571CA6BE7_20220306170653.png?v=1&type=image&token=V1:3a9aOLmt56Y9r0-FQjdOX46UTQordIh0AVMM9wUpw3I" alt="ËæìÂÖ•ÂõæÁâáÊèèËø∞" title class></a>
                <p>ËæìÂÖ•ÂõæÁâáÊèèËø∞</p>
            </figure></p>
<figure class="image-box">
                <a rel=Âπ∂ÂèëÁºñÁ®ã| volatile&ÈîÅÂçáÁ∫ß&DCL&Á∫øÁ®ãÊ±†Ë∞É‰ºò href="7D5886D5-B82C-4991-BB30-A941167F9C49_20220306165657.png?v=1&type=image&token=V1:-L4TERytUf4m7oc5qmaAP0u8qsvL9-ami3kxpq7ZVYc" title="ËæìÂÖ•ÂõæÁâáÊèèËø∞" data-fancybox="images"><img src="7D5886D5-B82C-4991-BB30-A941167F9C49_20220306165657.png?v=1&type=image&token=V1:-L4TERytUf4m7oc5qmaAP0u8qsvL9-ami3kxpq7ZVYc" alt="ËæìÂÖ•ÂõæÁâáÊèèËø∞" title class></a>
                <p>ËæìÂÖ•ÂõæÁâáÊèèËø∞</p>
            </figure>
<p>ÂÖ∑‰ΩìÂ±ïÂºÄÔºö<br>32‰ΩçÁ≥ªÁªü‰∏ãÔºå<br>ÂΩìÊàë‰ª¨ÂàõÂª∫ÂØπË±°ÁöÑÊó∂ÂÄôÔºåÂÆÉÂØπË±°Â§¥Êúâ25‰ΩçhashcodeÔºå4‰ΩçÂàÜ‰ª£Âπ¥ÈæÑÔºå1‰ΩçÂÅèÂêëÈîÅÊ†áËÆ∞Ôºå2‰ΩçÈîÅÊ†áËÆ∞‰Ωç„ÄÇ</p>
<p>Â¶ÇÊûúÂØπË±°ËøõË°ånewÂÖ≥ÈîÆÂ≠óÔºåÂØπË±°Â§¥ÊúâÊó†25‰ΩçhashcodeÔºü<br>‰ªÖ‰ªÖnewÂØπË±°ÔºåÂ¶ÇÊûúÊ≤°ÊúâÊòæÂºèÊàñÈöêÂºèË∞ÉÁî®hashcodeÊñπÊ≥ïÔºåËØ•Ê†áËÆ∞‰ΩçÂπ∂Ê≤°ÊúâÁúüÂÆûÊ†áËÆ∞hashcode„ÄÇÂ∞±ÊòØËØ¥ÔºåÂè™ÊúâË∞ÉÁî®ObjectÁ±ªhashcodeÔºåÊâç‰ºöÊúâÊ†áËÆ∞ÔºåÊØîÂ¶ÇÂ≠òÂÖ•HashmapÔºåÂê¶ÂàôÊòØ0„ÄÇ</p>
<p>ÂàÜ‰ª£Âπ¥ÈæÑÔºåÊ≤°ÊúâÁªèËøáminorgcÔºåÂ∞±ÊòØ0„ÄÇ</p>
<p>ÂÅèÂêëÈîÅ‰ΩçÔºö<br>Êó†ÈîÅÁä∂ÊÄÅÔºåÂÅèÂêëÈîÅ‰Ωç 0<br>ÂÅèÂêëÈîÅÊÄÅÔºåÂÅèÂêëÈîÅ‰Ωç1</p>
<p>Êó†ÈîÅÁä∂ÊÄÅÂçáÁ∫ß‰∏∫ÂÅèÂêëÈîÅÁä∂ÊÄÅ<br>ÊÉ≥Ë¶ÅÊàê‰∏∫ÂÅèÂêëÈîÅÊÄÅÔºåmark word‰∏≠Êó†hashcodeËÆ∞ÂΩïÔºåËøôÊòØ‰∏Ä‰∏™ÂâçÊèê„ÄÇ<br>23‰ΩçÁ∫øÁ®ãID+2‰Ωçepoch Âç†ÊçÆ‰∫ÜÊó†ÈîÅÊÄÅÁöÑhashcode‰Ωç„ÄÇ</p>
<p>ÈîÅÊ†áÂøó‰ΩçÔºö<br>Ê†áËÆ∞‰ªÄ‰πàÈîÅÁä∂ÊÄÅ„ÄÇ</p>
<p><strong>ÂÅèÂêëÈîÅÔºö</strong><br>ÂçïÁ∫øÁ®ãÊìç‰ΩúÁéØÂ¢ÉÔºå‰∏çÂ≠òÂú®ÈîÅÁ´û‰∫âÔºåÂÅèÂêëÈîÅÊúâ‰∏Ä‰∏™ÈùûÂ∏∏Â•ΩÁöÑÊÄßËÉΩÔºå<code>ÂÅèÂêëÈîÅ</code>‰ºöÁõ¥Êé•Êù•ÂæÄmarkwordÈáåË¥¥‰∏äÁ∫øÁ®ãIDÔºåË°®Á§∫ÈîÅ‰Ωè‰∫ÜÔºå<strong>ÊØèÊ¨°Âè™ÈúÄÊ£ÄÊü•Á∫øÁ®ãIDÊòØÂê¶ÂÅèÂêëËá™Â∑±ÔºåÊ≤°ÊúâCASËá™ÊóãÂíåÊìç‰ΩúÁ≥ªÁªüË∞ÉÁî®Ëøô‰∫õËÄóÊó∂ÁöÑÈîÅÁ´û‰∫âÊú∫Âà∂</strong>„ÄÇ<strong>Â¶ÇÊûúÂá∫Áé∞ÂÖ∂‰ªñÁ∫øÁ®ãÁ´û‰∫âÔºå‰πü‰∏ç‰∏ÄÂÆöÂçáÁ∫ßÈîÅ</strong>„ÄÇÊØîÂ¶ÇÁ∫øÁ®ãAÂú®ÂØπË±°Â∑≤Ë¥¥‰∏äÁ∫øÁ®ãIDÔºåÁ∫øÁ®ãBÂèëÁé∞Ë¢´Ë¥¥‰∏äAÁ∫øÁ®ãIDÔºåÂ∞±‰ºöÊ£ÄÊü•Á∫øÁ®ãAÁöÑÂ≠òÊ¥ªÁä∂ÊÄÅÔºåÂ¶ÇÊûúÁ∫øÁ®ãAÂ∑≤Âú®‰∏¥ÁïåÂå∫Â§ñÔºåÁ∫øÁ®ãBÊääÂØπË±°ÁΩÆ‰∏∫ÂåøÂêçÂÅèÂêëÈîÅÁä∂ÊÄÅÔºå<code>‚ÄòÂÆÅ‰∏∫ÁéâÁ¢éÔºå‰∏ç‰∏∫Áì¶ÂÖ®‚Äô</code>ÔºåÂÜçÂáÜÂ§áÁ´û‰∫âÔºåÂ¶ÇÊûúÁ´û‰∫âÊàêÂäüÔºåÁ∫øÁ®ãBÊääÂØπË±°ÁΩÆ‰∏∫ÂÅèÂêëËá™Â∑±„ÄÇÂ¶ÇÊûúÁ´û‰∫âÂ§±Ë¥•ÔºåÂÅáÂ¶ÇÁ∫øÁ®ãCËøõÊù•Âπ∂Êä¢Âà∞ÔºåBËøòÂú®‰∫âÊä¢ÔºåÊ≠§Êó∂ÔºåÁ∫øÁ®ãB‰ºöËøõË°åÂÅèÂêëÈîÅÊí§ÈîÄÁöÑstwÊìç‰ΩúÔºöBÁ∫øÁ®ãÊåÇËµ∑ÔºåÁ≠âÂæÖÁ∫øÁ®ãCÂà∞ËææÂÆâÂÖ®ÁÇπÂêéÔºåÁ∫øÁ®ãCÁöÑÊ†à‰ºöË¢´ÈÅçÂéÜÔºåÊâæÂÅèÂêëÈîÅÂØπË±°ËÆ∞ÂΩïÔºåÂ∞±‰ºöÂØºËá¥3ÁßçÊÉÖÂÜµÔºö</p>
<p>‰∏ÄÊòØÂØπË±°ÂçáÁ∫ß‰∏∫ËΩªÈáèÁ∫ßÈîÅÔºå‰ΩÜÂè™ÊòØÈîÅÊ†áËÆ∞00ÔºåÂâç30‰ΩçÁΩÆÁ©∫ÔºåÊ≤°ÊúâÊåáÂêëÈîÅËÆ∞ÂΩïÊ†àÂ∏ßÔºåÊ≠§Êó∂‰πüÁÆóÊó†ÈîÅÁä∂ÊÄÅÔºõ</p>
<p>‰∫åÊòØÁ∫øÁ®ãÈáçÊñ∞ÂÅèÂêëÂà∞Á∫øÁ®ãB„ÄÇ</p>
<p>Ê∂âÂèäÂà∞<strong>ÊâπÈáèÈáçÂÅèÂêë</strong>Âíå<strong>ÊâπÈáèÊí§ÈîÄ</strong>ÁöÑÊìç‰Ωú„ÄÇ<br>Èô§‰∫ÜÂØπË±°markwordÊúâepochËÆ°Êï∞Âô®Ôºåclass‰ø°ÊÅØ‰∏≠‰πüÊúâepochÂÄºÔºåclassÁöÑepochÁª¥Êä§‰∏§‰∏™ÈòàÂÄºÔºåÊâπÈáèÈáçÂÅèÂêëÈòàÂÄºÊòØ20ÔºåÊâπÈáèÊí§ÈîÄÈòàÂÄº40„ÄÇ</p>
<p>ÊØîÂ¶ÇÔºöÂêå‰∏Ä‰∏™Á±ªÂàõÂª∫40ÂØπË±°ÔºåÁ∫øÁ®ãAÂØπ40ÂØπË±°Âä†ÈîÅÂπ∂‰øùÊåÅÊâßË°åÔºåÁ∫øÁ®ãBÂØπ40‰∏™ÂØπË±°ÊâπÈáèÊí§ÈîÄÔºå‰ºöÊääÂâç19‰∏™ÂØπË±°ËøõË°åÂÅèÂêëÈîÅÊí§ÈîÄÔºåÊØèÊ¨°Êí§ÈîÄclassÁöÑepoch‰ºö+1Ôºå‰πãÂêéËææÂà∞classÊâπÈáèÈáçÂÅèÂêëÈòàÂÄºÔºåJVMËÆ§‰∏∫classÂÅèÂêëÈîÅÊúâÈóÆÈ¢òÔºåËß¶ÂèëÊâπÈáèÈáçÂÅèÂêëÔºåÂêé20Âà∞39ÂØπË±°ÈÄöËøáCASÁõ¥Êé•ÂÅèÂêëÁ∫øÁ®ãBÔºåËøôÂ∞±ÊòØÊâπÈáèÈáçÂÅèÂêëÁöÑËøáÁ®ã„ÄÇÂΩìÊâßË°å40‰∏™ÔºåËææÂà∞classÊâπÈáèÊí§ÈîÄÈòàÂÄºÔºåJVMËøô‰∏™Á±ªÁöÑÁ´û‰∫âÊøÄÁÉàÔºåÊ†áËÆ∞ËØ•class‰∏∫ÂÅèÂêë‰∏çÂèØÁî®ÔºåÂú®‰πãÂêéÂàõÂª∫41‰∏™ÂØπË±°Êó∂Ôºå‰ºöÁõ¥Êé•ÊääÈîÅÊ†áËÆ∞ÁΩÆ00ÂêØÁî®ËΩªÈáèÁ∫ßÈîÅÔºåËøôÂ∞±ÊòØÊâπÈáèÊí§ÈîÄËøáÁ®ã„ÄÇ</p>
<p>Ê≠§Â§ñÔºåËß¶ÂèëÊâπÈáèÈáçÂÅèÂêëÈòàÂÄº20ÂêéÔºåËøòÈÖçÂêà‰∏Ä‰∏™timeË∂ÖÊó∂ÈòàÂÄº25sÔºåÂ¶ÇÊûúË∂ÖÊó∂Êú™Ëææ40ÁöÑÊâπÈáèÊí§ÈîÄÈòàÂÄºÔºåÈáçÁΩÆclassÁöÑepochÔºå‰∏ãÊ¨°ÈáçÊñ∞ËÆ°Êï∞„ÄÇ</p>
<p>‰∏âÊòØÁõ¥Êé•Â∞ÜËØ•Á±ªÁΩÆ‰∏∫‰∏çÂèØ‰ΩøÁî®ÂÅèÂêëÈîÅ„ÄÇ<br>Ëøô‰∏™Â∞±ÊòØÊâπÈáèÊí§ÈîÄ‰πãÂêé„ÄÇ</p>
<p>ÂÅèÂêëÈîÅÂçáÁ∫ß‰∏∫ËΩªÈáèÁ∫ßÈîÅÔºö<br>ÈîÅÊ†áËÆ∞ÁΩÆ00ÔºåÁ∫øÁ®ãID+EpochÁΩÆ‰∏∫00„ÄÇ</p>
<p>ËΩªÈáèÈîÅÔºö<br>Â§öÁ∫øÁ®ãÁ´û‰∫âËé∑ÂèñËøô‰∏™ÈîÅÊó∂ÔºåÁî±‰∫éËØ•ÈîÅÂ∑≤ÁªèÊòØÂÅèÂêëÈîÅÔºåÂΩìÂèëÁé∞ÂØπË±°Â§¥ Mark Word ‰∏≠ÁöÑÁ∫øÁ®ã ID ‰∏çÊòØËá™Â∑±ÁöÑÁ∫øÁ®ã IDÔºå‰ºöCASÂ∞ùËØïËé∑ÂæóÈîÅÔºåÂ¶ÇÊûúÊåÅÊúâÈîÅÁöÑÁ∫øÁ®ãÂú®ÂÖ®Â±ÄÂÆâÂÖ®ÁÇπÊ£ÄÊü•Êó∂Ôºå‰∏çÈúÄË¶ÅÂÜç‰ΩøÁî®ËØ•ÈîÅ‰∫ÜÂàôËé∑ÂèñÊàêÂäüÔºåÁ®ãÂ∫èÁªßÁª≠ÊâßË°åÔºåÂèç‰πãÂàôËé∑ÂèñÈîÅÂ§±Ë¥•ÔºåÊí§ÈîÄÂÅèÂêëÁä∂ÊÄÅÔºåÂçáÁ∫ß‰∏∫ËΩªÈáèÁ∫ßÈîÅÔºåÂç≥Ëá™ÊóãÈîÅ„ÄÇ</p>
<p>Ê≠§Êó∂ÔºåÂ∞ÜÈîÅÂØπË±°markWord‰∏≠32‰Ωç‰øÆÊîπÊàêÊåáÂêëËá™Â∑±Á∫øÁ®ãÊ†à‰∏≠Lock RecordÁöÑÊåáÈíàÔºàCASÊä¢ÔºâÊâßË°åÂú®Áî®Êà∑ÊÄÅÔºåÊ∂àËÄóCPUÁöÑËµÑÊ∫ê„ÄÇÊ≠§Êó∂ÔºåÈîÅÊ†áËÆ∞‰Ωç00.<br>JDK1.6ÂºïÂÖ•‰∫ÜËÅ™ÊòéÁöÑ<strong>Ëá™ÈÄÇÂ∫îËá™ÊóãÈîÅ</strong>„ÄÇËÉΩÂáèÂ∞ëÈïø‰ªªÂä°ÁöÑËá™ÊóãÊ¨°Êï∞„ÄÇ<br>‰ªñÁöÑËá™ÊóãÊ¨°Êï∞ÊòØ‰ºöÂèòÁöÑÔºåÊàëÁî®Â§ßÁôΩËØùÊù•ËÆ≤‰∏Ä‰∏ãÔºåÂ∞±ÊòØÁ∫øÁ®ãÂ¶ÇÊûú‰∏äÊ¨°Ëá™ÊóãÊàêÂäü‰∫ÜÔºåÈÇ£‰πàËøôÊ¨°Ëá™ÊóãÁöÑÊ¨°Êï∞‰ºöÊõ¥Âä†Â§öÔºåÂõ†‰∏∫ËôöÊãüÊú∫ËÆ§‰∏∫Êó¢ÁÑ∂‰∏äÊ¨°ÊàêÂäü‰∫ÜÔºåÈÇ£‰πàËøôÊ¨°Ëá™Êóã‰πüÂæàÊúâÂèØËÉΩ‰ºöÂÜçÊ¨°ÊàêÂäü„ÄÇÂèç‰πãÔºåÂ¶ÇÊûúÊüê‰∏™ÈîÅÂæàÂ∞ëÊúâËá™ÊóãÊàêÂäüÔºåÈÇ£‰πà‰ª•ÂêéÁöÑËá™ÊóãÁöÑÊ¨°Êï∞‰ºöÂáèÂ∞ëÁîöËá≥ÁúÅÁï•ÊéâËá™ÊóãËøáÁ®ãÔºå‰ª•ÂÖçÊµ™Ë¥πÂ§ÑÁêÜÂô®ËµÑÊ∫ê„ÄÇ</p>
<p>ËΩªÈáèÁ∫ßÈîÅÁöÑÂä†ÈîÅËøáÁ®ãÔºö<br>Á∫øÁ®ãAËøõÂÖ•ÂêåÊ≠•ÂùóÔºåÂ¶ÇÊûúÂêåÊ≠•ÂØπË±°ÈîÅÁä∂ÊÄÅ‰∏∫Êó†ÈîÅÁä∂ÊÄÅÔºåËôöÊãüÊú∫È¶ñÂÖàÂ∞ÜÂú®ÂΩìÂâçÁ∫øÁ®ãÁöÑÊ†àÂ∏ß‰∏≠Âª∫Á´ã‰∏Ä‰∏™Âêç‰∏∫ÈîÅËÆ∞ÂΩïÔºàLock RecordÔºâÁöÑÁ©∫Èó¥ÔºåÁî®‰∫éÂ≠òÂÇ®ÈîÅÂØπË±°ÁõÆÂâçÁöÑMark WordÁöÑÊã∑Ë¥ùÔºåÂÆòÊñπÁß∞‰πã‰∏∫ Displaced Mark Word„ÄÇÁÑ∂ÂêéÊã∑Ë¥ùÂØπË±°Â§¥‰∏≠ÁöÑMark WordÂ§çÂà∂Âà∞ÈîÅËÆ∞ÂΩï‰∏≠Ôºõ<br>‰πãÂêéÔºåËôöÊãüÊú∫Â∞Ü‰ΩøÁî®CASÊìç‰ΩúÂ∞ùËØïÂ∞ÜÂØπË±°ÁöÑMark Word‰∏≠ÁöÑ32‰ΩçÊõ¥Êñ∞‰∏∫ÊåáÂêëÁ∫øÁ®ãAÁöÑLock RecordÁöÑÊåáÈíàÔºåÂπ∂Â∞ÜÁ∫øÁ®ãAÁöÑLock recordÈáåÁöÑownerÊåáÈíàÊåáÂêëobject mark word„ÄÇÊ≠§Êó∂ÔºåÁ∫øÁ®ãAÊåÅÊúâÈîÅ„ÄÇ<br>Ê≠§Êó∂Á∫øÁ®ãBËøõÊù•Â∞ùËØïCASÊõ¥Êñ∞Ôºå<br>Â¶ÇÊûúÊõ¥Êñ∞ÊàêÂäüÔºåÈÇ£‰πàÁ∫øÁ®ãBÂ∞±Êã•Êúâ‰∫ÜËØ•ÂØπË±°ÁöÑÈîÅÔºåÂπ∂‰∏îÂØπË±°Mark WordÁöÑÈîÅÊ†áÂøó‰ΩçÁΩÆ‰∏∫‚Äú00‚ÄùÔºåÂç≥Ë°®Á§∫Ê≠§ÂØπË±°Â§Ñ‰∫éËΩªÈáèÁ∫ßÈîÅÂÆöÁä∂ÊÄÅ„ÄÇ<br>Â¶ÇÊûúËøô‰∏™Êõ¥Êñ∞Êìç‰ΩúÂ§±Ë¥•‰∫ÜÔºåJVMÈ¶ñÂÖà‰ºöÊ£ÄÊü•ÂØπË±°ÁöÑMark WordÊòØÂê¶ÊåáÂêëÂΩìÂâçÁ∫øÁ®ãÁöÑÊ†àÂ∏ßÔºåÂ¶ÇÊûúÊòØÔºåËØ¥ÊòéÂΩìÂâçÁ∫øÁ®ãÂ∑≤ÁªèÊã•Êúâ‰∫ÜËøô‰∏™ÂØπË±°ÁöÑÈîÅÔºåÈÇ£Â∞±ÂèØ‰ª•Áõ¥Êé•ËøõÂÖ•ÂêåÊ≠•ÂùóÁªßÁª≠ÊâßË°å„ÄÇ<br>Ê≠§Êó∂‰∏∫‰∫ÜÊèêÈ´òËé∑ÂèñÈîÅÁöÑÊïàÁéáÔºåÁ∫øÁ®ãB‰ºö‰∏çÊñ≠Âú∞Âæ™ÁéØÂéªËé∑ÂèñÈîÅÔºåÂ∞ùËØïCAS, Ëøô‰∏™Âæ™ÁéØÊòØÊúâÊ¨°Êï∞ÈôêÂà∂ÁöÑÔºåÊØîÂ¶Ç10Ê¨°ÔºåÂ¶ÇÊûúÂú®Âæ™ÁéØÁªìÊùü‰πãÂâçCASÊìç‰ΩúÊàêÂäüÔºå ÈÇ£‰πàÁ∫øÁ®ãBÂ∞±Ëé∑ÂèñÂà∞ÈîÅÔºõ<br>Â¶ÇÊûúÂæ™ÁéØÁªìÊùü‰æùÁÑ∂Ëé∑Âèñ‰∏çÂà∞ÈîÅ, ÂàôÁ∫øÁ®ãBËé∑ÂèñÈîÅÂ§±Ë¥•, ÂØπË±°ÁöÑMarkWord‰∏≠ÁöÑËÆ∞ÂΩï‰ºöË¢´‰øÆÊîπ‰∏∫ÊåáÂêë‰∫íÊñ•ÈáèÔºàÈáçÈáèÁ∫ßÈîÅÔºâÁöÑÊåáÈíàÔºåÈîÅÊ†áÂøóÁöÑÁä∂ÊÄÅÂÄºÂèò‰∏∫10ÔºåÁÑ∂ÂêéÁ∫øÁ®ãBË¢´ÊåÇËµ∑ÔºåÂêéÈù¢Êù•ÁöÑÁ∫øÁ®ã‰πü‰ºöÁõ¥Êé•Ë¢´ÊåÇËµ∑„ÄÇÂú®Ëøô‰∏™Áä∂ÊÄÅ‰∏ãÔºåÊú™Êä¢Âà∞ÈîÅÁöÑÁ∫øÁ®ãÈÉΩ‰ºöËøõÂÖ• MonitorÔºå‰πãÂêé‰ºöË¢´ÈòªÂ°ûÂú® _WaitSet ÈòüÂàó‰∏≠„ÄÇ</p>
<p>Ê≠§Êó∂ÔºåÁ∫øÁ®ãAÁöÑdisplaced mark wordÂíåÂéüÊù•ÂØπË±°ÁöÑmarkword‰∏ç‰∏ÄÊ†∑‰∫Ü„ÄÇ</p>
<p>Ëß£ÈîÅ<br>‰πüÊòØÈÄöËøáCASÊìç‰ΩúÊù•ËøõË°åÁöÑÔºåÂ¶ÇÊûúÂØπË±°ÁöÑMark Word‰ªçÁÑ∂<code>ÊåáÂêëÁùÄÁ∫øÁ®ã</code>ÁöÑ<code>ÈîÅËÆ∞ÂΩï</code>ÔºåÈÇ£Â∞±Áî®CASÊìç‰ΩúÊääÂØπË±°ÂΩìÂâçÁöÑMark WordÂíåÁ∫øÁ®ã‰∏≠Â§çÂà∂ÁöÑDisplaced Mark Word<code>ÊõøÊç¢ÂõûÊù•</code>„ÄÇ</p>
<p>Âõ†‰∏∫Á∫øÁ®ãBÊääÂØπË±° markwordÊîπÊàêÈáçÈáèÁ∫ßÈîÅÔºåÈÇ£‰πàÁ∫øÁ®ãA<code>ÊõøÊç¢Â§±Ë¥•</code>ÔºåÈÇ£‰πàÂ∞±ÊääËá™Â∑±Ê†àÊ°¢ÁöÑDisplaced Mark WordÊã∑Ë¥ùÂà∞ÂØπË±°Â§¥ÁöÑ<strong>Monitor</strong>ÂØπË±°ÁöÑheaderÂèòÈáèÔºåÂπ∂‰∏î<strong>Monitor</strong>ÂØπË±°ÁöÑownerÂèòÈáèÊåáÂêëËá™Â∑±„ÄÇ‰øùËØÅdisplaced mark word‰∏ç‰∏¢Â§±„ÄÇ</p>
<p>ÈáçÈáèÁ∫ßÈîÅÔºö<br>CASÂèëÁîü10Ê¨°ÂêéÔºåËΩªÈáèÁ∫ßÈîÅÂçáÁ∫ß‰∏∫ÈáçÈáèÁ∫ßÈîÅÔºåÊääÈîÅÊåáÈíàÊåáÂêëÈáçÈáèÁ∫ßÈîÅObjectÁöÑmonitor„ÄÇ</p>
<p>Âú®JavaËôöÊãüÊú∫(HotSpot)‰∏≠ÔºåMonitorÂØπË±°ÂÖ∂ÂÆûÂ∞±ÊòØObjectMonitorÂØπË±°ÔºåËøô‰∏™ÂØπË±°ÊòØ‰∏Ä‰∏™C++ÂØπË±°ÔºåÂÆö‰πâÂú®ËôöÊãüÊú∫Ê∫êÁ†Å‰∏≠„ÄÇ</p>
<h3 id="synchronizedÂèØÈáçÂÖ•"><a href="#synchronizedÂèØÈáçÂÖ•" class="headerlink" title="synchronizedÂèØÈáçÂÖ•"></a>synchronizedÂèØÈáçÂÖ•</h3><p>synchronizedÊòØÂèØÈáçÂÖ•ÈîÅÔºåÈÇ£‰πàÂÆÉÊòØÂ¶Ç‰ΩïÂÆûÁé∞ÂèØÈáçÂÖ•ÁöÑÂë¢ÔºüÂÖ∂ÂÆû‰∏äÈù¢ËØ¶ÁªÜÁöÑËøáÁ®ãÂ∑≤ÁªèËØ¥Ëøá‰∫ÜÔºåËøôÈáåÂÜçÊÄªÁªì‰∏Ä‰∏ãÔºà‰πãÂâçÁöÑÂà§Êñ≠ÈÄªËæëÂ∞±ÁúÅÁï•Êéâ‰∫ÜÔºâÔºö</p>
<p>ÂÅèÂêëÈîÅÔºöÊ£ÄÊü•markWord‰∏≠ÁöÑÁ∫øÁ®ãIDÊòØÂê¶ÊòØÂΩìÂâçÁ∫øÁ®ãÔºåÂ¶ÇÊûúÊòØÁöÑËØùÂ∞±Ëé∑ÂèñÈîÅÔºåÁªßÁª≠ÊâßË°å‰ª£Á†ÅÔºõ<br>ËΩªÈáèÁ∫ßÈîÅÔºöÊ£ÄÊü•markWord‰∏≠ÊåáÂêëlockRecordÁöÑÊåáÈíàÊòØÂê¶ÊòØÊåáÂêëÂΩìÂâçÁ∫øÁ®ãÁöÑlockRecordÔºåÊòØÁöÑËØùÁªßÁª≠ÊâßË°å‰ª£Á†ÅÔºõ<br>ÈáçÈáèÁ∫ßÈîÅÔºöÊ£ÄÊü•_ownerÂ±ûÊÄßÔºåÂ¶ÇÊûúËØ•Â±ûÊÄßÊåáÂêë‰∫ÜÊú¨Á∫øÁ®ãÔºå_countÂ±ûÊÄß+1ÔºåÂπ∂ÁªßÁª≠ÊâßË°å‰ª£Á†Å„ÄÇ</p>
<p>ÊÄªÁªì<br>synchronizedÁöÑÊâßË°åËøáÁ®ãÔºö</p>
<ol>
<li>Ê£ÄÊµãMark WordÈáåÈù¢ÊòØ‰∏çÊòØÂΩìÂâçÁ∫øÁ®ãÁöÑIDÔºåÂ¶ÇÊûúÊòØÔºåË°®Á§∫ÂΩìÂâçÁ∫øÁ®ãÂ§Ñ‰∫éÂÅèÂêëÈîÅ</li>
<li>Â¶ÇÊûú‰∏çÊòØÔºåÂàô‰ΩøÁî®CASÂ∞ÜÂΩìÂâçÁ∫øÁ®ãÁöÑIDÊõøÊç¢Mard WordÔºåÂ¶ÇÊûúÊàêÂäüÂàôË°®Á§∫ÂΩìÂâçÁ∫øÁ®ãËé∑ÂæóÂÅèÂêëÈîÅÔºåÁΩÆÂÅèÂêëÊ†áÂøó‰Ωç1</li>
<li>Â¶ÇÊûúÂ§±Ë¥•ÔºåÂàôËØ¥ÊòéÂèëÁîüÁ´û‰∫âÔºåÊí§ÈîÄÂÅèÂêëÈîÅÔºåËøõËÄåÂçáÁ∫ß‰∏∫ËΩªÈáèÁ∫ßÈîÅ„ÄÇ</li>
<li>ÂΩìÂâçÁ∫øÁ®ã‰ΩøÁî®CASÂ∞ÜÂØπË±°Â§¥ÁöÑMark WordÊõøÊç¢‰∏∫ÈîÅËÆ∞ÂΩïÊåáÈíàÔºåÂ¶ÇÊûúÊàêÂäüÔºåÂΩìÂâçÁ∫øÁ®ãËé∑ÂæóÈîÅ</li>
<li>Â¶ÇÊûúÂ§±Ë¥•ÔºåË°®Á§∫ÂÖ∂‰ªñÁ∫øÁ®ãÁ´û‰∫âÈîÅÔºåÂΩìÂâçÁ∫øÁ®ã‰æøÂ∞ùËØï‰ΩøÁî®Ëá™ÊóãÊù•Ëé∑ÂèñÈîÅ„ÄÇ</li>
<li>Â¶ÇÊûúËá™ÊóãÊàêÂäüÂàô‰æùÁÑ∂Â§Ñ‰∫éËΩªÈáèÁ∫ßÁä∂ÊÄÅ„ÄÇ</li>
<li>Â¶ÇÊûúËá™ÊóãÂ§±Ë¥•ÔºåÂàôÂçáÁ∫ß‰∏∫ÈáçÈáèÁ∫ßÈîÅ„ÄÇ</li>
</ol>
<p>‰∏äÈù¢Âá†ÁßçÈîÅÈÉΩÊòØJVMËá™Â∑±ÂÜÖÈÉ®ÂÆûÁé∞ÔºåÂΩìÊàë‰ª¨ÊâßË°åsynchronizedÂêåÊ≠•ÂùóÁöÑÊó∂ÂÄôjvm‰ºöÊ†πÊçÆÂêØÁî®ÁöÑÈîÅÂíåÂΩìÂâçÁ∫øÁ®ãÁöÑ‰∫âÁî®ÊÉÖÂÜµÔºåÂÜ≥ÂÆöÂ¶Ç‰ΩïÊâßË°åÂêåÊ≠•Êìç‰ΩúÔºõ</p>
<p>Âú®ÊâÄÊúâÁöÑÈîÅÈÉΩÂêØÁî®ÁöÑÊÉÖÂÜµ‰∏ãÁ∫øÁ®ãËøõÂÖ•‰∏¥ÁïåÂå∫Êó∂‰ºöÂÖàÂéªËé∑ÂèñÂÅèÂêëÈîÅÔºåÂ¶ÇÊûúÂ∑≤ÁªèÂ≠òÂú®ÂÅèÂêëÈîÅ‰∫ÜÔºåÂàô‰ºöÂ∞ùËØïËé∑ÂèñËΩªÈáèÁ∫ßÈîÅÔºåÂêØÁî®Ëá™ÊóãÈîÅÔºåÂ¶ÇÊûúËá™Êóã‰πüÊ≤°ÊúâËé∑ÂèñÂà∞ÈîÅÔºåÂàô‰ΩøÁî®ÈáçÈáèÁ∫ßÈîÅÔºåÊ≤°ÊúâËé∑ÂèñÂà∞ÈîÅÁöÑÁ∫øÁ®ãÈòªÂ°ûÊåÇËµ∑ÔºåÁõ¥Âà∞ÊåÅÊúâÈîÅÁöÑÁ∫øÁ®ãÊâßË°åÂÆåÂêåÊ≠•ÂùóÂî§ÈÜí‰ªñ‰ª¨Ôºõ</p>
<p>synchronizedÈîÅÂçáÁ∫ßÂÆûÈôÖ‰∏äÊòØÊääÊú¨Êù•ÁöÑÊÇ≤ËßÇÈîÅÂèòÊàê‰∫Ü Âú®‰∏ÄÂÆöÊù°‰ª∂‰∏ã ‰ΩøÁî®Êó†ÈîÅ(ÂêåÊ†∑Á∫øÁ®ãËé∑ÂèñÁõ∏ÂêåËµÑÊ∫êÁöÑÂÅèÂêëÈîÅ)Ôºå‰ª•Âèä‰ΩøÁî®‰πêËßÇ(Ëá™ÊóãÈîÅ cas)Âíå‰∏ÄÂÆöÊù°‰ª∂‰∏ãÊÇ≤ËßÇ(ÈáçÈáèÁ∫ßÈîÅ)ÁöÑÂΩ¢Âºè„ÄÇ</p>
<p>ÂÅèÂêëÈîÅ:ÈÄÇÁî®‰∫éÂçïÁ∫øÁ®ãÈÄÇÁî®ÈîÅÁöÑÊÉÖÂÜµÔºåÂ¶ÇÊûúÁ∫øÁ®ã‰∫âÁî®ÊøÄÁÉàÔºåÈÇ£‰πàÂ∫îËØ•Á¶ÅÁî®ÂÅèÂêëÈîÅ„ÄÇ</p>
<p>ËΩªÈáèÁ∫ßÈîÅÔºöÈÄÇÁî®‰∫éÁ´û‰∫âËæÉ‰∏çÊøÄÁÉàÁöÑÊÉÖÂÜµ(ËøôÂíå‰πêËßÇÈîÅÁöÑ‰ΩøÁî®ËåÉÂõ¥Á±ª‰ºº)</p>
<p>ÈáçÈáèÁ∫ßÈîÅÔºöÈÄÇÁî®‰∫éÁ´û‰∫âÊøÄÁÉàÁöÑÊÉÖÂÜµ</p>
<p><strong>ÈîÅ‰ºòÂåñ</strong></p>
<p>‰ª•‰∏ä‰ªãÁªçÁöÑÈîÅ‰∏çÊòØÊàë‰ª¨‰ª£Á†Å‰∏≠ËÉΩÂ§üÊéßÂà∂ÁöÑÔºå‰ΩÜÊòØÂÄüÈâ¥‰∏äÈù¢ÁöÑÊÄùÊÉ≥ÔºåÊàë‰ª¨ÂèØ‰ª•‰ºòÂåñÊàë‰ª¨Ëá™Â∑±Á∫øÁ®ãÁöÑÂä†ÈîÅÊìç‰ΩúÔºõ</p>
<p><strong>ÈîÅÊ∂àÈô§</strong></p>
<p>ÈîÅÊ∂àÈô§Áî®Â§ßÁôΩËØùÊù•ËÆ≤ÔºåÂ∞±ÊòØÂú®‰∏ÄÊÆµÁ®ãÂ∫èÈáå‰Ω†Áî®‰∫ÜÈîÅÔºå‰ΩÜÊòØjvmÊ£ÄÊµãÂà∞ËøôÊÆµÁ®ãÂ∫èÈáå‰∏çÂ≠òÂú®ÂÖ±‰∫´Êï∞ÊçÆÁ´û‰∫âÈóÆÈ¢òÔºå‰πüÂ∞±ÊòØÂèòÈáèÊ≤°ÊúâÈÄÉÈÄ∏Âá∫ÊñπÊ≥ïÂ§ñÔºåËøô‰∏™Êó∂ÂÄôjvmÂ∞±‰ºöÊääËøô‰∏™ÈîÅÊ∂àÈô§Êéâ</p>
<p>Êàë‰ª¨Á®ãÂ∫èÂëòÂÜô‰ª£Á†ÅÁöÑÊó∂ÂÄôËá™ÁÑ∂ÊòØÁü•ÈÅìÂì™ÈáåÈúÄË¶Å‰∏äÈîÅÔºåÂì™Èáå‰∏çÈúÄË¶ÅÔºå‰ΩÜÊòØÊúâÊó∂ÂÄôÊàë‰ª¨ËôΩÁÑ∂Ê≤°ÊúâÊòæÁ§∫‰ΩøÁî®ÈîÅÔºå‰ΩÜÊòØÊàë‰ª¨‰∏çÂ∞èÂøÉ‰Ωø‰∫Ü‰∏Ä‰∫õÁ∫øÁ®ãÂÆâÂÖ®ÁöÑAPIÊó∂ÔºåÂ¶ÇStringBuffer„ÄÅVector„ÄÅHashTableÁ≠âÔºåËøô‰∏™Êó∂ÂÄô‰ºöÈöêÂΩ¢ÁöÑÂä†ÈîÅ„ÄÇÊØîÂ¶Ç‰∏ãÊÆµ‰ª£Á†ÅÔºö</p>
<pre><code>public void sbTest(){
    StringBuffer sb= new StringBuffer();
    for(int i = 0 ; i &lt; 10 ; i++){
        sb.append(i);
    }

    System.out.println(sb.toString());
}
</code></pre><p>‰∏äÈù¢ËøôÊÆµ‰ª£Á†ÅÔºåJVMÂèØ‰ª•ÊòéÊòæÊ£ÄÊµãÂà∞ÂèòÈáèsbÊ≤°ÊúâÈÄÉÈÄ∏Âá∫ÊñπÊ≥ïsbTest()‰πãÂ§ñÔºåÊâÄ‰ª•JVMÂèØ‰ª•Â§ßËÉÜÂú∞Â∞ÜsbTestÂÜÖÈÉ®ÁöÑÂä†ÈîÅÊìç‰ΩúÊ∂àÈô§„ÄÇ</p>
<p><strong>ÂáèÂ∞ëÈîÅÁöÑÊó∂Èó¥</strong></p>
<p>‰∏çÈúÄË¶ÅÂêåÊ≠•ÊâßË°åÁöÑ‰ª£Á†ÅÔºåËÉΩ‰∏çÊîæÂú®ÂêåÊ≠•Âø´ÈáåÈù¢ÊâßË°åÂ∞±‰∏çË¶ÅÊîæÂú®ÂêåÊ≠•Âø´ÂÜÖÔºåÂèØ‰ª•ËÆ©ÈîÅÂ∞ΩÂø´ÈáäÊîæÔºõ</p>
<p><strong>ÂáèÂ∞èÈîÅÁöÑÁ≤íÂ∫¶</strong></p>
<p>ÂÆÉÁöÑÊÄùÊÉ≥ÊòØÂ∞ÜÁâ©ÁêÜ‰∏äÁöÑ‰∏Ä‰∏™ÈîÅÔºåÊãÜÊàêÈÄªËæë‰∏äÁöÑÂ§ö‰∏™ÈîÅÔºåÂ¢ûÂä†Âπ∂Ë°åÂ∫¶Ôºå‰ªéËÄåÈôç‰ΩéÈîÅÁ´û‰∫â„ÄÇÂÆÉÁöÑÊÄùÊÉ≥‰πüÊòØÁî®Á©∫Èó¥Êù•Êç¢Êó∂Èó¥ÔºàÂ¶ÇConcurrentHashMap„ÄÅLinkedBlockingQueue„ÄÅLongAdderÔºâÔºõ</p>
<p><strong>ÈîÅÁ≤óÂåñ</strong></p>
<p>Â§ßÈÉ®ÂàÜÊÉÖÂÜµ‰∏ãÊàë‰ª¨ÊòØË¶ÅËÆ©ÈîÅÁöÑÁ≤íÂ∫¶ÊúÄÂ∞èÂåñÔºåÈîÅÁöÑÁ≤óÂåñÂàôÊòØË¶ÅÂ¢ûÂ§ßÈîÅÁöÑÁ≤íÂ∫¶; Âú®‰ª•‰∏ãÂú∫ÊôØ‰∏ãÈúÄË¶ÅÁ≤óÂåñÈîÅÁöÑÁ≤íÂ∫¶Ôºö<br>ÂÅáÂ¶ÇÊúâ‰∏Ä‰∏™Âæ™ÁéØÔºåÂæ™ÁéØÂÜÖÁöÑÊìç‰ΩúÈúÄË¶ÅÂä†ÈîÅÔºåÊàë‰ª¨Â∫îËØ•ÊääÈîÅÊîæÂà∞Âæ™ÁéØÂ§ñÈù¢ÔºåÂê¶ÂàôÊØèÊ¨°ËøõÂá∫Âæ™ÁéØÔºåÈÉΩËøõÂá∫‰∏ÄÊ¨°‰∏¥ÁïåÂå∫ÔºåÊïàÁéáÊòØÈùûÂ∏∏Â∑ÆÁöÑÔºõ</p>
<p><strong>‰ΩøÁî®ËØªÂÜôÈîÅ</strong></p>
<p>ReentrantReadWriteLock ÊòØ‰∏Ä‰∏™ËØªÂÜôÈîÅÔºåËØªÊìç‰ΩúÂä†ËØªÈîÅÔºåÂèØ‰ª•Âπ∂ÂèëËØªÔºåÂÜôÊìç‰Ωú‰ΩøÁî®ÂÜôÈîÅÔºåÂè™ËÉΩÂçïÁ∫øÁ®ãÂÜô„ÄÇ</p>
<h2 id="Âçï‰æãÊ®°ÂºèÁöÑÂéüÂõ†"><a href="#Âçï‰æãÊ®°ÂºèÁöÑÂéüÂõ†" class="headerlink" title="Âçï‰æãÊ®°ÂºèÁöÑÂéüÂõ†"></a>Âçï‰æãÊ®°ÂºèÁöÑÂéüÂõ†</h2><p>ÂèåÈáçÊ†°È™åÈîÅDCL ‚Äî‚Äîdouble check lock<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SafeDoubleCheckedLocking</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">volatile</span> <span class="keyword">static</span> Instance instance;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Instance <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (instance == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">synchronized</span> (SafeDoubleCheckedLocking<span class="class">.<span class="keyword">class</span>) </span>&#123;</span><br><span class="line">                <span class="keyword">if</span> (instance == <span class="keyword">null</span>)</span><br><span class="line">                    instance = <span class="keyword">new</span> Instance();<span class="comment">//instance‰∏∫volatileÔºåÁé∞Âú®Ê≤°ÈóÆÈ¢ò‰∫Ü</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>1.ÊáíÊ±âÂÆûÁé∞ÊÉ∞ÊÄßÂä†ËΩΩËµÑÊ∫ê„ÄÇ</p>
<ol start="2">
<li>volatile‰øÆÈ•∞ÔºåËÆæÁΩÆÂÜÖÂ≠òÂ±èÈöú„ÄÇÈîôËØØËØ¥Ê≥ïÔºö<del>Âº∫Âà∂Êåá‰ª§ÊâßË°åÈ°∫Â∫èÔºåÂÖàÂàÜÈÖçÂÜÖÂ≠òÁ©∫Èó¥ÔºåÂÜçÂàõÂª∫ÂØπË±°ÔºåÊúÄÂêéÂºïÁî®ÊåáÂêëËØ•ÂØπË±°„ÄÇ</del><br>Ê≠£Á°ÆÔºöÂú®ËøôË°å‰ª£Á†ÅÁöÑnewÊåá‰ª§ÂâçÂä†ÂÖ•StoreStoreÂ±èÈöúÔºåÂú®newÊåá‰ª§ÂêéÂä†ÂÖ•StoreLoadÂ±èÈöúÔºå‰øùËØÅnewÊåá‰ª§ÂÜÖÈÉ®ÁöÑ‰∏âÊ≠•ÔºöÂàÜÈÖçÂÜÖÂ≠òÁ©∫Èó¥ÔºåÂàõÂª∫ÂØπË±°ÔºåÂºïÁî®ÊåáÂêëËØ•ÂØπË±°ÁöÑÂÆåÊàêÔºåÊâçÊúâÂ§ñÈÉ®ËØªÊìç‰ΩúÔºå‰πüÂ∞±ÊòØifÁ©∫Âà§Êñ≠ÁöÑËØªÂèñ„ÄÇ<br>ÊÄª‰ΩìÊïàÊûúÂ∞±ÊòØ‰∏Ä‰∏™Á∫øÁ®ãÂØπvolatileÁöÑËØªÔºå‰ºòÂÖà‰∫éÂÖ∂‰ªñÁ∫øÁ®ãÂØπvolatileÁöÑÂÜô„ÄÇ<br>ÊåñÈáçÁÇπÔºåStoreLoadÊòØÂÖ®ËÉΩÂ±èÈöúÔºåÊÄªÁ∫ø‰ºöÊúâLockÂâçÁºÄÊåá‰ª§ÔºåÁ°Æ‰øùÂÜôÊìç‰ΩúÁöÑ‰∏ªÂ≠òÂà∑Êñ∞‰ª•ÂèäCPUÁºìÂ≠òÂ§±Êïà„ÄÇ</li>
<li>static‰øÆÈ•∞ÔºåÂÆö‰πâÂ±û‰∫éÁ±ªÂèòÈáèÔºå‰øùËØÅÂçï‰æã</li>
<li>Á¨¨‰∏Ä‰∏™Âà§Êñ≠nullÔºåËøáÊª§synchronizedÈîÅÁöÑÊÄßËÉΩÊ∂àËÄó</li>
<li>ÂêåÊ≠•ÂùóÔºåËÆæÁΩÆ‰∏¥ÁïåÂå∫ÔºåÂêåÊó∂Èó¥Âè™ÂÖÅËÆ∏‰∏Ä‰∏™Á∫øÁ®ãÂÆåÊàêÂØπË±°ÁöÑÂàõÂª∫„ÄÇ</li>
<li>Á¨¨‰∫å‰∏™Âà§Êñ≠nullÔºåÈò≤Ê≠¢Â§öÁ∫øÁ®ãËøõÂÖ•Á¨¨‰∏Ä‰∏™Âà§Êñ≠nullÔºåËÄåÂØºËá¥Â§öÂØπË±°ÁöÑÂàõÂª∫„ÄÇ</li>
</ol>
<blockquote>
<p>Q: ËøáÂéªDCL‰∏çÂÆâÂÖ®ÁöÑÂéüÂõ†Ôºü<br>JVM1.4ÂâçÔºåÂÖÅËÆ∏Êåá‰ª§Ê∑∑‰π±ÊÉÖÂÜµ„ÄÇfinalÔºö‰∏Ä‰∏™Á∫øÁ®ãÊûÑÈÄ†ÂáΩÊï∞‰∏∫final‰øÆÈ•∞ÂèòÈáèËµãÂÄºÔºåÂè¶‰∏Ä‰∏™Á∫øÁ®ãÂèØËÉΩËé∑ÂèñfinalÁöÑÂàùÂßãÂåñ0ÂÄºÔºõvolatileÔºöÂè™‰øùËØÅËØªÂèØËßÅÊÄßÔºå‰∏ç‰øùËØÅÂÜôÁöÑÈ°∫Â∫è</p>
</blockquote>
<blockquote>
<p>Q: ‰∏çÁî®volatileÔºåÂÖà‰∏¥Êó∂ÂèòÈáèÔºåÂÜçËµãÂÄºÂà∞Âçï‰æãÂèòÈáèÔºåÊòØÂê¶ËÉΩËß£ÂÜ≥Êåá‰ª§ÈáçÊéíÔºü<br> ‰∏çËÉΩÔºåJVMÂè™ÊòØÊΩúÂú®ÁöÑreorderÊé®Êâã‰πã‰∏ÄÔºåCPUÂíåÁºìÂ≠ò‰πü‰ºöÂØºËá¥ÈáçÊéí</p>
</blockquote>
<blockquote>
<p>Q: Êñ∞ÁâàÊú¨volatileÂ¶Ç‰Ωï‰øùËØÅDCLÂÆâÂÖ®Ôºü<br>ËÆæÁΩÆÂÜÖÂ≠òÂ±èÈöúÔºåÈò≤Ê≠¢Êåá‰ª§ÈáçÊãçÔºåÂÖ∂‰∏≠store-loadÂ±èÈöúÊòØ‰øùËØÅËØªÂÜôÈ°∫Â∫èÔºåÂÆûÁé∞volatile‰∏äÁöÑhappens-beforeËØ≠‰πâÔºåÂç≥‰∏Ä‰∏™Á∫øÁ®ãÂØπvolatileÂèòÈáèÁöÑÂÜôÔºåÂÖà‰∫éÂÖ∂‰ªñÁ∫øÁ®ãÂØπËØ•ÂèòÈáèÁöÑÂêåÊó∂ËØª„ÄÇÂ±èÈöúÁöÑÁªìÊûúÂ∞±ÊòØÂéüÊù•Âè™‰øùËØÅvolatileÂ≠óÊÆµÊú¨Ë∫´ÁöÑÂèØËßÅÊÄßÔºåÁé∞Âú®‰øùËØÅÊú¨Ë∫´‰ª•ÂèäÊâÄÊúâÁõ∏ÂÖ≥Â≠óÊÆµÁöÑÂèØËßÅÊÄßÔºå‰ª£‰ª∑Â∞±ÊòØÈÄ†ÊàêËÆøÈóÆvolatileÂ≠óÊÆµÁöÑÊõ¥Â§ßÊÄßËÉΩÂºÄÈîÄ„ÄÇ</p>
</blockquote>
<blockquote>
<p>QÔºöÊòØÂê¶ÂèØ‰ª•Áî®finalÂÆûÁé∞DCLÔºü<br>ËÉΩ„ÄÇ<br>a.ÂØπfinalÂ≠óÊÆµÁöÑÂÜôÂøÖÁÑ∂ÂÖà‰∫éÂÖ∂ÂÆÉÁ∫øÁ®ãË£ÖËΩΩËØ•finalÂ≠óÊÆµÁöÑÂÖ±‰∫´ÂºïÁî®„ÄÇÔºàfinalÂ≠óÊÆµÂøÖÈ°ªË¢´Ê≠£Á°ÆÂú∞ËµãÂÄºÂêéÂÖ∂ÂÆÉÁ∫øÁ®ãÊâçËÉΩËØªÂèñÂà∞ÂÆÉÔºâ<br>b. ÊûÑÈÄ†ÂáΩÊï∞ÊâßË°åÂÆåÊØïÂêéÔºåÂØπ final Â≠óÊÆµÁöÑÊâÄÊúâÂÜô‰ª•ÂèäÈÄöËøáËøô‰∫õ final Â≠óÊÆµÈó¥Êé•ÂèØÂèäÁöÑÂèòÈáèÂèò‰∏∫‚ÄúÂÜªÁªì‚ÄùÔºåÊâÄÊúâÂú®ÂÜªÁªì‰πãÂêéËé∑ÂæóÂØπËøô‰∏™ÂØπË±°ÁöÑÂºïÁî®ÁöÑÁ∫øÁ®ãÈÉΩ‰ºö‰øùËØÅÁúãÂà∞ÊâÄÊúâÂÜªÁªìÂ≠óÊÆµÁöÑÂÜªÁªìÂÄº„ÄÇÔºàÊâÄÊúâÁ∫øÁ®ãÂØπfinalÂèäÂÖ∂Èó¥Êé•Â≠óÊÆµÊúâ‰∏ÄËá¥ÁöÑÂèØËßÅÊÄßÔºâ<br>c. ÂàùÂßãÂåñ final Â≠óÊÆµÁöÑÂÜôÂ∞Ü‰∏ç‰ºö‰∏éÊûÑÈÄ†ÂáΩÊï∞ÂÖ≥ËÅîÁöÑÂÜªÁªìÂêéÈù¢ÁöÑÊìç‰Ωú‰∏ÄËµ∑ÈáçÊéíÂ∫è„ÄÇÔºàÊûÑÈÄ†ÂáΩÊï∞ÂÜÖÈÉ®ÔºåÂØπÊüê‰∏™finalÂ≠óÊÆµËÄåË®ÄÔºåÂÆÉÁöÑÂÜªÁªìÁÇπ‰πãÂâçÁöÑÊìç‰ΩúÂøÖÁÑ∂ÂÖà‰∫éÂÜªÁªìÁÇπ‰πãÂêéÁöÑÊìç‰ΩúÔºâ</p>
</blockquote>
<blockquote>
<p> ÂÜçÊù•ËØ¥‰∏Ä‰∏ãfinalÂüüÁöÑÈáçÊéíËßÑÂàôÔºö</p>
<ol>
<li>ÂÜôfinalÁöÑÈáçÊéíËßÑÂàôÔºö<br>JMMÁ¶ÅÊ≠¢ÁºñËØëÂô®ÊääfinalÂüüÁöÑÂÜôÈáçÊéíÂ∫èÂà∞ÊûÑÈÄ†ÂáΩÊï∞‰πãÂ§ñ„ÄÇ<br>Âú®finalÂüüÁöÑÂÜô‰πãÂêéÔºåÊèíÂÖ•‰∏Ä‰∏™StoreStoreÂ±èÈöú„ÄÇ<br>‰πüÂ∞±ÊòØËØ¥Á°Æ‰øùÔºöÂú®ÂØπË±°ÂºïÁî®‰∏∫‰ªªÊÑèÁ∫øÁ®ãÂèØËßÅ‰πãÂâçÔºåÂØπË±°ÁöÑfinalÂüüÂ∑≤ÁªèË¢´Ê≠£Á°ÆÂàùÂßãÂåñËøá‰∫Ü„ÄÇ</li>
<li>ËØªfinalÁöÑÈáçÊéíËßÑÂàôÔºö<br>Âú®‰∏Ä‰∏™Á∫øÁ®ã‰∏≠ÔºåÂàùÊ¨°ËØªÂØπË±°ÂºïÁî®‰∏éÂàùÊ¨°ËØªËØ•ÂØπË±°ÂåÖÂê´ÁöÑfinalÂüüÔºåJMMÁ¶ÅÊ≠¢Â§ÑÁêÜÂô®ÈáçÊéíÂ∫èËøô‰∏§‰∏™Êìç‰ΩúÔºàÊ≥®ÊÑèÔºåËøô‰∏™ËßÑÂàô‰ªÖ‰ªÖÈíàÂØπÂ§ÑÁêÜÂô®Ôºâ„ÄÇ<br>Âú®ËØªfinalÂüüÊìç‰ΩúÁöÑÂâçÈù¢ÊèíÂÖ•‰∏Ä‰∏™LoadLoadÂ±èÈöú„ÄÇ<br>‰πüÂ∞±ÊòØËØ¥Á°Æ‰øùÔºöÂú®ËØª‰∏Ä‰∏™ÂØπË±°ÁöÑfinalÂüü‰πãÂâçÔºå‰∏ÄÂÆö‰ºöÂÖàËØªÂåÖÂê´Ëøô‰∏™finalÂüüÁöÑÂØπË±°ÁöÑÂºïÁî®„ÄÇ</li>
<li>Â¶ÇÊûúfinalÂüüÊòØÂºïÁî®Á±ªÂûãÔºåÈÇ£‰πàÂ¢ûÂä†Â¶Ç‰∏ãÁ∫¶ÊùüÔºö<br>Âú®ÊûÑÈÄ†ÂáΩÊï∞ÂÜÖÂØπ‰∏Ä‰∏™finalÂºïÁî®ÁöÑÂØπË±°ÁöÑÊàêÂëòÂüüÁöÑÂÜôÂÖ•Ôºå‰∏éÈöèÂêéÂú®ÊûÑÈÄ†ÂáΩÊï∞Â§ñÊääËøô‰∏™Ë¢´ÊûÑÈÄ†ÂØπË±°ÁöÑÂºïÁî®ËµãÂÄºÁªô‰∏Ä‰∏™ÂºïÁî®ÂèòÈáèÔºåËøô‰∏§‰∏™Êìç‰Ωú‰πãÈó¥‰∏çËÉΩÈáçÊéíÂ∫è„ÄÇ<br>Â∞±ÊòØÁ°Æ‰øùÂú®ÊûÑÈÄ†ÂáΩÊï∞Â§ñÊääËøô‰∏™Ë¢´ÊûÑÈÄ†ÂØπË±°ÁöÑÂºïÁî®ËµãÂÄºÁªô‰∏Ä‰∏™ÂºïÁî®ÂèòÈáè‰πãÂâçÔºåfinalÂüüÂ∑≤ÁªèÂÆåÂÖ®ÂàùÂßãÂåñÂπ∂‰∏îËµãÂÄºÁªô‰∫ÜÂΩìÂâçÊûÑÈÄ†ÂØπË±°ÁöÑÊàêÂëòÂüüÔºåËá≥‰∫éÂàùÂßãÂåñÂíåËµãÂÄºËøô‰∏§‰∏™Êìç‰ΩúÂàô‰∏çÁ°Æ‰øùÂÖàÂêéÈ°∫Â∫è„ÄÇÔºâ</li>
</ol>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FinalWrapper</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> T value;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">FinalWrapper</span><span class="params">(T value)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.value = value;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Foo</span> </span>&#123;</span><br><span class="line">   <span class="keyword">private</span> FinalWrapper&lt;Helper&gt; helperWrapper;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">public</span> Helper <span class="title">getHelper</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      FinalWrapper&lt;Helper&gt; wrapper = helperWrapper;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (wrapper == <span class="keyword">null</span>) &#123;</span><br><span class="line">          <span class="keyword">synchronized</span>(<span class="keyword">this</span>) &#123;</span><br><span class="line">              <span class="keyword">if</span> (helperWrapper == <span class="keyword">null</span>) &#123;</span><br><span class="line">                  helperWrapper = <span class="keyword">new</span> FinalWrapper&lt;Helper&gt;(<span class="keyword">new</span> Helper());</span><br><span class="line">              &#125;</span><br><span class="line">              wrapper = helperWrapper;</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> wrapper.value;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Q: DCLÊòØÂê¶ÊòØÂÆûÁé∞Âçï‰æãÁöÑÊúÄ‰Ω≥ÊñπÊ°àÔºüÊòØÂê¶Êúâ‰ª£ÊõøÔºü<br>‰∏çÊòØ„ÄÇDCLÁöÑÁõÆÁöÑÊòØÊáíÂä†ËΩΩÂíåÊèêÈ´òÊÄßËÉΩÔºå‰ΩÜÁé∞‰ª£JMMÂä†Âº∫volatile‰øùËØÅÂèØÈù†Ôºå‰ΩÜÂâØ‰ΩúÁî®ÊòØÊÄßËÉΩÂºÄÈîÄÂèòÂ§ßÔºå‰∏îÂä†‰∏ä‰∫ÜÂêåÊ≠•ÂùóÁöÑÂºÄÈîÄ„ÄÇ</p>
</blockquote>
<p>ÂÆåÁæéÊñπÊ°àÔºö<br>Êé®ËçêÈÄöËøáÂÜÖÈÉ®Á±ªÂÆûÁé∞ÊÉ∞ÊÄßÂä†ËΩΩÔºö<br>Êúâ‰∏Ä‰∏™Â§ßÂâçÊèêÔºåJVM‰øùËØÅÁ±ªÁöÑÂä†ËΩΩËøáÁ®ãÊòØÁ∫øÁ®ã‰∫íÊñ•„ÄÇ<br>Á¨¨‰∏Ä‰∏™Ë∞ÉÁî®getInstanceÔºåinstanceÂè™Ë¢´ÂàõÂª∫1Ê¨°Ôºå‰∏îËµãÂÄºÁªôinstanceÁöÑÂÜÖÂ≠òÂ∑≤ÂàùÂßãÂåñÂÆåÊØïÔºåÈÅøÂÖçreorderÔºåÊ≠§Â§ñÔºåËØ•ÊñπÊ≥ïÁ¨¨‰∏ÄÊ¨°‰ΩøÁî®‰∫íÊñ•Êú∫Âà∂ÔºåËß£ÂÜ≥ÂêåÊ≠•ÂùóÂ∏¶Êù•ÁöÑÊÄßËÉΩÈóÆÈ¢òÔºõ<br>ÂΩìÁÑ∂ÔºåÂè™ÊúâÁ¨¨‰∏ÄÊ¨°Ë∞ÉÁî®getInstanceÊó∂ÊâçËÆ©instanceÂä†ËΩΩÔºåÊâÄ‰ª•ÊòØÊÉ∞ÊÄß„ÄÇ<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton</span></span>&#123;      </span><br><span class="line">   <span class="function"><span class="keyword">private</span> <span class="title">Singleton</span><span class="params">()</span></span>&#123;</span><br><span class="line">             ‚Ä¶          </span><br><span class="line">&#125;</span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">SingletonContainer</span></span>&#123;</span><br><span class="line">             <span class="keyword">private</span> <span class="keyword">static</span> Singleton instance = <span class="keyword">new</span> Singleton();          </span><br><span class="line">&#125;          </span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title">getInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line">             <span class="keyword">return</span> SingletonContainer.instance;          </span><br><span class="line">&#125;      </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>ÂèÇËÄÉÔºö<a href="https://blog.csdn.net/doraeimo/article/details/5714239" target="_blank" rel="noopener">https://blog.csdn.net/doraeimo/article/details/5714239</a></p>
<h2 id="Á∫øÁ®ãÊ±†ÂèÇÊï∞Ë∞É‰ºò‚ÄîÈõ®Èú≤ÂùáÊ≤æÔºå‰øùÁª©Êïà"><a href="#Á∫øÁ®ãÊ±†ÂèÇÊï∞Ë∞É‰ºò‚ÄîÈõ®Èú≤ÂùáÊ≤æÔºå‰øùÁª©Êïà" class="headerlink" title="Á∫øÁ®ãÊ±†ÂèÇÊï∞Ë∞É‰ºò‚ÄîÈõ®Èú≤ÂùáÊ≤æÔºå‰øùÁª©Êïà"></a>Á∫øÁ®ãÊ±†ÂèÇÊï∞Ë∞É‰ºò‚ÄîÈõ®Èú≤ÂùáÊ≤æÔºå‰øùÁª©Êïà</h2><p>ÈÄöËøáÂéãÊµãÔºåÁ¨¶ÂêàÊúÄÁªàÂú∫ÊôØÔºåË∞ÉÊï¥ÂèÇÊï∞„ÄÇ<br>Â¶Ç‰ΩïËøõË°åÂàùÊ¨°ÂéãÊµãÊó∂ÔºåÁ∫øÁ®ãÊ±†ÂèÇÊï∞ÈÖçÁΩÆÔºü<br>ÂàÜ‰∏§ÁßçÂú∫ÊôØÔºö<br>‰∏ÄÂΩìÂâçÊúçÂä°Âô®ÔºåÂè™‰∏∫ÂΩìÂâçÁ∫øÁ®ãÊ±†ÊúçÂä°„ÄÇ‰πüÂ∞±ÊòØËØ¥ÔºåÁ∫øÁ®ãÊ±†ËÉΩÂ§üÂç†Áî®ÊúçÂä°Âô®ÁöÑÊâÄÊúâËµÑÊ∫êÔºåÊØîÂ¶ÇTomcatÁöÑIOÊ±†ÔºåÂπ∂Ë°åSteamÊµÅ„ÄÇ‰æùÊçÆÂ§ÑÁêÜÈÄªËæëÔºåÊòØCPUÂØÜÈõÜËøòÊòØIOÂØÜÈõÜ„ÄÇCPUÂØÜÈõÜÂ∞±ÈÄâCPUÊï∞+1ÔºåIOÂØÜÈõÜÂ∞±ÈÄâCPUÊï∞ÁöÑ2N+1ÔºåNË∂äÂ§ßÔºåÂèØ‰ª•Âä†2Âä†3„ÄÇÊ†πÊçÆ‰∏ÄËΩÆÂéãÊµãÁªìÊûúÔºåÂÅö‰∏Ä‰∏™ÂèÇÊï∞ÁöÑÂêàÁêÜË∞ÉÊï¥„ÄÇ<br>‰∫åÊòØÂ≠òÂú®ÂæÆÊúçÂä°ÂíåÂ§öÊé•Âè£ÔºåÊØîÂ¶Ç‰∏Ä‰∏™Âú∫ÊôØÔºö5‰∏™Êé•Âè£Ôºö2‰∏™ÈáçË¶ÅÔºå3‰∏™ÈôçÁ∫ßÔºåÈ´òÂπ∂ÂèëÂéãÂäõ‰∏ãÂ∞±‰ºöÂØπ3‰∏™Êé•Âè£ËøõË°åÈôçÁ∫ßÔºå‰øùÈöú2‰∏™ÈáçË¶ÅÂ∞ΩÂèØËÉΩÂàÜÈÖçÂà∞Êõ¥Â§öÊúçÂä°Âô®ËµÑÊ∫ê„ÄÇÂú®‰∏Ä‰∏™ÈáçË¶ÅÊé•Âè£ÈáåÔºåÈúÄË¶ÅÂàõÂª∫Á∫øÁ®ãÊ±†ÔºåÊèêÈ´òÂçïÊé•Âè£Â§ÑÁêÜÈÄüÂ∫¶ÔºåËøô‰∏™Êó∂ÂÄôÔºå‰∏çËÉΩÂè™ÁúãCPUÊ†∏Êï∞ÔºåÁ∫øÁ®ãÊ±†ËÆæÁΩÆÂèÇÊï∞ÈúÄË¶ÅÂÖ∑‰Ωì‰∏Ä‰∏™‰æùÊçÆÔºö<br>È¶ñÂÖàÔºå‰∏Ä‰∏™ÁúüÊ≠£È´òÂπ∂ÂèëÈ°πÁõÆÔºåÂÆÉÁöÑÁõëÊéßÊòØÈùûÂ∏∏ÂÆåÂ§áÁöÑÔºåÈ¶ñÂÖàÊãøÂà∞Á∫ø‰∏äÈ´òÂπ∂ÂèëÂéãÂäõ‰∏ãËØ•ÊúçÂä°ÊâÄÊúâÊé•Âè£ÁöÑËÆøÈóÆÊØî‰æã„ÄÇÊØîÂ¶ÇÂàöÊèêÂà∞5‰∏™Êé•Âè£Ôºå2000Êù°ËØ∑Ê±ÇÊâìÂà∞ÊúçÂä°ÈáåËæπÔºå5‰∏™Êé•Âè£ÂàÜÂà´<strong>ÊâøËΩΩÁùÄ‰∏çÂêåÊØî‰æãÁöÑËÆøÈóÆÈáè</strong>ÔºåÊØîÂ¶Ç2:3:1:1:1„ÄÇÊØîÂ¶ÇÔºåÂú®ÊØî3Ëøô‰∏ÄÂùóÔºåÂÆÉÊúâËµÑÊ†ºËá≥Â∞ëÂç†Áî®ÊúçÂä°ËµÑÊ∫êÁöÑ3/8„ÄÇÂÆÉ‰∏çËÉΩÂ§™Â§ßÔºåÂê¶ÂàôÂç†Áî®ËøáÂ§öËÄåËÆ©ÂÖ∂‰ªñÁ∫øÁ®ãÊó†Ë∑ØÂèØËµ∞„ÄÇ<br>ÈÇ£‰πàÊ≠§Êó∂ÔºåÂü∫Êú¨ÂèØÁ°ÆÂÆömaxPool<strong>ÊúÄÂ§ßÁ∫øÁ®ãÊï∞ÂèÇÊï∞</strong>ÔºåÂç†ÊúçÂä°Âô®Á∫øÁ®ãËµÑÊ∫êÁöÑ3/8„ÄÇ<br>Ëá≥‰∫éÊï¥‰ΩìÊúçÂä°Âô®Â≥∞ÂÄºÊúÄÂ§ßÊâøËΩΩÂ§öÂ∞ëÁ∫øÁ®ãÔºåÂèÇÁÖßCPUÊ†∏Êï∞‰ª•ÂèäQPSÊù•ËØ¥„ÄÇÊØîÂ¶ÇQPS100ÔºåÁõ∏ÂΩì‰∫é1sÂÜÖÊúçÂä°Âô®ÂÜÖÂΩìÂâçÂá†‰∏™CPUÁ∫øÁ®ãËÉΩÊâøËΩΩËµ∑100‰∏™ËØ∑Ê±ÇÁ∫øÁ®ãÔºåÂõ†‰∏∫Â§ÑÁêÜÈÄüÂ∫¶Â§üÂø´„ÄÇÊâÄ‰ª•ÔºåË¶ÅË°°ÈáèÊï¥‰ΩìÊúçÂä°Âô®ÊúÄÂ§ßQPSÔºåÂç≥ÂΩìÂâçÊúçÂä°Âô®ÁöÑ<strong>Âêå‰∏ÄÊó∂ÂàªÊ¥ªË∑ÉÁöÑÁ∫øÁ®ãÊï∞</strong>„ÄÇÂΩìÂâçÊ¥ªË∑ÉÁ∫øÁ®ãÊï∞ÂèØÁ≤óÁï•ÁêÜËß£‰∏∫ËøôÊòØÂü∫‰∫é‰∏öÂä°ÈúÄÊ±ÇÂú∫ÊôØÁöÑËµÑÊ∫êÊï∞ÊúÄÂ§ßÂÄº„ÄÇÂÜçÊ†πÊçÆ3/8ÔºåÂèØ‰ª•Á°ÆÂÆöÊé•Âè£ÊúÄÂ§ßÂàÜÈÖçÁ∫øÁ®ãÂèÇÊï∞ÁöÑÂÄºÔºå100*3/8Á∫¶Á≠â‰∫é40„ÄÇ</p>
<p>Êé•‰∏ãÊù•ÔºåËÄÉËôë<strong>Ê†∏ÂøÉÁ∫øÁ®ãÊï∞</strong>„ÄÇÂàùÊ¨°ÂéãÊµãÊó∂ÔºåËÆæÁΩÆ‰∏∫‰∏éÊúÄÂ§ßÁ∫øÁ®ãÊï∞‰∏ÄËà¨Â§ßÔºåÁúãËÉΩÂê¶Êíë‰Ωè„ÄÇÊíë‰ΩèÂ∞±Â∞ùËØïË∞ÉÂ∞èÂà∞ËµÑÊ∫ê‰∏çÊµ™Ë¥πÔºåÂê¶ÂàôÊíë‰∏ç‰ΩèÔºåË¶ÅÂØπ‰ªªÂä°ÊéíÈòüÈòüÂàóQËÆæÁΩÆÔºåQÊòØÂ≠òÂÇ®ÊéíÈòüÁöÑ‰ªªÂä°„ÄÇQ‰∏çÊé®ËçêÊó†ÁïåÈòüÂàóÔºåËøôÁõ∏ÂΩì‰∫éÊúÄÂ§ßÁ∫øÁ®ãÊï∞Â§±ÊïàÔºåËøùËÉåËÆæËÆ°Á∫øÁ®ãÊ±†ÁöÑÂàùË°∑ÔºåËÄå‰∏îÈ´òÂπ∂ÂèëÂØºËá¥QÁöÑÊó†ÈôêÁßØÂéãËÄåOOM„ÄÇ<strong>QËÆæÁΩÆ‰∏∫ÊúâÁïåÈòüÂàó</strong>ÔºåËøô‰∏™ÁïåÁöÑ‰æùÊçÆÂèàÊòØ‰ªÄ‰πàÂë¢ÔºüÂú®Áîü‰∫ß‰∏äÔºåÂÉèÊä¢Ë¥≠ÁßíÊùÄÈÉΩ‰ºöÊúâ<strong>‰∏Ä‰∏™È´òÂ≥∞ËÆøÈóÆÊó∂ÊÆµ</strong>ÔºåÈÇ£‰πàÂú®ÂéãÊµãÁöÑÊó∂ÂÄôÔºåÈúÄË¶ÅÊ®°Êãü‰∏Ä‰∏™Áîü‰∫ß‰∏äÁöÑÈ´òÂ≥∞ËÆøÈóÆÊó∂ÊÆµ„ÄÇÊØîÂ¶Ç1Â∞èÊó∂Êä¢Ë¥≠Ê¥ªÂä®ÔºåÂ∞±Ë¶ÅËá≥Â∞ëÊåÅÁª≠1Â∞èÊó∂ÁöÑÂéãÊµã„ÄÇÂú®Êó†QÁ≠âÂæÖÊÉÖÂÜµÂéãÊµãÔºåÂ§ßÊ¶ÇÁÆó‰∏Ä‰∏ãÂú®ÂàÜÂ∏ÉÂºèÁéØÂ¢É‰∏ãÁöÑ‰∏Ä‰∏™ËäÇÁÇπ1Â∞èÊó∂ËØ•Êé•Âè£ËÉΩÂ§üÊâøËΩΩÁöÑÊúÄÂ§ßÂÄºÔºåÂ¶ÇËøõÊù•10wÔºåÂè™Â§ÑÁêÜ8wÔºåÂ§±Ë¥•2wÔºå2wÈÄÇÂΩì‰∏äË∞É50%‰Ωú‰∏∫ÊúâÁïåÈòüÂàó‰∏äÈôêÔºå‰∏∫‰∫ÜËÆøÈóÆËäÇÁÇπÂÄæÊñúÁöÑÈóÆÈ¢òÔºåÂ¶ÇÊûúÂùáÂåÄÂèØÊîπ‰∏∫10%ÔºåÂ¶ÇÊûúÊúâËäÇÁÇπ<strong>ËÆøÈóÆÂ∞ñÂà∫</strong>Â∞±Ë¶ÅË∞ÉÂà∞Â∞ñÂà∫ÊúÄÈ´ò‰ΩçÂ∑¶Âè≥„ÄÇË¶ÅÁü•ÈÅìÔºåÂÆûÈôÖÁöÑÈòüÂàó‰∏äÁïå‰∏ÄËà¨ÂæàÂ§ß„ÄÇ</p>
<p>ËøôÂá†‰∏™ÂàùÊ¨°Ë∞ÉÊï¥ÂêéÔºå<strong>ÂºÄÂßãÂ§öËΩÆÂéãÊµã</strong>ÔºåÁúãÊòØÂê¶ËææÂà∞ÊÄßËÉΩÈúÄÊ±ÇÁõÆÁöÑ„ÄÇÂèØÈÄÇÂΩìË∞ÉÂ∞èÁ∫øÁ®ãÊï∞ÔºåÈÅøÂÖçÊµ™Ë¥πÊó†Áî®ÁöÑÁ∫øÁ®ãËµÑÊ∫êÔºåÂõ†‰∏∫ÔºåÂêéÁª≠Ë¶ÅÊ∂âÂèäÊé•Âè£ÈôçÁ∫ßÂíåÁ∫øÁ®ãÊ±†ÂØºËá¥È´òÂèØÁî®ÈóÆÈ¢ò„ÄÇ‰∏ÄÊ≠•Ê≠•Ë∞ÉÂà∞ÊúÄÂ•ΩÔºåËøôÊòØÊúÄÁêÜÊÉ≥ÁöÑ„ÄÇ<br>‰ΩÜÂæÄÂæÄÂèØËÉΩÔºåÊ≤°ÊúâËææÂà∞È¢ÑÊúüÔºåÂàöÂàöÂ∑≤ÁªèÁªô3/8ÊúÄÂ§ßËµÑÊ∫êÈáèÔºåËøò‰∏çÂ§ü„ÄÇÁ¨¨‰∏ÄÁÇπÔºå<strong>ÂÜçÊ¨°Ë∞ÉÈ´òÈòüÂàóÂ≠òÂÇ®‰∏äÈôê</strong>ÔºåÂâçÊèêÊòØ‰∏öÂä°ËÉΩÂ§üÊé•ÂèóËøôÁßçÁ≠âÂæÖÊÖ¢ÔºåÂÖà‰∏çË¶ÅÊÉ≥Â¢ûÂä†ÂêåÊó∂Á∫øÁ®ãÊï∞ÔºåËÄåÊòØÈÄöËøá‰ªªÂä°Á©∫Èó¥ÁºìÂÜ≤Ôºå‰øùÊåÅÂΩìÂâçÊé•Âè£Á®≥ÂÆöËøêË°åÔºå‰∏î‰∏çÂΩ±ÂìçÂÖ∂‰ªñÊé•Âè£„ÄÇÁ¨¨‰∫åÁÇπÔºå‰∏çÊé•ÂèóQËøáÂ§ßÔºåÊÉ≥Â∞ΩÂø´Â§ÑÁêÜ‰ªªÂä°ÔºåÈÇ£‰πàÔºåË¶Å‰ªéÂçïÊú∫ÂçïÊé•Âè£ÁöÑ<strong>‰ª£Á†ÅÁöÑÂπ∂ÂèëÊÄßË∞ÉÈ´ò</strong>Ôºå‰ªéÂêûÂêêÈáèÂíåRTÂÖ•ÊâãÔºåÊØîÂ¶ÇÔºåDBËÆøÈóÆÊòØÁì∂È¢àÔºå‰ΩøÁî®ÁºìÂ≠òÔºõÁ¨¨‰∏âÊñπÊé•Âè£ÊòØÁì∂È¢àÔºå‰ΩøÁî®ÂºÇÊ≠•MQÂ§ÑÁêÜÔºõÁßíÊùÄ‰∏öÂä°ÔºåÂºÄGzipÂéãÁº©ÂíåÂÅöÈùôÊÄÅÈ°µÈù¢„ÄÇÁ¨¨‰∏âÁÇπÔºåÂ∑≤Á´≠Â∞ΩÊâÄÊúâÔºå<strong>Âè™ËÉΩÁ∫øÁ®ãÊï∞ÈÄÇÂΩìË∞ÉÂ§ß‰∏ÄÁÇπ</strong>„ÄÇ‰ΩÜ‰∏çËÉΩÂ§™Â§ßÔºåÂ¶ÇÊûú‰ª•ÂΩìÂâçÊé•Âè£Âà©Áõä‰∏∫‰∏≠ÂøÉÔºåËÄåÊØÅÂùèÂÖ∂‰ªñÊé•Âè£ÊåÅÊúâÊúçÂä°Âô®ËµÑÊ∫êÁöÑÊùÉÂà©ÔºåËøôÊòØÊØîËæÉÁ≥üÁ≥ïÁöÑ„ÄÇÊâÄ‰ª•ÔºåÂú®ÂØπÈáçË¶ÅÊé•Âè£ÁöÑÁ∫øÁ®ãÊï∞Ë∞ÉÂ§ßÁöÑÂêåÊó∂ÔºåË¶ÅÂØπÂÖ∂‰ªñÊé•Âè£ÂÅö<strong>ÈôçÁ∫ßÂ§ÑÁêÜ</strong>ÔºåÁõ∏ÂΩì‰∫éÈôçÁ∫ßÊé•Âè£ÂéªÁâ∫Áâ≤ÂÆÉÁöÑÊúçÂä°Âô®ËµÑÊ∫êÔºåÂàÜÊëäÁªôÈáçË¶ÅÊé•Âè£„ÄÇ<br>‰ΩÜÂÖ∂ÂÆûÔºåËøôÂÅöÊ≥ï‰∏çË¶ÅÂÅöÔºåÂ∫îËØ•Âêë‰∏äÁ∫ß<strong>Áî≥ËØ∑Âä†ËäÇÁÇπ</strong>ÔºåÈÄöËøáÈõÜÁæ§ÂàÜÊëä„ÄÇ<br>Âõ†‰∏∫ÔºåË∞ÉÂ§ßÁ∫øÁ®ãÊï∞ÔºåÊòØËÆ©ÂÖ∂‰ªñÊé•Âè£ÂÜíÁùÄÈ£éÈô©„ÄÇÂÖ∂‰ªñÁöÑÊé•Âè£ËÆæÁΩÆÁ∫øÁ®ãÊï∞Â∞è‰∫ÜÔºåÂæàÊúâÂèØËÉΩËµ∞Âà∞ÊäõÂºÇÂ∏∏ÁöÑÈ•±ÂíåÁ≠ñÁï•ÔºåËøôÊ†∑ÔºåÂÆÉÊäõÂá∫ÂºÇÂ∏∏ÊØî‰æãÂçáÈ´òÔºåÈÄ†ÊàêÊé•Âè£ÁöÑÁÜîÊñ≠ÊàñÈôçÁ∫ß„ÄÇ<br>ËøôÊú¨Êù•Â§üÁî®ÁöÑÊúçÂä°ËµÑÊ∫êÔºåÁî±‰∫éËÆæÁΩÆÁ∫øÁ®ãÊ±†ÂèÇÊï∞‰∏çÂêàÁêÜËÄåÂØºËá¥ÂºÇÂ∏∏ÁÜîÊñ≠ÊàñÈôçÁ∫ßÔºåACÔºåÂπ¥ÁªàÁª©ÊïàÊ≤°Êúâ‰∫ÜÔºåÂøÖËÉåÈîÖ„ÄÇÁ∫øÁ®ãÊï∞Ë∞ÉÂæóËøáÂ§ßÔºåËøô‰∫ãÊõ¥Â§ßÔºå‰Ω†Âç†Áî®‰∫ÜÈ¢ùÂ§ñÁöÑËµÑÊ∫êÔºåÂØºËá¥Âà´ÁöÑÊé•Âè£ÁöÑËØ∑Ê±ÇÁßØÂéã„ÄÇ</p>
<p>Ëá≥‰∫éÔºåkeepAliveÁ©∫Èó≤Á∫øÁ®ãÂ≠òÊ¥ªÊó∂Èó¥ÔºåÂè™ÊòØÂ§çÁî®ÊÄßÁöÑ‰ºòÂåñÔºåÊ†πÊçÆÊµãËØïÔºåÁúãÊúâÊó†Ëß¶ÂèäÈòªÂ°ûÈòüÂàóÈòàÂÄºÔºåÂ¶ÇÊûúÈ¢ëÁπÅËß¶ÂèäÔºåËØ¥Êòé‰∏öÂä°ÊÄªÈúÄË¶ÅÈùûÊ†∏ÂøÉÁ∫øÁ®ãÔºåÈÄÇÂΩìË∞ÉÂ§ßÂ≠òÊ¥ªÊó∂Èó¥„ÄÇ‰∏ÄËà¨ÈªòËÆ§Âç≥ÂèØÔºåÂõ†‰∏∫ÊàëÂ∑≤ÁªèÁ°ÆÂÆöÂΩìÂâçÊúÄÂ§ßÁ∫øÁ®ãÊï∞Áªù‰∏ç‰ºöÂΩ±ÂìçÂà∞ÊúçÂä°ÁöÑÂÖ∂‰ªñÊé•Âè£ËµÑÊ∫êÔºåÂÆÉÁöÑË∞ÉÊï¥‰ºòÂåñ‰ΩúÁî®ÈùûÂ∏∏ÊúâÈôê„ÄÇ</p>
<p>È•±ÂíåÁ≠ñÁï•ÔºåÂ§ßÂ§öÊï∞‰∏öÂä°ÊäõÂºÇÂ∏∏ÔºåËÆ∞ÂΩïÊó•ÂøóÔºåÁÜîÊñ≠ÊàñÈôçÁ∫ßÂ§ÑÁêÜÔºåÂÅöÈáçËØïÊú∫Âà∂„ÄÇ</p>
<p>ÊúÄÂêéÔºåÁêÜËß£‰ª•‰∏äËøô‰∫õÔºåÈÇ£‰πàÊàë‰ª¨ÂèØ‰ª•ÂêàÁêÜÈÖçÁΩÆhystrixÊàñsentinel„ÄÇ</p>

        </div>
        
<blockquote class="post-copyright">
    <div class="content">
        
<span class="post-time">
    Last updated: <time datetime="2022-03-23T17:49:36.253Z" itemprop="dateUpdated">2022-03-24 01:49:36</time>
</span><br>


        
        ËΩ¨ËΩΩÊ≥®ÊòéÂá∫Â§ÑÔºåÂéüÊñáÂú∞ÂùÄÔºö<a href="/2022/03/23/concurrent-programming/" target="_blank" rel="external">https://github.com/missionOdd/2022/03/23/concurrent-programming/</a>
        
    </div>
    <div class="mdui-chip" id="accost-btn">
      <span class="mdui-chip-icon mdui-color-red-a700"><i class="mdui-icon material-icons">&#xe311;</i></span>
      <span class="mdui-chip-title">Accost</span>
    </div>
    <footer>
      <div class="mdui-chip">
        <a href="https://github.com/missionOdd">
            <img src="/img/avatar.jpg" alt="Missionary">
             About Missionary
        </a>
        </div>
    </footer>
</blockquote>


        
            <div class="page-reward">
    <a id="rewardBtn" href="javascript:;" class="page-reward-btn waves-effect waves-circle waves-light">Ëµè</a>
</div>

            
        
        <div class="post-footer">
            
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ÂéüÁêÜ/">ÂéüÁêÜ</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ÊäÄÊúØ/">ÊäÄÊúØ</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/È´òÂπ∂Âèë/">È´òÂπ∂Âèë</a></li></ul>

            <div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://github.com/missionOdd/2022/03/23/concurrent-programming/&title=„ÄäÂπ∂ÂèëÁºñÁ®ã| volatile&ÈîÅÂçáÁ∫ß&DCL&Á∫øÁ®ãÊ±†Ë∞É‰ºò„Äã ‚Äî üéâ Missionary's Blog üòÜ&pic=https://github.com/missionOdd/img/avatar.jpg" data-title="ÂæÆÂçö">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="ÂæÆ‰ø°">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://github.com/missionOdd/2022/03/23/concurrent-programming/&title=„ÄäÂπ∂ÂèëÁºñÁ®ã| volatile&ÈîÅÂçáÁ∫ß&DCL&Á∫øÁ®ãÊ±†Ë∞É‰ºò„Äã ‚Äî üéâ Missionary's Blog üòÜ&source=WebÂêéÁ´Ø/JavaÂú®Â≠¶/ÂçïË∫´" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>

        </div>
        
            <div class="mdui-container">
  <div class="mdui-tab" id="tab">
    <a href="#tab1-content" id="tab1" class="mdui-ripple">Ê∏∏ÂÆ¢Áî®Êà∑</a>
    <a href="#tab2-content" id="tab2" class="mdui-tab-active mdui-ripple">GitHubË¥¶Êà∑</a>
  </div>

  <div id="tab1-content" class="mdui-p-a-2">
    
      <div id="comment" style=""></div>

  </div>
  <div id="tab2-content" class="mdui-p-a-2">
    
          
    <div onclick="ShowGitment()" id="gitment-display-button" style="display: block;">
        <span>ÊòæÁ§∫ Gitment ËØÑËÆ∫</span>
    </div>
    <div id="gitment" class="hide"></div>


    
  </div>

</div>

        
    </div>
    
<nav class="post-nav flex-row flex-justify-between flex-row-reverse">
  

  
    <div class="next">
      <a href="/2022/02/15/p7-interview-skills-1/" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">Èù¢Áªè | Âü∫Á°ÄÈù¢+Ë∞É‰ºòÁªèÈ™åÔºåÈ´òP7ÂºÄÂèë‰∏ÄÈù¢ÊëòÂΩïÁ¨îËÆ∞</h4>
      </a>
    </div>
  
</nav>


    
    
        <aside class="post-widget">
            <nav class="post-toc-wrap" id="post-toc">
                <strong>ÁõÆÂΩï</strong>
                <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#volatile"><span class="post-toc-number">1.</span> <span class="post-toc-text">volatile</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#QÔºösynchronized-Âíå-lock-ÁöÑÂå∫Âà´Ôºü"><span class="post-toc-number">1.1.</span> <span class="post-toc-text">QÔºösynchronized Âíå lock ÁöÑÂå∫Âà´Ôºü</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#ÈîÅÂçáÁ∫ßËØ¶Ëß£"><span class="post-toc-number">2.</span> <span class="post-toc-text">ÈîÅÂçáÁ∫ßËØ¶Ëß£</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#synchronizedÂèØÈáçÂÖ•"><span class="post-toc-number">2.1.</span> <span class="post-toc-text">synchronizedÂèØÈáçÂÖ•</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Âçï‰æãÊ®°ÂºèÁöÑÂéüÂõ†"><span class="post-toc-number">3.</span> <span class="post-toc-text">Âçï‰æãÊ®°ÂºèÁöÑÂéüÂõ†</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Á∫øÁ®ãÊ±†ÂèÇÊï∞Ë∞É‰ºò‚ÄîÈõ®Èú≤ÂùáÊ≤æÔºå‰øùÁª©Êïà"><span class="post-toc-number">4.</span> <span class="post-toc-text">Á∫øÁ®ãÊ±†ÂèÇÊï∞Ë∞É‰ºò‚ÄîÈõ®Èú≤ÂùáÊ≤æÔºå‰øùÁª©Êïà</span></a></li></ol>
            </nav>
            <div class="toc-bar"><div>
        </aside>
    

</article>

    <div id="reward" class="page-modal reward-lay">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <h3 class="reward-title">
        <i class="icon icon-quote-left"></i>
        Êàë‰ª¨‰∏ÄËµ∑Êù•ËÆ©Ëøô‰∏™‰∏ñÁïåÊúâË∂£‰∏ÄÁÇπ
        <i class="icon icon-quote-right"></i>
    </h3>
    <div class="reward-content">
        
        <div class="reward-code">
            <img id="rewardCode" src="/img/reward-wechat.jpg" alt="ÊâìËµè‰∫åÁª¥Á†Å">
        </div>
        
        <label class="reward-toggle">
            <input id="rewardToggle" type="checkbox" class="reward-toggle-check"
                data-wechat="/img/reward-wechat.jpg" data-alipay="/img/reward-alipay.jpg">
            <div class="reward-toggle-ctrol">
                <span class="reward-toggle-item wechat">ÂæÆ‰ø°</span>
                <span class="reward-toggle-label"></span>
                <span class="reward-toggle-item alipay">ÊîØ‰ªòÂÆù</span>
            </div>
        </label>
        
    </div>
</div>

    

</div>

    </main>
    <footer class="footer ">
    
    <div class="top">
        
            <p>
    <span>LinksÔºö</span>
    
    <span class="blogroll-item">
        <a href="https://github.com/missionOdd" target="_blank">HOME</a>
    </span>
    
</p>

        
    </div>
    
    <div class="mdui-bottom-nav">
  <a href="javascript:;" class="mdui-ripple mdui-bottom-nav-active">
    <i class="mdui-icon material-icons">history</i>
    <label>Recents</label>
  </a>
  <a href="javascript:;" class="mdui-ripple">
    <i class="mdui-icon material-icons">favorite</i>
    <label>Favorites</label>
  </a>
  <a href="javascript:;" class="mdui-ripple">
    <i class="mdui-icon material-icons">&#xe80e;</i>
    <label>Hot</label>
  </a>

</div>
    <div class="bottom">
        <p>
            <span>
                Missionary &copy; 2018 - 2022
            </span>
           	
           	<span>
           		<a href="http://www.miitbeian.gov.cn/" target="_blank">Á≤§ICPÂ§á19008953Âè∑</a>
           	</span>
           	

            

            <span>
	            Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/codefine/hexo-theme-mellow" target="_blank">mellow</a>
            </span>
            

            
            <span>
	            Hosted by <a href="https://coding.net/pages" target="_blank">Coding Pages</a>
            </span>
            


        </p>
        <p>
          
              
<span class="site-uv" title="ÊÄªËÆøÂÆ¢Èáè">
    <i class="icon icon-user"></i>
    <i class="busuanzi-value" id="busuanzi_value_site_uv"></i>
</span>


<span class="site-pv" title="ÊÄªËÆøÈóÆÈáè">
    <i class="icon icon-eye"></i>
    <i class="busuanzi-value" id="busuanzi_value_site_pv"></i>
</span>


          
          <span id="timeDate">ËΩΩÂÖ•Â§©Êï∞...</span><span id="times">ËΩΩÂÖ•Êó∂ÂàÜÁßí...</span>
          <script>
              var now = new Date();
              function createtime() {
                  var grt= new Date("09/15/2018 12:49:00");//Ê≠§Â§Ñ‰øÆÊîπ‰Ω†ÁöÑÂª∫Á´ôÊó∂Èó¥ÊàñËÄÖÁΩëÁ´ô‰∏äÁ∫øÊó∂Èó¥
                  now.setTime(now.getTime()+250);
                  days = (now - grt ) / 1000 / 60 / 60 / 24; dnum = Math.floor(days);
                  hours = (now - grt ) / 1000 / 60 / 60 - (24 * dnum); hnum = Math.floor(hours);
                  if(String(hnum).length ==1 ){hnum = "0" + hnum;} minutes = (now - grt ) / 1000 /60 - (24 * 60 * dnum) - (60 * hnum);
                  mnum = Math.floor(minutes); if(String(mnum).length ==1 ){mnum = "0" + mnum;}
                  seconds = (now - grt ) / 1000 - (24 * 60 * 60 * dnum) - (60 * 60 * hnum) - (60 * mnum);
                  snum = Math.round(seconds); if(String(snum).length ==1 ){snum = "0" + snum;}
                  document.getElementById("timeDate").innerHTML = "Êú¨Á´ôÂ∑≤ÂÆâÂÖ®ËøêË°å "+dnum+" Â§© ";
                  document.getElementById("times").innerHTML = hnum + " Â∞èÊó∂ " + mnum + " ÂàÜ " + snum + " Áßí";
              }
          setInterval("createtime()",250);
          </script>
        </p>
    </div>

</footer>

    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light mdui-ripple"><span class="icon icon-lg icon-chevron-up"></span></a>



<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://github.com/missionOdd/2022/03/23/concurrent-programming/&title=„ÄäÂπ∂ÂèëÁºñÁ®ã| volatile&ÈîÅÂçáÁ∫ß&DCL&Á∫øÁ®ãÊ±†Ë∞É‰ºò„Äã ‚Äî üéâ Missionary's Blog üòÜ&pic=https://github.com/missionOdd/img/avatar.jpg" data-title="ÂæÆÂçö">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="ÂæÆ‰ø°">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://github.com/missionOdd/2022/03/23/concurrent-programming/&title=„ÄäÂπ∂ÂèëÁºñÁ®ã| volatile&ÈîÅÂçáÁ∫ß&DCL&Á∫øÁ®ãÊ±†Ë∞É‰ºò„Äã ‚Äî üéâ Missionary's Blog üòÜ&source=WebÂêéÁ´Ø/JavaÂú®Â≠¶/ÂçïË∫´" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>Êâ´‰∏ÄÊâ´ÔºåÂàÜ‰∫´Âà∞ÂæÆ‰ø°</p>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAN4AAADeCAAAAAB3DOFrAAACvUlEQVR42u3a0WpbMRAEUP//T6cvhRbKdWZ2JRPKuU8mdmQdBbTKaF+v+Pn659m82z5/j/O68eDh4eGtp/409NMX5BPKp5v87vs54+Hh4d3mvf+CDWy2TO9/nswZDw8P76fx8knPCgMeHh7e/8RrQ4R25ISEh4eH9xN4swi1ndD7mKM9Uh/OWvDw8PAmO/Zrv5V/5vWV+z08PDy89a16suHOtub8Ymx2lP/9W3h4eHgXePmGuz92t1dl7w/ieeCLh4eHd5aXXGLlW/Cm6WoTQDyOhoeHh3eNtwlbN5debTNWXTDw8PDwPsjLqe1hejOHPJ7Aw8PD+wzv/fE3P/gm7VztJ/OjebG6eHh4eCNeMtHZ1pwfoE+N/E0RwsPDwzvEy0OBvIQk7+bgvAxEfzE8PDy8Na9tTt20tOY1Ko93h41feHh4eAtecrQ99ZXHtvU8qsDDw8O7wMuvr/bhb9t80JaNx0XEw8PDu8DLJx2dx8ugNi8S7ULg4eHh3ePNrr7aS7K81aCNQq7c7OHh4eE98Np8N/nk2auy2ScfsxY8PDy8NS9pIMhD3qTRqn2dH+6j8oCHh4e35s0OzW240E4rD4i/eRcPDw/vAu9UBhzVn/VEVxEGHh4e3iFei6lv1eIDeguOogo8PDy8C7x8WrMLqvbInl/LzQoSHh4e3ileGzREaxMsXIJpx6ljCDw8PLwF79QGPWs1aK/NksM6Hh4e3md4mzx4v63PYoUon8bDw8M7xPsqnzawmDVO5SN/MyYeHh7eBV67ibdNUW3A0Ya2p8IRPDw8vJaXFIN26H15mBWG+mCNh4eHt+DVGUZZTl7XnjprwcPDw/s4b9aGlZSc9louWko8PDy8H8ObMfZNBsOuWzw8PLwLvCSM2AQWs0uvdrkfCwMeHh7eUd7+H/5Zq8GNz1/JM/Dw8PD+PL8AN2nkKa9i36EAAAAASUVORK5CYII=" alt="ÂæÆ‰ø°ÂàÜ‰∫´‰∫åÁª¥Á†Å">
</div>



    
   <canvas class="fireworks" style="position: fixed;left: 0;top: 0;z-index: 1; pointer-events: none;" ></canvas>
   <script type="text/javascript" src="//cdnjs.cat.net/ajax/libs/animejs/2.2.0/anime.min.js"></script>
   <script type="text/javascript" src="/js/plugins/fireworks.js?v=1.4.4"></script>


    <!-- main-js -->
<script type="text/javascript" src="//cdnjs.cat.net/ajax/libs/jquery/2.1.0/jquery.min.js"></script>
<script type="text/javascript" src="/js/plugins/fastclick.js?v=1.4.4"></script>
<script type="text/javascript" src="/js/plugins/ios-orientationchange-fix.js?v=1.4.4"></script>
<script type="text/javascript" src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.2/dist/jquery.fancybox.min.js"></script>

<script type="text/javascript" src="//cdnjs.cat.net/ajax/libs/node-waves/0.7.4/waves.min.js"></script>

<script type="text/javascript" src="/js/method.js?v=1.4.4"></script>
<script type="text/javascript" src="/js/blog.js?v=1.4.4"></script>

<!-- third-party -->




<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?18b812f3375b09bd66be7e3a46d7cc2d";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>



<script type="text/javascript" src="/js/plugins/local_search.js?v=1.4.4"></script>
<script type="text/javascript">
	var search_path = "search.xml";
	if (search_path.length === 0) {
		search_path = "search.xml";
	}
	var path = "/" + search_path;
	searchFunc(path, "local-search-input", "local-search-result");
</script>



<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




    
        <script type="text/javascript" src="//unpkg.com/valine/dist/Valine.min.js"></script>
<script type="text/javascript" src="/js/plugins/valine.js?v=1.4.4"></script>

    
    
        <script type="text/javascript" src="/js/plugins/gitmint.browser.js?v=1.4.4"></script>
<script type="text/javascript" src="/js/plugins/gitment.js?v=1.4.4"></script>
    





    <!-- mathjax config similar to math.stackexchange -->
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
            processEscapes: true,
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="//cdnjs.cat.net/ajax/libs/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>




    <script>
    (function() {
        var OriginTitile = document.title, titleTime;
        document.addEventListener('visibilitychange', function() {
            if (document.hidden) {
                document.title = 'Á≠â‰Ω†ÂõûÊù•ÔºÅ';
                clearTimeout(titleTime);
            } else {
                document.title = '(„Å§„Çß‚äÇ)Ê¨¢Ëøé!';
                titleTime = setTimeout(function() {
                    document.title = OriginTitile;
                },2000);
            }
        });
    })();
</script>




    <script type="text/javascript">
  daovoice('init', {
    app_id: "8997440a"
  });
  daovoice('update');
</script>


    <script src="//cdnjs.cat.net/ajax/libs/jquery/2.1.0/jquery.min.js"></script>
<script type="text/javascript" src="/js/custom.js?v=1.4.4"></script>
<script src="//cdnjs.loli.net/ajax/libs/mdui/0.4.1/js/mdui.min.js"></script>
<script src="//cdnjs.cat.net/ajax/libs/photoswipe/4.1.2/photoswipe.min.js"></script>
<script src="//cdnjs.cat.net/ajax/libs/photoswipe/4.1.2/photoswipe-ui-default.min.js"></script>

<script type="text/javascript">
jQuery.noConflict();     //Â∞ÜÂèòÈáè$ÁöÑÊéßÂà∂ÊùÉËÆ©Ê∏°
</script>
<script type="text/javascript" color="213,0,0" opacity='0.7' zIndex="-2" count="20" src="//cdnjs.cat.net/ajax/libs/canvas-nest.js/1.0.1/canvas-nest.min.js"></script>
<!-- <script type="text/javascript">

jQuery(function($){


});
</script> -->

</body>
</html>
